import{j as o,N as ps,c as mc}from"./assets/index.CIdlCuur.js";import{r as Z,R as ye,C as vn,a as Qo,X as Lr,S as ea,b as Sn,c as ta,d as na,A as gc,T as ra,K as Pn,e as Gs,f as fn,g as Zs,E as xc,h as _n,W as Ft,P as mr,M as yc,L as bc,i as sa,j as wc,k as vc,Z as kn,H as Sc,l as gr,m as kc,n as Pr,o as Ec,p as ia,q as Oi,s as Bc,t as oa,u as aa,D as Mn,v as ca,w as on,x as hr,y as an,z as xr,B as xn,F as ln,G as yr,I as la,J as Nc,N as ua,O as jc,U as da,Q as ha,V as fa,Y as Ac,_ as br,$ as Tn,a0 as Ic,a1 as hi,a2 as Fi,a3 as Cc,a4 as _c,a5 as wr,a6 as Mc,a7 as Tc,a8 as Rc,a9 as Ui,aa as Lc,ab as Pc,ac as Oc,ad as Fc}from"./assets/lucide.DWtWN2Z4.js";import{s as yn,d as vr,S as Uc,a as Ys,b as qi,u as qc,c as Dc,e as zc}from"./assets/orders.DvCYTc9o.js";import{a as $c,b as fi,g as Xn}from"./assets/react-vendor.CXPvv_bO.js";function un(r){const t=document.documentElement;r==="dark"?t.setAttribute("data-theme","dark"):t.removeAttribute("data-theme")}const Js=document.documentElement.getAttribute("data-theme")||"dark";un(Js);function Kc(){const[r,t]=Z.useState(Js);return Z.useEffect(()=>{(async()=>{const{theme:i}=await yn.get(["theme"]);i?(t(i),un(i)):yn.set({theme:Js})})()},[]),{theme:r,setTheme:n=>{t(n),un(n),yn.set({theme:n})}}}const Et=ye.forwardRef(({children:r,onClick:t,variant:e="primary",size:n="md",disabled:i=!1,className:s="",icon:a,type:l="button"},d)=>{const g=()=>{switch(n){case"sm":return"px-2 py-1.5 text-[10px]";case"lg":return"px-4 py-2 text-xs";default:return"px-3 py-2 text-xs"}},x=()=>{switch(e){case"secondary":return"bg-surface-dark text-text-primary border border-white/[0.05] hover:bg-surface hover:border-white/[0.08] hover:text-white";default:return"bg-accent text-white hover:bg-accent-light hover:shadow-lg hover:shadow-accent/25"}},b=()=>{const B="relative z-10 transition-transform duration-300 w-3.5 h-3.5";return e==="primary"?`${B} group-hover:scale-110 group-hover:rotate-90`:`${B} text-accent group-hover:text-white group-hover:scale-110 group-hover:rotate-90 transition-colors`},C=["inline-flex items-center justify-center gap-1.5 text-xs font-medium transition-all duration-300 relative group overflow-hidden rounded-md",g(),x(),i?"opacity-50 cursor-not-allowed pointer-events-none":"",s].filter(Boolean).join(" ");return o.jsxs("button",{ref:d,type:l,onClick:t,disabled:i,className:C,children:[a&&o.jsx(a,{className:b()}),o.jsx("span",{className:"relative z-10 transition-transform duration-300",children:r})]})});class Wc extends ye.Component{state={hasError:!1,error:null};static getDerivedStateFromError(){return{hasError:!0,error:null}}componentDidCatch(t){console.error("Error caught by boundary:",t),this.setState({error:t})}handleRetry=()=>{this.setState({hasError:!1,error:null}),this.props.onRetry?.()};renderErrorState(){return o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center",children:[o.jsx(vn,{className:"w-10 h-10 text-red-500 mb-4"}),o.jsx("h2",{className:"text-sm font-semibold mb-2",children:"Failed to load component"}),o.jsx("p",{className:"text-xs text-text-secondary mb-4",children:this.state.error?.message||"An unexpected error occurred"}),o.jsx(Et,{onClick:this.handleRetry,variant:"primary",size:"sm",icon:Qo,children:"Retry"})]})}render(){return this.state.hasError?this.renderErrorState():this.props.children}}var Hc=$c();const Di=200;function Tt({isOpen:r,onClose:t,children:e,title:n,customHeader:i}){const s=Z.useRef(null),[a,l]=Z.useState(!1),[d,g]=Z.useState(!1),x=d&&!a;Z.useEffect(()=>{r?(g(!0),l(!1)):(l(!0),setTimeout(()=>{g(!1),l(!1)},Di))},[r]);const b=()=>{l(!0),setTimeout(()=>{t(),g(!1),l(!1)},Di)};if(Z.useEffect(()=>(r&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=""}),[r]),!r&&!d)return null;const C=x?"opacity-100":"opacity-0",B=x?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4";return Hc.createPortal(o.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center transition-opacity duration-200 ${C}`,children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:b}),o.jsxs("div",{ref:s,className:`relative w-[calc(100%-2rem)] max-w-sm bg-deep-dark rounded-xl border border-white/[0.05] shadow-2xl transition-all duration-200 ease-out transform-gpu will-change-transform ${B}`,style:{boxShadow:`
                        0 0 0 1px rgba(255, 255, 255, 0.05),
                        0 8px 32px rgba(0, 0, 0, 0.32),
                        0 0 64px rgba(0, 0, 0, 0.16),
                        0 4px 8px rgba(0, 0, 0, 0.24)
                    `,backfaceVisibility:"hidden",perspective:"1000px"},children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/[0.05] bg-surface-dark/50 gap-4",children:[i||o.jsx("h2",{className:"text-sm font-semibold text-text-primary",children:n}),o.jsxs("button",{onClick:b,className:"p-1.5 rounded-md hover:bg-surface/80 transition-all duration-300 group relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/20 to-orange-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-md"}),o.jsx(Lr,{className:"w-4 h-4 text-text-secondary group-hover:text-text-primary transition-all duration-300 group-hover:rotate-90 group-hover:scale-110 relative z-10"})]})]}),o.jsx("div",{className:"p-4 max-h-[80vh] overflow-y-auto scrollbar-thin",children:e})]})]}),document.body)}const Vc=Z.memo(function({isOpen:t,onClose:e,title:n,description:i,date:s,isLatest:a}){const[l,d]=Z.useState(!1),g=()=>{d(!0),setTimeout(()=>{e(),d(!1)},200)},x=(C,B)=>{const M=C.trim().split(`
`);if(!M[0])return null;const[k,...S]=M;return S.length?o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("h3",{className:"text-xs font-semibold text-text-primary",children:k}),o.jsx("ul",{className:"space-y-1",children:S.map((F,L)=>o.jsxs("li",{className:"flex gap-1.5 text-[13px] items-start",children:[o.jsx("span",{className:"text-accent font-semibold mt-0.5",children:"â€¢"}),o.jsx("span",{children:F.replace(/^-\s*/,"")})]},L))})]},B):o.jsx("p",{className:"whitespace-pre-wrap",children:C},B)},b=o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-text-primary",children:n}),a&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-md bg-emerald-500/10 border border-emerald-500/20",children:[o.jsx(ea,{className:"w-2.5 h-2.5 text-emerald-500"}),o.jsx("span",{className:"text-[10px] font-medium text-emerald-500",children:"New"})]})]});return o.jsxs(Tt,{isOpen:t&&!l,onClose:g,customHeader:b,children:[o.jsx("div",{className:"max-h-[280px] overflow-y-auto scrollbar-thin scrollbar-thumb-accent/20 scrollbar-track-transparent hover:scrollbar-thumb-accent/30",children:o.jsx("div",{className:"text-sm text-text-secondary leading-relaxed space-y-4",children:i.split(`

`).map(x)})}),o.jsx("div",{className:"border-t border-white/[0.05] bg-surface-dark/50 p-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-text-secondary/75",children:s}),o.jsx("button",{onClick:g,className:"px-2.5 py-1 text-xs font-medium bg-surface hover:bg-surface-dark rounded-md transition-colors",children:"Got it"})]})})]})}),zi={Photon:"./assets/media/icons/photon.svg",Axiom:"./assets/media/icons/axiom.svg",Extension:"./assets/media/logos/logo.webp"},$i=["Axiom","Photon","Extension"],ms=1,Gc=r=>{const t=r.description.match(/\[([^\]]+)\]/g);if(!t)return null;const e={};t.forEach(i=>{i.replace(/[[\]]/g,"").split("/").forEach(s=>{const a=s.trim();e[a]=(e[a]||0)+1})});const n=[...$i.filter(i=>e[i]),...Object.keys(e).filter(i=>!$i.includes(i))];return n.length===0?null:o.jsx("div",{className:"flex items-center gap-1",children:n.map((i,s)=>o.jsxs("div",{className:"flex items-center justify-center gap-1 px-1.5 py-0.5 rounded bg-white/[0.05] border border-[var(--border-color)]",title:`includes ${i} changes`,children:[zi[i]&&o.jsx("img",{src:zi[i],alt:i,className:"w-3 h-3 object-contain opacity-90"}),o.jsx("span",{className:"text-[9px] font-medium text-text-secondary",children:e[i]})]},s))})};function Zc(){const[r,t]=Z.useState(!1),[e,n]=Z.useState(null),[i,s]=Z.useState(!1),[a,l]=Z.useState(0),[d,g]=Z.useState(!1),x=Math.ceil((ps.length-1)/ms),b=ps[0],C=ps.slice(1).slice(a*ms,(a+1)*ms),B=k=>{n(k),t(!0)},M=k=>o.jsxs("div",{className:"p-3 bg-surface-dark rounded-md border border-[var(--border-color)] hover:border-[var(--border-hover)] transition-all relative group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/[0.02] via-transparent to-transparent rounded-md pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsxs("div",{className:"min-w-0 relative z-10",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[o.jsx("h3",{className:"text-sm font-semibold text-text-primary truncate",children:k.title}),k.isLatest&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-md bg-emerald-500/10 border border-emerald-500/20 shadow-[0_0_8px_rgba(16,185,129,0.25)]",children:[o.jsx(ea,{className:"w-2.5 h-2.5 text-emerald-500"}),o.jsx("span",{className:"text-[10px] font-medium text-emerald-500",children:"New"})]})]}),Gc(k)]}),o.jsx("p",{className:"text-xs text-text-secondary leading-relaxed",children:k.summary||k.description}),o.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-[var(--border-color)]",children:[o.jsx("span",{className:"text-[10px] font-medium text-text-secondary/75",children:k.date}),o.jsx("div",{className:"relative",children:o.jsxs("button",{onClick:()=>k.description&&B(k),disabled:!k.description,className:"relative inline-flex items-center gap-1 px-2 py-1 text-[10px] font-medium text-accent bg-accent/10 hover:bg-accent hover:text-white rounded-md transition-colors disabled:hover:bg-accent/5 disabled:text-accent/50 disabled:bg-accent/5 disabled:cursor-not-allowed overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -translate-x-full opacity-0 group-hover:opacity-100 transition-all duration-700 group-hover:translate-x-full"}),o.jsx("span",{className:"relative z-10",children:"See more"}),o.jsx(gc,{className:"w-3 h-3 relative z-10"})]})})]})]})]},k.id);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[M(b),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:()=>{s(!i),g(!i)},className:"flex items-center gap-2 text-xs font-medium text-text-secondary hover:text-text-primary transition-colors",children:[o.jsx(Sn,{className:`w-3.5 h-3.5 transition-transform duration-300 ${i?"rotate-180":""}`}),"Previous Updates"]}),o.jsxs("div",{className:`flex items-center gap-1 bg-surface-dark/50 rounded-md border border-[var(--border-color)] overflow-hidden transition-opacity duration-300 ${d?"opacity-100":"opacity-0"}`,children:[o.jsx("button",{onClick:()=>l(k=>Math.max(0,k-1)),disabled:a===0,className:"p-1 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-surface/50 transition-colors",children:o.jsx(ta,{className:"w-3.5 h-3.5 text-text-secondary"})}),o.jsxs("span",{className:"px-2 text-[10px] font-medium text-text-secondary/75 border-x border-[var(--border-color)]",children:[a+1,"/",x]}),o.jsx("button",{onClick:()=>l(k=>Math.min(x-1,k+1)),disabled:a===x-1,className:"p-1 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-surface/50 transition-colors",children:o.jsx(na,{className:"w-3.5 h-3.5 text-text-secondary"})})]})]}),o.jsx("div",{className:`space-y-2 overflow-hidden transition-all duration-300 ${i?"opacity-100 max-h-96 mt-2":"opacity-0 max-h-0 mt-0"}`,children:C.map(M)})]}),o.jsx(Vc,{isOpen:r,onClose:()=>{t(!1),n(null)},title:e?.title||"",description:e?.description||"",date:e?.date||"",isLatest:e?.isLatest})]})}function Ki(){return o.jsx("div",{className:"space-y-6",children:o.jsx(Zc,{})})}var gs={},Wn={},Wi;function Yc(){if(Wi)return Wn;Wi=1,Wn.byteLength=l,Wn.toByteArray=g,Wn.fromByteArray=C;for(var r=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)r[i]=n[i],t[n.charCodeAt(i)]=i;t[45]=62,t[95]=63;function a(B){var M=B.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=B.indexOf("=");k===-1&&(k=M);var S=k===M?0:4-k%4;return[k,S]}function l(B){var M=a(B),k=M[0],S=M[1];return(k+S)*3/4-S}function d(B,M,k){return(M+k)*3/4-k}function g(B){var M,k=a(B),S=k[0],F=k[1],L=new e(d(B,S,F)),I=0,U=F>0?S-4:S,O;for(O=0;O<U;O+=4)M=t[B.charCodeAt(O)]<<18|t[B.charCodeAt(O+1)]<<12|t[B.charCodeAt(O+2)]<<6|t[B.charCodeAt(O+3)],L[I++]=M>>16&255,L[I++]=M>>8&255,L[I++]=M&255;return F===2&&(M=t[B.charCodeAt(O)]<<2|t[B.charCodeAt(O+1)]>>4,L[I++]=M&255),F===1&&(M=t[B.charCodeAt(O)]<<10|t[B.charCodeAt(O+1)]<<4|t[B.charCodeAt(O+2)]>>2,L[I++]=M>>8&255,L[I++]=M&255),L}function x(B){return r[B>>18&63]+r[B>>12&63]+r[B>>6&63]+r[B&63]}function b(B,M,k){for(var S,F=[],L=M;L<k;L+=3)S=(B[L]<<16&16711680)+(B[L+1]<<8&65280)+(B[L+2]&255),F.push(x(S));return F.join("")}function C(B){for(var M,k=B.length,S=k%3,F=[],L=16383,I=0,U=k-S;I<U;I+=L)F.push(b(B,I,I+L>U?U:I+L));return S===1?(M=B[k-1],F.push(r[M>>2]+r[M<<4&63]+"==")):S===2&&(M=(B[k-2]<<8)+B[k-1],F.push(r[M>>10]+r[M>>4&63]+r[M<<2&63]+"=")),F.join("")}return Wn}var ir={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Hi;function Jc(){return Hi||(Hi=1,ir.read=function(r,t,e,n,i){var s,a,l=i*8-n-1,d=(1<<l)-1,g=d>>1,x=-7,b=e?i-1:0,C=e?-1:1,B=r[t+b];for(b+=C,s=B&(1<<-x)-1,B>>=-x,x+=l;x>0;s=s*256+r[t+b],b+=C,x-=8);for(a=s&(1<<-x)-1,s>>=-x,x+=n;x>0;a=a*256+r[t+b],b+=C,x-=8);if(s===0)s=1-g;else{if(s===d)return a?NaN:(B?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-g}return(B?-1:1)*a*Math.pow(2,s-n)},ir.write=function(r,t,e,n,i,s){var a,l,d,g=s*8-i-1,x=(1<<g)-1,b=x>>1,C=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=n?0:s-1,M=n?1:-1,k=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=x):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+b>=1?t+=C/d:t+=C*Math.pow(2,1-b),t*d>=2&&(a++,d/=2),a+b>=x?(l=0,a=x):a+b>=1?(l=(t*d-1)*Math.pow(2,i),a=a+b):(l=t*Math.pow(2,b-1)*Math.pow(2,i),a=0));i>=8;r[e+B]=l&255,B+=M,l/=256,i-=8);for(a=a<<i|l,g+=i;g>0;r[e+B]=a&255,B+=M,a/=256,g-=8);r[e+B-M]|=k*128}),ir}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Vi;function pi(){return Vi||(Vi=1,function(r){const t=Yc(),e=Jc(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=l,r.SlowBuffer=L,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const w=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(w,f),w.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(w){if(w>i)throw new RangeError('The value "'+w+'" is invalid for option "size"');const f=new Uint8Array(w);return Object.setPrototypeOf(f,l.prototype),f}function l(w,f,p){if(typeof w=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(w)}return d(w,f,p)}l.poolSize=8192;function d(w,f,p){if(typeof w=="string")return C(w,f);if(ArrayBuffer.isView(w))return M(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(Nt(w,ArrayBuffer)||w&&Nt(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Nt(w,SharedArrayBuffer)||w&&Nt(w.buffer,SharedArrayBuffer)))return k(w,f,p);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const T=w.valueOf&&w.valueOf();if(T!=null&&T!==w)return l.from(T,f,p);const H=S(w);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return l.from(w[Symbol.toPrimitive]("string"),f,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}l.from=function(w,f,p){return d(w,f,p)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function g(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function x(w,f,p){return g(w),w<=0?a(w):f!==void 0?typeof p=="string"?a(w).fill(f,p):a(w).fill(f):a(w)}l.alloc=function(w,f,p){return x(w,f,p)};function b(w){return g(w),a(w<0?0:F(w)|0)}l.allocUnsafe=function(w){return b(w)},l.allocUnsafeSlow=function(w){return b(w)};function C(w,f){if((typeof f!="string"||f==="")&&(f="utf8"),!l.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const p=I(w,f)|0;let T=a(p);const H=T.write(w,f);return H!==p&&(T=T.slice(0,H)),T}function B(w){const f=w.length<0?0:F(w.length)|0,p=a(f);for(let T=0;T<f;T+=1)p[T]=w[T]&255;return p}function M(w){if(Nt(w,Uint8Array)){const f=new Uint8Array(w);return k(f.buffer,f.byteOffset,f.byteLength)}return B(w)}function k(w,f,p){if(f<0||w.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<f+(p||0))throw new RangeError('"length" is outside of buffer bounds');let T;return f===void 0&&p===void 0?T=new Uint8Array(w):p===void 0?T=new Uint8Array(w,f):T=new Uint8Array(w,f,p),Object.setPrototypeOf(T,l.prototype),T}function S(w){if(l.isBuffer(w)){const f=F(w.length)|0,p=a(f);return p.length===0||w.copy(p,0,0,f),p}if(w.length!==void 0)return typeof w.length!="number"||Oe(w.length)?a(0):B(w);if(w.type==="Buffer"&&Array.isArray(w.data))return B(w.data)}function F(w){if(w>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return w|0}function L(w){return+w!=w&&(w=0),l.alloc(+w)}l.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==l.prototype},l.compare=function(f,p){if(Nt(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),Nt(p,Uint8Array)&&(p=l.from(p,p.offset,p.byteLength)),!l.isBuffer(f)||!l.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===p)return 0;let T=f.length,H=p.length;for(let Y=0,ee=Math.min(T,H);Y<ee;++Y)if(f[Y]!==p[Y]){T=f[Y],H=p[Y];break}return T<H?-1:H<T?1:0},l.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(f,p){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return l.alloc(0);let T;if(p===void 0)for(p=0,T=0;T<f.length;++T)p+=f[T].length;const H=l.allocUnsafe(p);let Y=0;for(T=0;T<f.length;++T){let ee=f[T];if(Nt(ee,Uint8Array))Y+ee.length>H.length?(l.isBuffer(ee)||(ee=l.from(ee)),ee.copy(H,Y)):Uint8Array.prototype.set.call(H,ee,Y);else if(l.isBuffer(ee))ee.copy(H,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=ee.length}return H};function I(w,f){if(l.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||Nt(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const p=w.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&p===0)return 0;let H=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Ie(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Te(w).length;default:if(H)return T?-1:Ie(w).length;f=(""+f).toLowerCase(),H=!0}}l.byteLength=I;function U(w,f,p){let T=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,f>>>=0,p<=f))return"";for(w||(w="utf8");;)switch(w){case"hex":return P(this,f,p);case"utf8":case"utf-8":return c(this,f,p);case"ascii":return j(this,f,p);case"latin1":case"binary":return N(this,f,p);case"base64":return E(this,f,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,f,p);default:if(T)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),T=!0}}l.prototype._isBuffer=!0;function O(w,f,p){const T=w[f];w[f]=w[p],w[p]=T}l.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<f;p+=2)O(this,p,p+1);return this},l.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<f;p+=4)O(this,p,p+3),O(this,p+1,p+2);return this},l.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<f;p+=8)O(this,p,p+7),O(this,p+1,p+6),O(this,p+2,p+5),O(this,p+3,p+4);return this},l.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?c(this,0,f):U.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(f){if(!l.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:l.compare(this,f)===0},l.prototype.inspect=function(){let f="";const p=r.INSPECT_MAX_BYTES;return f=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(f+=" ... "),"<Buffer "+f+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(f,p,T,H,Y){if(Nt(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),!l.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(p===void 0&&(p=0),T===void 0&&(T=f?f.length:0),H===void 0&&(H=0),Y===void 0&&(Y=this.length),p<0||T>f.length||H<0||Y>this.length)throw new RangeError("out of range index");if(H>=Y&&p>=T)return 0;if(H>=Y)return-1;if(p>=T)return 1;if(p>>>=0,T>>>=0,H>>>=0,Y>>>=0,this===f)return 0;let ee=Y-H,Se=T-p;const ve=Math.min(ee,Se),we=this.slice(H,Y),Le=f.slice(p,T);for(let be=0;be<ve;++be)if(we[be]!==Le[be]){ee=we[be],Se=Le[be];break}return ee<Se?-1:Se<ee?1:0};function D(w,f,p,T,H){if(w.length===0)return-1;if(typeof p=="string"?(T=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Oe(p)&&(p=H?0:w.length-1),p<0&&(p=w.length+p),p>=w.length){if(H)return-1;p=w.length-1}else if(p<0)if(H)p=0;else return-1;if(typeof f=="string"&&(f=l.from(f,T)),l.isBuffer(f))return f.length===0?-1:J(w,f,p,T,H);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(w,f,p):Uint8Array.prototype.lastIndexOf.call(w,f,p):J(w,[f],p,T,H);throw new TypeError("val must be string, number or Buffer")}function J(w,f,p,T,H){let Y=1,ee=w.length,Se=f.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(w.length<2||f.length<2)return-1;Y=2,ee/=2,Se/=2,p/=2}function ve(Le,be){return Y===1?Le[be]:Le.readUInt16BE(be*Y)}let we;if(H){let Le=-1;for(we=p;we<ee;we++)if(ve(w,we)===ve(f,Le===-1?0:we-Le)){if(Le===-1&&(Le=we),we-Le+1===Se)return Le*Y}else Le!==-1&&(we-=we-Le),Le=-1}else for(p+Se>ee&&(p=ee-Se),we=p;we>=0;we--){let Le=!0;for(let be=0;be<Se;be++)if(ve(w,we+be)!==ve(f,be)){Le=!1;break}if(Le)return we}return-1}l.prototype.includes=function(f,p,T){return this.indexOf(f,p,T)!==-1},l.prototype.indexOf=function(f,p,T){return D(this,f,p,T,!0)},l.prototype.lastIndexOf=function(f,p,T){return D(this,f,p,T,!1)};function K(w,f,p,T){p=Number(p)||0;const H=w.length-p;T?(T=Number(T),T>H&&(T=H)):T=H;const Y=f.length;T>Y/2&&(T=Y/2);let ee;for(ee=0;ee<T;++ee){const Se=parseInt(f.substr(ee*2,2),16);if(Oe(Se))return ee;w[p+ee]=Se}return ee}function $(w,f,p,T){return Re(Ie(f,w.length-p),w,p,T)}function _(w,f,p,T){return Re(Ce(f),w,p,T)}function W(w,f,p,T){return Re(Te(f),w,p,T)}function G(w,f,p,T){return Re(Ht(f,w.length-p),w,p,T)}l.prototype.write=function(f,p,T,H){if(p===void 0)H="utf8",T=this.length,p=0;else if(T===void 0&&typeof p=="string")H=p,T=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(T)?(T=T>>>0,H===void 0&&(H="utf8")):(H=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Y=this.length-p;if((T===void 0||T>Y)&&(T=Y),f.length>0&&(T<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");let ee=!1;for(;;)switch(H){case"hex":return K(this,f,p,T);case"utf8":case"utf-8":return $(this,f,p,T);case"ascii":case"latin1":case"binary":return _(this,f,p,T);case"base64":return W(this,f,p,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,f,p,T);default:if(ee)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),ee=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(w,f,p){return f===0&&p===w.length?t.fromByteArray(w):t.fromByteArray(w.slice(f,p))}function c(w,f,p){p=Math.min(w.length,p);const T=[];let H=f;for(;H<p;){const Y=w[H];let ee=null,Se=Y>239?4:Y>223?3:Y>191?2:1;if(H+Se<=p){let ve,we,Le,be;switch(Se){case 1:Y<128&&(ee=Y);break;case 2:ve=w[H+1],(ve&192)===128&&(be=(Y&31)<<6|ve&63,be>127&&(ee=be));break;case 3:ve=w[H+1],we=w[H+2],(ve&192)===128&&(we&192)===128&&(be=(Y&15)<<12|(ve&63)<<6|we&63,be>2047&&(be<55296||be>57343)&&(ee=be));break;case 4:ve=w[H+1],we=w[H+2],Le=w[H+3],(ve&192)===128&&(we&192)===128&&(Le&192)===128&&(be=(Y&15)<<18|(ve&63)<<12|(we&63)<<6|Le&63,be>65535&&be<1114112&&(ee=be))}}ee===null?(ee=65533,Se=1):ee>65535&&(ee-=65536,T.push(ee>>>10&1023|55296),ee=56320|ee&1023),T.push(ee),H+=Se}return y(T)}const m=4096;function y(w){const f=w.length;if(f<=m)return String.fromCharCode.apply(String,w);let p="",T=0;for(;T<f;)p+=String.fromCharCode.apply(String,w.slice(T,T+=m));return p}function j(w,f,p){let T="";p=Math.min(w.length,p);for(let H=f;H<p;++H)T+=String.fromCharCode(w[H]&127);return T}function N(w,f,p){let T="";p=Math.min(w.length,p);for(let H=f;H<p;++H)T+=String.fromCharCode(w[H]);return T}function P(w,f,p){const T=w.length;(!f||f<0)&&(f=0),(!p||p<0||p>T)&&(p=T);let H="";for(let Y=f;Y<p;++Y)H+=ze[w[Y]];return H}function q(w,f,p){const T=w.slice(f,p);let H="";for(let Y=0;Y<T.length-1;Y+=2)H+=String.fromCharCode(T[Y]+T[Y+1]*256);return H}l.prototype.slice=function(f,p){const T=this.length;f=~~f,p=p===void 0?T:~~p,f<0?(f+=T,f<0&&(f=0)):f>T&&(f=T),p<0?(p+=T,p<0&&(p=0)):p>T&&(p=T),p<f&&(p=f);const H=this.subarray(f,p);return Object.setPrototypeOf(H,l.prototype),H};function A(w,f,p){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+f>p)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(f,p,T){f=f>>>0,p=p>>>0,T||A(f,p,this.length);let H=this[f],Y=1,ee=0;for(;++ee<p&&(Y*=256);)H+=this[f+ee]*Y;return H},l.prototype.readUintBE=l.prototype.readUIntBE=function(f,p,T){f=f>>>0,p=p>>>0,T||A(f,p,this.length);let H=this[f+--p],Y=1;for(;p>0&&(Y*=256);)H+=this[f+--p]*Y;return H},l.prototype.readUint8=l.prototype.readUInt8=function(f,p){return f=f>>>0,p||A(f,1,this.length),this[f]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(f,p){return f=f>>>0,p||A(f,2,this.length),this[f]|this[f+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(f,p){return f=f>>>0,p||A(f,2,this.length),this[f]<<8|this[f+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(f,p){return f=f>>>0,p||A(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(f,p){return f=f>>>0,p||A(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},l.prototype.readBigUInt64LE=Rt(function(f){f=f>>>0,pe(f,"offset");const p=this[f],T=this[f+7];(p===void 0||T===void 0)&&de(f,this.length-8);const H=p+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,Y=this[++f]+this[++f]*2**8+this[++f]*2**16+T*2**24;return BigInt(H)+(BigInt(Y)<<BigInt(32))}),l.prototype.readBigUInt64BE=Rt(function(f){f=f>>>0,pe(f,"offset");const p=this[f],T=this[f+7];(p===void 0||T===void 0)&&de(f,this.length-8);const H=p*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],Y=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+T;return(BigInt(H)<<BigInt(32))+BigInt(Y)}),l.prototype.readIntLE=function(f,p,T){f=f>>>0,p=p>>>0,T||A(f,p,this.length);let H=this[f],Y=1,ee=0;for(;++ee<p&&(Y*=256);)H+=this[f+ee]*Y;return Y*=128,H>=Y&&(H-=Math.pow(2,8*p)),H},l.prototype.readIntBE=function(f,p,T){f=f>>>0,p=p>>>0,T||A(f,p,this.length);let H=p,Y=1,ee=this[f+--H];for(;H>0&&(Y*=256);)ee+=this[f+--H]*Y;return Y*=128,ee>=Y&&(ee-=Math.pow(2,8*p)),ee},l.prototype.readInt8=function(f,p){return f=f>>>0,p||A(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},l.prototype.readInt16LE=function(f,p){f=f>>>0,p||A(f,2,this.length);const T=this[f]|this[f+1]<<8;return T&32768?T|4294901760:T},l.prototype.readInt16BE=function(f,p){f=f>>>0,p||A(f,2,this.length);const T=this[f+1]|this[f]<<8;return T&32768?T|4294901760:T},l.prototype.readInt32LE=function(f,p){return f=f>>>0,p||A(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},l.prototype.readInt32BE=function(f,p){return f=f>>>0,p||A(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},l.prototype.readBigInt64LE=Rt(function(f){f=f>>>0,pe(f,"offset");const p=this[f],T=this[f+7];(p===void 0||T===void 0)&&de(f,this.length-8);const H=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(T<<24);return(BigInt(H)<<BigInt(32))+BigInt(p+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),l.prototype.readBigInt64BE=Rt(function(f){f=f>>>0,pe(f,"offset");const p=this[f],T=this[f+7];(p===void 0||T===void 0)&&de(f,this.length-8);const H=(p<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(H)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+T)}),l.prototype.readFloatLE=function(f,p){return f=f>>>0,p||A(f,4,this.length),e.read(this,f,!0,23,4)},l.prototype.readFloatBE=function(f,p){return f=f>>>0,p||A(f,4,this.length),e.read(this,f,!1,23,4)},l.prototype.readDoubleLE=function(f,p){return f=f>>>0,p||A(f,8,this.length),e.read(this,f,!0,52,8)},l.prototype.readDoubleBE=function(f,p){return f=f>>>0,p||A(f,8,this.length),e.read(this,f,!1,52,8)};function u(w,f,p,T,H,Y){if(!l.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>H||f<Y)throw new RangeError('"value" argument is out of bounds');if(p+T>w.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(f,p,T,H){if(f=+f,p=p>>>0,T=T>>>0,!H){const Se=Math.pow(2,8*T)-1;u(this,f,p,T,Se,0)}let Y=1,ee=0;for(this[p]=f&255;++ee<T&&(Y*=256);)this[p+ee]=f/Y&255;return p+T},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(f,p,T,H){if(f=+f,p=p>>>0,T=T>>>0,!H){const Se=Math.pow(2,8*T)-1;u(this,f,p,T,Se,0)}let Y=T-1,ee=1;for(this[p+Y]=f&255;--Y>=0&&(ee*=256);)this[p+Y]=f/ee&255;return p+T},l.prototype.writeUint8=l.prototype.writeUInt8=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,1,255,0),this[p]=f&255,p+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,2,65535,0),this[p]=f&255,this[p+1]=f>>>8,p+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,2,65535,0),this[p]=f>>>8,this[p+1]=f&255,p+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,4,4294967295,0),this[p+3]=f>>>24,this[p+2]=f>>>16,this[p+1]=f>>>8,this[p]=f&255,p+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,4,4294967295,0),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4};function h(w,f,p,T,H){oe(f,T,H,w,p,7);let Y=Number(f&BigInt(4294967295));w[p++]=Y,Y=Y>>8,w[p++]=Y,Y=Y>>8,w[p++]=Y,Y=Y>>8,w[p++]=Y;let ee=Number(f>>BigInt(32)&BigInt(4294967295));return w[p++]=ee,ee=ee>>8,w[p++]=ee,ee=ee>>8,w[p++]=ee,ee=ee>>8,w[p++]=ee,p}function v(w,f,p,T,H){oe(f,T,H,w,p,7);let Y=Number(f&BigInt(4294967295));w[p+7]=Y,Y=Y>>8,w[p+6]=Y,Y=Y>>8,w[p+5]=Y,Y=Y>>8,w[p+4]=Y;let ee=Number(f>>BigInt(32)&BigInt(4294967295));return w[p+3]=ee,ee=ee>>8,w[p+2]=ee,ee=ee>>8,w[p+1]=ee,ee=ee>>8,w[p]=ee,p+8}l.prototype.writeBigUInt64LE=Rt(function(f,p=0){return h(this,f,p,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Rt(function(f,p=0){return v(this,f,p,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(f,p,T,H){if(f=+f,p=p>>>0,!H){const ve=Math.pow(2,8*T-1);u(this,f,p,T,ve-1,-ve)}let Y=0,ee=1,Se=0;for(this[p]=f&255;++Y<T&&(ee*=256);)f<0&&Se===0&&this[p+Y-1]!==0&&(Se=1),this[p+Y]=(f/ee>>0)-Se&255;return p+T},l.prototype.writeIntBE=function(f,p,T,H){if(f=+f,p=p>>>0,!H){const ve=Math.pow(2,8*T-1);u(this,f,p,T,ve-1,-ve)}let Y=T-1,ee=1,Se=0;for(this[p+Y]=f&255;--Y>=0&&(ee*=256);)f<0&&Se===0&&this[p+Y+1]!==0&&(Se=1),this[p+Y]=(f/ee>>0)-Se&255;return p+T},l.prototype.writeInt8=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,1,127,-128),f<0&&(f=255+f+1),this[p]=f&255,p+1},l.prototype.writeInt16LE=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,2,32767,-32768),this[p]=f&255,this[p+1]=f>>>8,p+2},l.prototype.writeInt16BE=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,2,32767,-32768),this[p]=f>>>8,this[p+1]=f&255,p+2},l.prototype.writeInt32LE=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,4,2147483647,-2147483648),this[p]=f&255,this[p+1]=f>>>8,this[p+2]=f>>>16,this[p+3]=f>>>24,p+4},l.prototype.writeInt32BE=function(f,p,T){return f=+f,p=p>>>0,T||u(this,f,p,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4},l.prototype.writeBigInt64LE=Rt(function(f,p=0){return h(this,f,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Rt(function(f,p=0){return v(this,f,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function R(w,f,p,T,H,Y){if(p+T>w.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function V(w,f,p,T,H){return f=+f,p=p>>>0,H||R(w,f,p,4),e.write(w,f,p,T,23,4),p+4}l.prototype.writeFloatLE=function(f,p,T){return V(this,f,p,!0,T)},l.prototype.writeFloatBE=function(f,p,T){return V(this,f,p,!1,T)};function te(w,f,p,T,H){return f=+f,p=p>>>0,H||R(w,f,p,8),e.write(w,f,p,T,52,8),p+8}l.prototype.writeDoubleLE=function(f,p,T){return te(this,f,p,!0,T)},l.prototype.writeDoubleBE=function(f,p,T){return te(this,f,p,!1,T)},l.prototype.copy=function(f,p,T,H){if(!l.isBuffer(f))throw new TypeError("argument should be a Buffer");if(T||(T=0),!H&&H!==0&&(H=this.length),p>=f.length&&(p=f.length),p||(p=0),H>0&&H<T&&(H=T),H===T||f.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),f.length-p<H-T&&(H=f.length-p+T);const Y=H-T;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,T,H):Uint8Array.prototype.set.call(f,this.subarray(T,H),p),Y},l.prototype.fill=function(f,p,T,H){if(typeof f=="string"){if(typeof p=="string"?(H=p,p=0,T=this.length):typeof T=="string"&&(H=T,T=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!l.isEncoding(H))throw new TypeError("Unknown encoding: "+H);if(f.length===1){const ee=f.charCodeAt(0);(H==="utf8"&&ee<128||H==="latin1")&&(f=ee)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(p<0||this.length<p||this.length<T)throw new RangeError("Out of range index");if(T<=p)return this;p=p>>>0,T=T===void 0?this.length:T>>>0,f||(f=0);let Y;if(typeof f=="number")for(Y=p;Y<T;++Y)this[Y]=f;else{const ee=l.isBuffer(f)?f:l.from(f,H),Se=ee.length;if(Se===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(Y=0;Y<T-p;++Y)this[Y+p]=ee[Y%Se]}return this};const se={};function he(w,f,p){se[w]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(H){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:H,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(w,f){return`The "${w}" argument must be of type number. Received type ${typeof f}`},TypeError),he("ERR_OUT_OF_RANGE",function(w,f,p){let T=`The value of "${w}" is out of range.`,H=p;return Number.isInteger(p)&&Math.abs(p)>2**32?H=je(String(p)):typeof p=="bigint"&&(H=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(H=je(H)),H+="n"),T+=` It must be ${f}. Received ${H}`,T},RangeError);function je(w){let f="",p=w.length;const T=w[0]==="-"?1:0;for(;p>=T+4;p-=3)f=`_${w.slice(p-3,p)}${f}`;return`${w.slice(0,p)}${f}`}function ne(w,f,p){pe(f,"offset"),(w[f]===void 0||w[f+p]===void 0)&&de(f,w.length-(p+1))}function oe(w,f,p,T,H,Y){if(w>p||w<f){const ee=typeof f=="bigint"?"n":"";let Se;throw f===0||f===BigInt(0)?Se=`>= 0${ee} and < 2${ee} ** ${(Y+1)*8}${ee}`:Se=`>= -(2${ee} ** ${(Y+1)*8-1}${ee}) and < 2 ** ${(Y+1)*8-1}${ee}`,new se.ERR_OUT_OF_RANGE("value",Se,w)}ne(T,H,Y)}function pe(w,f){if(typeof w!="number")throw new se.ERR_INVALID_ARG_TYPE(f,"number",w)}function de(w,f,p){throw Math.floor(w)!==w?(pe(w,p),new se.ERR_OUT_OF_RANGE("offset","an integer",w)):f<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,w)}const xe=/[^+/0-9A-Za-z-_]/g;function Pe(w){if(w=w.split("=")[0],w=w.trim().replace(xe,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function Ie(w,f){f=f||1/0;let p;const T=w.length;let H=null;const Y=[];for(let ee=0;ee<T;++ee){if(p=w.charCodeAt(ee),p>55295&&p<57344){if(!H){if(p>56319){(f-=3)>-1&&Y.push(239,191,189);continue}else if(ee+1===T){(f-=3)>-1&&Y.push(239,191,189);continue}H=p;continue}if(p<56320){(f-=3)>-1&&Y.push(239,191,189),H=p;continue}p=(H-55296<<10|p-56320)+65536}else H&&(f-=3)>-1&&Y.push(239,191,189);if(H=null,p<128){if((f-=1)<0)break;Y.push(p)}else if(p<2048){if((f-=2)<0)break;Y.push(p>>6|192,p&63|128)}else if(p<65536){if((f-=3)<0)break;Y.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((f-=4)<0)break;Y.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return Y}function Ce(w){const f=[];for(let p=0;p<w.length;++p)f.push(w.charCodeAt(p)&255);return f}function Ht(w,f){let p,T,H;const Y=[];for(let ee=0;ee<w.length&&!((f-=2)<0);++ee)p=w.charCodeAt(ee),T=p>>8,H=p%256,Y.push(H),Y.push(T);return Y}function Te(w){return t.toByteArray(Pe(w))}function Re(w,f,p,T){let H;for(H=0;H<T&&!(H+p>=f.length||H>=w.length);++H)f[H+p]=w[H];return H}function Nt(w,f){return w instanceof f||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===f.name}function Oe(w){return w!==w}const ze=function(){const w="0123456789abcdef",f=new Array(256);for(let p=0;p<16;++p){const T=p*16;for(let H=0;H<16;++H)f[T+H]=w[p]+w[H]}return f}();function Rt(w){return typeof BigInt>"u"?$e:w}function $e(){throw new Error("BigInt not supported")}}(gs)),gs}var Be=pi();function Gi(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Xc(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Or(r,...t){if(!Xc(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Qc(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Gi(r.outputLen),Gi(r.blockLen)}function Sr(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function el(r,t){Or(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}const jn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xs(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function qt(r,t){return r<<32-t|r>>>t}typeof Uint8Array.from([]).toHex=="function"&&Uint8Array.fromHex;function tl(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function mi(r){return typeof r=="string"&&(r=tl(r)),Or(r),r}function nl(...r){let t=0;for(let n=0;n<r.length;n++){const i=r[n];Or(i),t+=i.length}const e=new Uint8Array(t);for(let n=0,i=0;n<r.length;n++){const s=r[n];e.set(s,i),i+=s.length}return e}class pa{clone(){return this._cloneInto()}}function ma(r){const t=n=>r().update(mi(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function ga(r=32){if(jn&&typeof jn.getRandomValues=="function")return jn.getRandomValues(new Uint8Array(r));if(jn&&typeof jn.randomBytes=="function")return Uint8Array.from(jn.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function rl(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(e>>i&s),l=Number(e&s),d=n?4:0,g=n?0:4;r.setUint32(t+d,a,n),r.setUint32(t+g,l,n)}function sl(r,t,e){return r&t^~r&e}function il(r,t,e){return r&t^r&e^t&e}class xa extends pa{constructor(t,e,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=xs(this.buffer)}update(t){Sr(this);const{view:e,buffer:n,blockLen:i}=this;t=mi(t);const s=t.length;for(let a=0;a<s;){const l=Math.min(i-this.pos,s-a);if(l===i){const d=xs(t);for(;i<=s-a;a+=i)this.process(d,a);continue}n.set(t.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Sr(this),el(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)e[b]=0;rl(n,i-8,BigInt(this.length*8),s),this.process(n,0);const l=xs(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=d/4,x=this.get();if(g>x.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<g;b++)l.setUint32(4*b,x[b],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:i,finished:s,destroyed:a,pos:l}=this;return t.length=i,t.pos=l,t.finished=s,t.destroyed=a,i%e&&t.buffer.set(n),t}}const ol=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),en=new Uint32Array(64);class al extends xa{constructor(t=32){super(64,t,8,!1),this.A=Qt[0]|0,this.B=Qt[1]|0,this.C=Qt[2]|0,this.D=Qt[3]|0,this.E=Qt[4]|0,this.F=Qt[5]|0,this.G=Qt[6]|0,this.H=Qt[7]|0}get(){const{A:t,B:e,C:n,D:i,E:s,F:a,G:l,H:d}=this;return[t,e,n,i,s,a,l,d]}set(t,e,n,i,s,a,l,d){this.A=t|0,this.B=e|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=l|0,this.H=d|0}process(t,e){for(let b=0;b<16;b++,e+=4)en[b]=t.getUint32(e,!1);for(let b=16;b<64;b++){const C=en[b-15],B=en[b-2],M=qt(C,7)^qt(C,18)^C>>>3,k=qt(B,17)^qt(B,19)^B>>>10;en[b]=k+en[b-7]+M+en[b-16]|0}let{A:n,B:i,C:s,D:a,E:l,F:d,G:g,H:x}=this;for(let b=0;b<64;b++){const C=qt(l,6)^qt(l,11)^qt(l,25),B=x+C+sl(l,d,g)+ol[b]+en[b]|0,k=(qt(n,2)^qt(n,13)^qt(n,22))+il(n,i,s)|0;x=g,g=d,d=l,l=a+B|0,a=s,s=i,i=n,n=B+k|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,l=l+this.E|0,d=d+this.F|0,g=g+this.G|0,x=x+this.H|0,this.set(n,i,s,a,l,d,g,x)}roundClean(){en.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Xs=ma(()=>new al),or=BigInt(2**32-1),Qs=BigInt(32);function ya(r,t=!1){return t?{h:Number(r&or),l:Number(r>>Qs&or)}:{h:Number(r>>Qs&or)|0,l:Number(r&or)|0}}function cl(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:a}=ya(r[i],t);[e[i],n[i]]=[s,a]}return[e,n]}const ll=(r,t)=>BigInt(r>>>0)<<Qs|BigInt(t>>>0),ul=(r,t,e)=>r>>>e,dl=(r,t,e)=>r<<32-e|t>>>e,hl=(r,t,e)=>r>>>e|t<<32-e,fl=(r,t,e)=>r<<32-e|t>>>e,pl=(r,t,e)=>r<<64-e|t>>>e-32,ml=(r,t,e)=>r>>>e-32|t<<64-e,gl=(r,t)=>t,xl=(r,t)=>r,yl=(r,t,e)=>r<<e|t>>>32-e,bl=(r,t,e)=>t<<e|r>>>32-e,wl=(r,t,e)=>t<<e-32|r>>>64-e,vl=(r,t,e)=>r<<e-32|t>>>64-e;function Sl(r,t,e,n){const i=(t>>>0)+(n>>>0);return{h:r+e+(i/2**32|0)|0,l:i|0}}const kl=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),El=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Bl=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Nl=(r,t,e,n,i)=>t+e+n+i+(r/2**32|0)|0,jl=(r,t,e,n,i)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0),Al=(r,t,e,n,i,s)=>t+e+n+i+s+(r/2**32|0)|0,ke={fromBig:ya,split:cl,toBig:ll,shrSH:ul,shrSL:dl,rotrSH:hl,rotrSL:fl,rotrBH:pl,rotrBL:ml,rotr32H:gl,rotr32L:xl,rotlSH:yl,rotlSL:bl,rotlBH:wl,rotlBL:vl,add:Sl,add3L:kl,add3H:El,add4L:Bl,add4H:Nl,add5H:Al,add5L:jl},[Il,Cl]=ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),tn=new Uint32Array(80),nn=new Uint32Array(80);class _l extends xa{constructor(t=64){super(128,t,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:i,Ch:s,Cl:a,Dh:l,Dl:d,Eh:g,El:x,Fh:b,Fl:C,Gh:B,Gl:M,Hh:k,Hl:S}=this;return[t,e,n,i,s,a,l,d,g,x,b,C,B,M,k,S]}set(t,e,n,i,s,a,l,d,g,x,b,C,B,M,k,S){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=l|0,this.Dl=d|0,this.Eh=g|0,this.El=x|0,this.Fh=b|0,this.Fl=C|0,this.Gh=B|0,this.Gl=M|0,this.Hh=k|0,this.Hl=S|0}process(t,e){for(let I=0;I<16;I++,e+=4)tn[I]=t.getUint32(e),nn[I]=t.getUint32(e+=4);for(let I=16;I<80;I++){const U=tn[I-15]|0,O=nn[I-15]|0,D=ke.rotrSH(U,O,1)^ke.rotrSH(U,O,8)^ke.shrSH(U,O,7),J=ke.rotrSL(U,O,1)^ke.rotrSL(U,O,8)^ke.shrSL(U,O,7),K=tn[I-2]|0,$=nn[I-2]|0,_=ke.rotrSH(K,$,19)^ke.rotrBH(K,$,61)^ke.shrSH(K,$,6),W=ke.rotrSL(K,$,19)^ke.rotrBL(K,$,61)^ke.shrSL(K,$,6),G=ke.add4L(J,W,nn[I-7],nn[I-16]),E=ke.add4H(G,D,_,tn[I-7],tn[I-16]);tn[I]=E|0,nn[I]=G|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:l,Cl:d,Dh:g,Dl:x,Eh:b,El:C,Fh:B,Fl:M,Gh:k,Gl:S,Hh:F,Hl:L}=this;for(let I=0;I<80;I++){const U=ke.rotrSH(b,C,14)^ke.rotrSH(b,C,18)^ke.rotrBH(b,C,41),O=ke.rotrSL(b,C,14)^ke.rotrSL(b,C,18)^ke.rotrBL(b,C,41),D=b&B^~b&k,J=C&M^~C&S,K=ke.add5L(L,O,J,Cl[I],nn[I]),$=ke.add5H(K,F,U,D,Il[I],tn[I]),_=K|0,W=ke.rotrSH(n,i,28)^ke.rotrBH(n,i,34)^ke.rotrBH(n,i,39),G=ke.rotrSL(n,i,28)^ke.rotrBL(n,i,34)^ke.rotrBL(n,i,39),E=n&s^n&l^s&l,c=i&a^i&d^a&d;F=k|0,L=S|0,k=B|0,S=M|0,B=b|0,M=C|0,{h:b,l:C}=ke.add(g|0,x|0,$|0,_|0),g=l|0,x=d|0,l=s|0,d=a|0,s=n|0,a=i|0;const m=ke.add3L(_,G,c);n=ke.add3H(m,$,W,E),i=m|0}({h:n,l:i}=ke.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=ke.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:l,l:d}=ke.add(this.Ch|0,this.Cl|0,l|0,d|0),{h:g,l:x}=ke.add(this.Dh|0,this.Dl|0,g|0,x|0),{h:b,l:C}=ke.add(this.Eh|0,this.El|0,b|0,C|0),{h:B,l:M}=ke.add(this.Fh|0,this.Fl|0,B|0,M|0),{h:k,l:S}=ke.add(this.Gh|0,this.Gl|0,k|0,S|0),{h:F,l:L}=ke.add(this.Hh|0,this.Hl|0,F|0,L|0),this.set(n,i,s,a,l,d,g,x,b,C,B,M,k,S,F,L)}roundClean(){tn.fill(0),nn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ml=ma(()=>new _l);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gi=BigInt(0),ei=BigInt(1);function On(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function xi(r){if(!On(r))throw new Error("Uint8Array expected")}function dn(r,t){if(typeof t!="boolean")throw new Error(r+" boolean expected, got "+t)}function ar(r){const t=r.toString(16);return t.length&1?"0"+t:t}function ba(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?gi:BigInt("0x"+r)}const wa=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Tl=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Fn(r){if(xi(r),wa)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=Tl[r[e]];return t}const Vt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Zi(r){if(r>=Vt._0&&r<=Vt._9)return r-Vt._0;if(r>=Vt.A&&r<=Vt.F)return r-(Vt.A-10);if(r>=Vt.a&&r<=Vt.f)return r-(Vt.a-10)}function kr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(wa)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let i=0,s=0;i<e;i++,s+=2){const a=Zi(r.charCodeAt(s)),l=Zi(r.charCodeAt(s+1));if(a===void 0||l===void 0){const d=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+s)}n[i]=a*16+l}return n}function bn(r){return ba(Fn(r))}function Zn(r){return xi(r),ba(Fn(Uint8Array.from(r).reverse()))}function Yn(r,t){return kr(r.toString(16).padStart(t*2,"0"))}function Er(r,t){return Yn(r,t).reverse()}function ut(r,t,e){let n;if(typeof t=="string")try{n=kr(t)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(On(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof e=="number"&&i!==e)throw new Error(r+" of length "+e+" expected, got "+i);return n}function Un(...r){let t=0;for(let n=0;n<r.length;n++){const i=r[n];xi(i),t+=i.length}const e=new Uint8Array(t);for(let n=0,i=0;n<r.length;n++){const s=r[n];e.set(s,i),i+=s.length}return e}const ys=r=>typeof r=="bigint"&&gi<=r;function yi(r,t,e){return ys(r)&&ys(t)&&ys(e)&&t<=r&&r<e}function Pt(r,t,e,n){if(!yi(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function Rl(r){let t;for(t=0;r>gi;r>>=ei,t+=1);return t}const Fr=r=>(ei<<BigInt(r))-ei,bs=r=>new Uint8Array(r),Yi=r=>Uint8Array.from(r);function Ll(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=bs(r),i=bs(r),s=0;const a=()=>{n.fill(1),i.fill(0),s=0},l=(...b)=>e(i,n,...b),d=(b=bs(0))=>{i=l(Yi([0]),b),n=l(),b.length!==0&&(i=l(Yi([1]),b),n=l())},g=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const C=[];for(;b<t;){n=l();const B=n.slice();C.push(B),b+=n.length}return Un(...C)};return(b,C)=>{a(),d(b);let B;for(;!(B=C(g()));)d();return a(),B}}const Pl={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||On(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Qn(r,t,e={}){const n=(i,s,a)=>{const l=Pl[s];if(typeof l!="function")throw new Error("invalid validator function");const d=r[i];if(!(a&&d===void 0)&&!l(d,r))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+d)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(e))n(i,s,!0);return r}function Br(r){const t=new WeakMap;return(e,...n)=>{const i=t.get(e);if(i!==void 0)return i;const s=r(e,...n);return t.set(e,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pt=BigInt(0),qe=BigInt(1),gn=BigInt(2),Ol=BigInt(3),ti=BigInt(4),Ji=BigInt(5),Xi=BigInt(8);function Fe(r,t){const e=r%t;return e>=pt?e:t+e}function Fl(r,t,e){if(t<pt)throw new Error("invalid exponent, negatives unsupported");if(e<=pt)throw new Error("invalid modulus");if(e===qe)return pt;let n=qe;for(;t>pt;)t&qe&&(n=n*r%e),r=r*r%e,t>>=qe;return n}function Ke(r,t,e){let n=r;for(;t-- >pt;)n*=n,n%=e;return n}function ni(r,t){if(r===pt)throw new Error("invert: expected non-zero number");if(t<=pt)throw new Error("invert: expected positive modulus, got "+t);let e=Fe(r,t),n=t,i=pt,s=qe;for(;e!==pt;){const l=n/e,d=n%e,g=i-s*l;n=e,e=d,i=s,s=g}if(n!==qe)throw new Error("invert: does not exist");return Fe(i,t)}function Ul(r){const t=(r-qe)/gn;let e,n,i;for(e=r-qe,n=0;e%gn===pt;e/=gn,n++);for(i=gn;i<r&&Fl(i,t,r)!==r-qe;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const a=(r+qe)/ti;return function(d,g){const x=d.pow(g,a);if(!d.eql(d.sqr(x),g))throw new Error("Cannot find square root");return x}}const s=(e+qe)/gn;return function(l,d){if(l.pow(d,t)===l.neg(l.ONE))throw new Error("Cannot find square root");let g=n,x=l.pow(l.mul(l.ONE,i),e),b=l.pow(d,s),C=l.pow(d,e);for(;!l.eql(C,l.ONE);){if(l.eql(C,l.ZERO))return l.ZERO;let B=1;for(let k=l.sqr(C);B<g&&!l.eql(k,l.ONE);B++)k=l.sqr(k);const M=l.pow(x,qe<<BigInt(g-B-1));x=l.sqr(M),b=l.mul(b,M),C=l.mul(C,x),g=B}return b}}function ql(r){if(r%ti===Ol){const t=(r+qe)/ti;return function(n,i){const s=n.pow(i,t);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%Xi===Ji){const t=(r-Ji)/Xi;return function(n,i){const s=n.mul(i,gn),a=n.pow(s,t),l=n.mul(i,a),d=n.mul(n.mul(l,gn),a),g=n.mul(l,n.sub(d,n.ONE));if(!n.eql(n.sqr(g),i))throw new Error("Cannot find square root");return g}}return Ul(r)}const Dl=(r,t)=>(Fe(r,t)&qe)===qe,zl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $l(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=zl.reduce((n,i)=>(n[i]="function",n),t);return Qn(r,e)}function Kl(r,t,e){if(e<pt)throw new Error("invalid exponent, negatives unsupported");if(e===pt)return r.ONE;if(e===qe)return t;let n=r.ONE,i=t;for(;e>pt;)e&qe&&(n=r.mul(n,i)),i=r.sqr(i),e>>=qe;return n}function Wl(r,t){const e=new Array(t.length),n=t.reduce((s,a,l)=>r.is0(a)?s:(e[l]=s,r.mul(s,a)),r.ONE),i=r.inv(n);return t.reduceRight((s,a,l)=>r.is0(a)?s:(e[l]=r.mul(s,e[l]),r.mul(s,a)),i),e}function va(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Ur(r,t,e=!1,n={}){if(r<=pt)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:i,nByteLength:s}=va(r,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const l=Object.freeze({ORDER:r,isLE:e,BITS:i,BYTES:s,MASK:Fr(i),ZERO:pt,ONE:qe,create:d=>Fe(d,r),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return pt<=d&&d<r},is0:d=>d===pt,isOdd:d=>(d&qe)===qe,neg:d=>Fe(-d,r),eql:(d,g)=>d===g,sqr:d=>Fe(d*d,r),add:(d,g)=>Fe(d+g,r),sub:(d,g)=>Fe(d-g,r),mul:(d,g)=>Fe(d*g,r),pow:(d,g)=>Kl(l,d,g),div:(d,g)=>Fe(d*ni(g,r),r),sqrN:d=>d*d,addN:(d,g)=>d+g,subN:(d,g)=>d-g,mulN:(d,g)=>d*g,inv:d=>ni(d,r),sqrt:n.sqrt||(d=>(a||(a=ql(r)),a(l,d))),invertBatch:d=>Wl(l,d),cmov:(d,g,x)=>x?g:d,toBytes:d=>e?Er(d,s):Yn(d,s),fromBytes:d=>{if(d.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+d.length);return e?Zn(d):bn(d)}});return Object.freeze(l)}function Sa(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function ka(r){const t=Sa(r);return t+Math.ceil(t/2)}function Hl(r,t,e=!1){const n=r.length,i=Sa(t),s=ka(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const a=e?Zn(r):bn(r),l=Fe(a,t-qe)+qe;return e?Er(l,i):Yn(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qi=BigInt(0),ri=BigInt(1);function ws(r,t){const e=t.negate();return r?e:t}function Ea(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function vs(r,t){Ea(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),i=2**r,s=Fr(r),a=BigInt(r);return{windows:e,windowSize:n,mask:s,maxNumber:i,shiftBy:a}}function eo(r,t,e){const{windowSize:n,mask:i,maxNumber:s,shiftBy:a}=e;let l=Number(r&i),d=r>>a;l>n&&(l-=s,d+=ri);const g=t*n,x=g+Math.abs(l)-1,b=l===0,C=l<0,B=t%2!==0;return{nextN:d,offset:x,isZero:b,isNeg:C,isNegF:B,offsetF:g}}function Vl(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function Gl(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const Ss=new WeakMap,Ba=new WeakMap;function ks(r){return Ba.get(r)||1}function Na(r,t){return{constTimeNegate:ws,hasPrecomputes(e){return ks(e)!==1},unsafeLadder(e,n,i=r.ZERO){let s=e;for(;n>Qi;)n&ri&&(i=i.add(s)),s=s.double(),n>>=ri;return i},precomputeWindow(e,n){const{windows:i,windowSize:s}=vs(n,t),a=[];let l=e,d=l;for(let g=0;g<i;g++){d=l,a.push(d);for(let x=1;x<s;x++)d=d.add(l),a.push(d);l=d.double()}return a},wNAF(e,n,i){let s=r.ZERO,a=r.BASE;const l=vs(e,t);for(let d=0;d<l.windows;d++){const{nextN:g,offset:x,isZero:b,isNeg:C,isNegF:B,offsetF:M}=eo(i,d,l);i=g,b?a=a.add(ws(B,n[M])):s=s.add(ws(C,n[x]))}return{p:s,f:a}},wNAFUnsafe(e,n,i,s=r.ZERO){const a=vs(e,t);for(let l=0;l<a.windows&&i!==Qi;l++){const{nextN:d,offset:g,isZero:x,isNeg:b}=eo(i,l,a);if(i=d,!x){const C=n[g];s=s.add(b?C.negate():C)}}return s},getPrecomputes(e,n,i){let s=Ss.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&Ss.set(n,i(s))),s},wNAFCached(e,n,i){const s=ks(e);return this.wNAF(s,this.getPrecomputes(s,e,i),n)},wNAFCachedUnsafe(e,n,i,s){const a=ks(e);return a===1?this.unsafeLadder(e,n,s):this.wNAFUnsafe(a,this.getPrecomputes(a,e,i),n,s)},setWindowSize(e,n){Ea(n,t),Ba.set(e,n),Ss.delete(e)}}}function ja(r,t,e,n){if(Vl(e,r),Gl(n,t),e.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=r.ZERO,s=Rl(BigInt(e.length)),a=s>12?s-3:s>4?s-2:s?2:1,l=Fr(a),d=new Array(Number(l)+1).fill(i),g=Math.floor((t.BITS-1)/a)*a;let x=i;for(let b=g;b>=0;b-=a){d.fill(i);for(let B=0;B<n.length;B++){const M=n[B],k=Number(M>>BigInt(b)&l);d[k]=d[k].add(e[B])}let C=i;for(let B=d.length-1,M=i;B>0;B--)M=M.add(d[B]),C=C.add(M);if(x=x.add(C),b!==0)for(let B=0;B<a;B++)x=x.double()}return x}function bi(r){return $l(r.Fp),Qn(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...va(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dt=BigInt(0),kt=BigInt(1),to=BigInt(2),Zl=BigInt(8),Yl={zip215:!0};function Jl(r){const t=bi(r);return Qn(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Xl(r){const t=Jl(r),{Fp:e,n,prehash:i,hash:s,randomBytes:a,nByteLength:l,h:d}=t,g=to<<BigInt(l*8)-kt,x=e.create,b=Ur(t.n,t.nBitLength),C=t.uvRatio||((j,N)=>{try{return{isValid:!0,value:e.sqrt(j*e.inv(N))}}catch{return{isValid:!1,value:Dt}}}),B=t.adjustScalarBytes||(j=>j),M=t.domain||((j,N,P)=>{if(dn("phflag",P),N.length||P)throw new Error("Contexts/pre-hash are not supported");return j});function k(j,N,P=!1){const q=P?kt:Dt;Pt("coordinate "+j,N,q,g)}function S(j){if(!(j instanceof I))throw new Error("ExtendedPoint expected")}const F=Br((j,N)=>{const{ex:P,ey:q,ez:A}=j,u=j.is0();N==null&&(N=u?Zl:e.inv(A));const h=x(P*N),v=x(q*N),R=x(A*N);if(u)return{x:Dt,y:kt};if(R!==kt)throw new Error("invZ was invalid");return{x:h,y:v}}),L=Br(j=>{const{a:N,d:P}=t;if(j.is0())throw new Error("bad point: ZERO");const{ex:q,ey:A,ez:u,et:h}=j,v=x(q*q),R=x(A*A),V=x(u*u),te=x(V*V),se=x(v*N),he=x(V*x(se+R)),je=x(te+x(P*x(v*R)));if(he!==je)throw new Error("bad point: equation left != right (1)");const ne=x(q*A),oe=x(u*h);if(ne!==oe)throw new Error("bad point: equation left != right (2)");return!0});class I{constructor(N,P,q,A){k("x",N),k("y",P),k("z",q,!0),k("t",A),this.ex=N,this.ey=P,this.ez=q,this.et=A,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof I)throw new Error("extended point not allowed");const{x:P,y:q}=N||{};return k("x",P),k("y",q),new I(P,q,kt,x(P*q))}static normalizeZ(N){const P=e.invertBatch(N.map(q=>q.ez));return N.map((q,A)=>q.toAffine(P[A])).map(I.fromAffine)}static msm(N,P){return ja(I,b,N,P)}_setWindowSize(N){D.setWindowSize(this,N)}assertValidity(){L(this)}equals(N){S(N);const{ex:P,ey:q,ez:A}=this,{ex:u,ey:h,ez:v}=N,R=x(P*v),V=x(u*A),te=x(q*v),se=x(h*A);return R===V&&te===se}is0(){return this.equals(I.ZERO)}negate(){return new I(x(-this.ex),this.ey,this.ez,x(-this.et))}double(){const{a:N}=t,{ex:P,ey:q,ez:A}=this,u=x(P*P),h=x(q*q),v=x(to*x(A*A)),R=x(N*u),V=P+q,te=x(x(V*V)-u-h),se=R+h,he=se-v,je=R-h,ne=x(te*he),oe=x(se*je),pe=x(te*je),de=x(he*se);return new I(ne,oe,de,pe)}add(N){S(N);const{a:P,d:q}=t,{ex:A,ey:u,ez:h,et:v}=this,{ex:R,ey:V,ez:te,et:se}=N,he=x(A*R),je=x(u*V),ne=x(v*q*se),oe=x(h*te),pe=x((A+u)*(R+V)-he-je),de=oe-ne,xe=oe+ne,Pe=x(je-P*he),Ie=x(pe*de),Ce=x(xe*Pe),Ht=x(pe*Pe),Te=x(de*xe);return new I(Ie,Ce,Te,Ht)}subtract(N){return this.add(N.negate())}wNAF(N){return D.wNAFCached(this,N,I.normalizeZ)}multiply(N){const P=N;Pt("scalar",P,kt,n);const{p:q,f:A}=this.wNAF(P);return I.normalizeZ([q,A])[0]}multiplyUnsafe(N,P=I.ZERO){const q=N;return Pt("scalar",q,Dt,n),q===Dt?O:this.is0()||q===kt?this:D.wNAFCachedUnsafe(this,q,I.normalizeZ,P)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return D.unsafeLadder(this,n).is0()}toAffine(N){return F(this,N)}clearCofactor(){const{h:N}=t;return N===kt?this:this.multiplyUnsafe(N)}static fromHex(N,P=!1){const{d:q,a:A}=t,u=e.BYTES;N=ut("pointHex",N,u),dn("zip215",P);const h=N.slice(),v=N[u-1];h[u-1]=v&-129;const R=Zn(h),V=P?g:e.ORDER;Pt("pointHex.y",R,Dt,V);const te=x(R*R),se=x(te-kt),he=x(q*te-A);let{isValid:je,value:ne}=C(se,he);if(!je)throw new Error("Point.fromHex: invalid y coordinate");const oe=(ne&kt)===kt,pe=(v&128)!==0;if(!P&&ne===Dt&&pe)throw new Error("Point.fromHex: x=0 and x_0=1");return pe!==oe&&(ne=x(-ne)),I.fromAffine({x:ne,y:R})}static fromPrivateKey(N){const{scalar:P}=$(N);return U.multiply(P)}toRawBytes(){const{x:N,y:P}=this.toAffine(),q=Er(P,e.BYTES);return q[q.length-1]|=N&kt?128:0,q}toHex(){return Fn(this.toRawBytes())}}I.BASE=new I(t.Gx,t.Gy,kt,x(t.Gx*t.Gy)),I.ZERO=new I(Dt,kt,kt,Dt);const{BASE:U,ZERO:O}=I,D=Na(I,l*8);function J(j){return Fe(j,n)}function K(j){return J(Zn(j))}function $(j){const N=e.BYTES;j=ut("private key",j,N);const P=ut("hashed private key",s(j),2*N),q=B(P.slice(0,N)),A=P.slice(N,2*N),u=K(q);return{head:q,prefix:A,scalar:u}}function _(j){const{head:N,prefix:P,scalar:q}=$(j),A=U.multiply(q),u=A.toRawBytes();return{head:N,prefix:P,scalar:q,point:A,pointBytes:u}}function W(j){return _(j).pointBytes}function G(j=new Uint8Array,...N){const P=Un(...N);return K(s(M(P,ut("context",j),!!i)))}function E(j,N,P={}){j=ut("message",j),i&&(j=i(j));const{prefix:q,scalar:A,pointBytes:u}=_(N),h=G(P.context,q,j),v=U.multiply(h).toRawBytes(),R=G(P.context,v,u,j),V=J(h+R*A);Pt("signature.s",V,Dt,n);const te=Un(v,Er(V,e.BYTES));return ut("result",te,e.BYTES*2)}const c=Yl;function m(j,N,P,q=c){const{context:A,zip215:u}=q,h=e.BYTES;j=ut("signature",j,2*h),N=ut("message",N),P=ut("publicKey",P,h),u!==void 0&&dn("zip215",u),i&&(N=i(N));const v=Zn(j.slice(h,2*h));let R,V,te;try{R=I.fromHex(P,u),V=I.fromHex(j.slice(0,h),u),te=U.multiplyUnsafe(v)}catch{return!1}if(!u&&R.isSmallOrder())return!1;const se=G(A,V.toRawBytes(),R.toRawBytes(),N);return V.add(R.multiplyUnsafe(se)).subtract(te).clearCofactor().equals(I.ZERO)}return U._setWindowSize(8),{CURVE:t,getPublicKey:W,sign:E,verify:m,ExtendedPoint:I,utils:{getExtendedPublicKey:_,randomPrivateKey:()=>a(e.BYTES),precompute(j=8,N=I.BASE){return N._setWindowSize(j),N.multiply(BigInt(3)),N}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),no=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Ql=BigInt(1),ro=BigInt(2);BigInt(3);const eu=BigInt(5),tu=BigInt(8);function nu(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),i=BigInt(80),s=wi,l=r*r%s*r%s,d=Ke(l,ro,s)*l%s,g=Ke(d,Ql,s)*r%s,x=Ke(g,eu,s)*g%s,b=Ke(x,t,s)*x%s,C=Ke(b,e,s)*b%s,B=Ke(C,n,s)*C%s,M=Ke(B,i,s)*B%s,k=Ke(M,i,s)*B%s,S=Ke(k,t,s)*x%s;return{pow_p_5_8:Ke(S,ro,s)*r%s,b2:l}}function ru(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function su(r,t){const e=wi,n=Fe(t*t*t,e),i=Fe(n*n*t,e),s=nu(r*i).pow_p_5_8;let a=Fe(r*n*s,e);const l=Fe(t*a*a,e),d=a,g=Fe(a*no,e),x=l===r,b=l===Fe(-r,e),C=l===Fe(-r*no,e);return x&&(a=d),(b||C)&&(a=g),Dl(a,e)&&(a=Fe(-a,e)),{isValid:x||b,value:a}}const so=Ur(wi,void 0,!0),iu={a:so.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:so,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:tu,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ml,randomBytes:ga,adjustScalarBytes:ru,uvRatio:su},er=Xl(iu);var fr={exports:{}};const ou={},au=Object.freeze(Object.defineProperty({__proto__:null,default:ou},Symbol.toStringTag,{value:"Module"})),cu=fi(au);var lu=fr.exports,io;function Aa(){return io||(io=1,function(r){(function(t,e){function n(E,c){if(!E)throw new Error(c||"Assertion failed")}function i(E,c){E.super_=c;var m=function(){};m.prototype=c.prototype,E.prototype=new m,E.prototype.constructor=E}function s(E,c,m){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((c==="le"||c==="be")&&(m=c,c=10),this._init(E||0,c||10,m||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=cu.Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,m){return c.cmp(m)>0?c:m},s.min=function(c,m){return c.cmp(m)<0?c:m},s.prototype._init=function(c,m,y){if(typeof c=="number")return this._initNumber(c,m,y);if(typeof c=="object")return this._initArray(c,m,y);m==="hex"&&(m=16),n(m===(m|0)&&m>=2&&m<=36),c=c.toString().replace(/\s+/g,"");var j=0;c[0]==="-"&&(j++,this.negative=1),j<c.length&&(m===16?this._parseHex(c,j,y):(this._parseBase(c,m,j),y==="le"&&this._initArray(this.toArray(),m,y)))},s.prototype._initNumber=function(c,m,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),m,y)},s.prototype._initArray=function(c,m,y){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var N,P,q=0;if(y==="be")for(j=c.length-1,N=0;j>=0;j-=3)P=c[j]|c[j-1]<<8|c[j-2]<<16,this.words[N]|=P<<q&67108863,this.words[N+1]=P>>>26-q&67108863,q+=24,q>=26&&(q-=26,N++);else if(y==="le")for(j=0,N=0;j<c.length;j+=3)P=c[j]|c[j+1]<<8|c[j+2]<<16,this.words[N]|=P<<q&67108863,this.words[N+1]=P>>>26-q&67108863,q+=24,q>=26&&(q-=26,N++);return this._strip()};function l(E,c){var m=E.charCodeAt(c);if(m>=48&&m<=57)return m-48;if(m>=65&&m<=70)return m-55;if(m>=97&&m<=102)return m-87;n(!1,"Invalid character in "+E)}function d(E,c,m){var y=l(E,m);return m-1>=c&&(y|=l(E,m-1)<<4),y}s.prototype._parseHex=function(c,m,y){this.length=Math.ceil((c.length-m)/6),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var N=0,P=0,q;if(y==="be")for(j=c.length-1;j>=m;j-=2)q=d(c,m,j)<<N,this.words[P]|=q&67108863,N>=18?(N-=18,P+=1,this.words[P]|=q>>>26):N+=8;else{var A=c.length-m;for(j=A%2===0?m+1:m;j<c.length;j+=2)q=d(c,m,j)<<N,this.words[P]|=q&67108863,N>=18?(N-=18,P+=1,this.words[P]|=q>>>26):N+=8}this._strip()};function g(E,c,m,y){for(var j=0,N=0,P=Math.min(E.length,m),q=c;q<P;q++){var A=E.charCodeAt(q)-48;j*=y,A>=49?N=A-49+10:A>=17?N=A-17+10:N=A,n(A>=0&&N<y,"Invalid character"),j+=N}return j}s.prototype._parseBase=function(c,m,y){this.words=[0],this.length=1;for(var j=0,N=1;N<=67108863;N*=m)j++;j--,N=N/m|0;for(var P=c.length-y,q=P%j,A=Math.min(P,P-q)+y,u=0,h=y;h<A;h+=j)u=g(c,h,h+j,m),this.imuln(N),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(q!==0){var v=1;for(u=g(c,h,c.length,m),h=0;h<q;h++)v*=m;this.imuln(v),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var m=0;m<this.length;m++)c.words[m]=this.words[m];c.length=this.length,c.negative=this.negative,c.red=this.red};function x(E,c){E.words=c.words,E.length=c.length,E.negative=c.negative,E.red=c.red}if(s.prototype._move=function(c){x(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{s.prototype.inspect=b}else s.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],B=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,m){c=c||10,m=m|0||1;var y;if(c===16||c==="hex"){y="";for(var j=0,N=0,P=0;P<this.length;P++){var q=this.words[P],A=((q<<j|N)&16777215).toString(16);N=q>>>24-j&16777215,j+=2,j>=26&&(j-=26,P--),N!==0||P!==this.length-1?y=C[6-A.length]+A+y:y=A+y}for(N!==0&&(y=N.toString(16)+y);y.length%m!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var u=B[c],h=M[c];y="";var v=this.clone();for(v.negative=0;!v.isZero();){var R=v.modrn(h).toString(c);v=v.idivn(h),v.isZero()?y=R+y:y=C[u-R.length]+R+y}for(this.isZero()&&(y="0"+y);y.length%m!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(c,m){return this.toArrayLike(a,c,m)}),s.prototype.toArray=function(c,m){return this.toArrayLike(Array,c,m)};var k=function(c,m){return c.allocUnsafe?c.allocUnsafe(m):new c(m)};s.prototype.toArrayLike=function(c,m,y){this._strip();var j=this.byteLength(),N=y||Math.max(1,j);n(j<=N,"byte array longer than desired length"),n(N>0,"Requested array length <= 0");var P=k(c,N),q=m==="le"?"LE":"BE";return this["_toArrayLike"+q](P,j),P},s.prototype._toArrayLikeLE=function(c,m){for(var y=0,j=0,N=0,P=0;N<this.length;N++){var q=this.words[N]<<P|j;c[y++]=q&255,y<c.length&&(c[y++]=q>>8&255),y<c.length&&(c[y++]=q>>16&255),P===6?(y<c.length&&(c[y++]=q>>24&255),j=0,P=0):(j=q>>>24,P+=2)}if(y<c.length)for(c[y++]=j;y<c.length;)c[y++]=0},s.prototype._toArrayLikeBE=function(c,m){for(var y=c.length-1,j=0,N=0,P=0;N<this.length;N++){var q=this.words[N]<<P|j;c[y--]=q&255,y>=0&&(c[y--]=q>>8&255),y>=0&&(c[y--]=q>>16&255),P===6?(y>=0&&(c[y--]=q>>24&255),j=0,P=0):(j=q>>>24,P+=2)}if(y>=0)for(c[y--]=j;y>=0;)c[y--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var m=c,y=0;return m>=4096&&(y+=13,m>>>=13),m>=64&&(y+=7,m>>>=7),m>=8&&(y+=4,m>>>=4),m>=2&&(y+=2,m>>>=2),y+m},s.prototype._zeroBits=function(c){if(c===0)return 26;var m=c,y=0;return(m&8191)===0&&(y+=13,m>>>=13),(m&127)===0&&(y+=7,m>>>=7),(m&15)===0&&(y+=4,m>>>=4),(m&3)===0&&(y+=2,m>>>=2),(m&1)===0&&y++,y},s.prototype.bitLength=function(){var c=this.words[this.length-1],m=this._countBits(c);return(this.length-1)*26+m};function S(E){for(var c=new Array(E.bitLength()),m=0;m<c.length;m++){var y=m/26|0,j=m%26;c[m]=E.words[y]>>>j&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,m=0;m<this.length;m++){var y=this._zeroBits(this.words[m]);if(c+=y,y!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var m=0;m<c.length;m++)this.words[m]=this.words[m]|c.words[m];return this._strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var m;this.length>c.length?m=c:m=this;for(var y=0;y<m.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=m.length,this._strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var m,y;this.length>c.length?(m=this,y=c):(m=c,y=this);for(var j=0;j<y.length;j++)this.words[j]=m.words[j]^y.words[j];if(this!==m)for(;j<m.length;j++)this.words[j]=m.words[j];return this.length=m.length,this._strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var m=Math.ceil(c/26)|0,y=c%26;this._expand(m),y>0&&m--;for(var j=0;j<m;j++)this.words[j]=~this.words[j]&67108863;return y>0&&(this.words[j]=~this.words[j]&67108863>>26-y),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,m){n(typeof c=="number"&&c>=0);var y=c/26|0,j=c%26;return this._expand(y+1),m?this.words[y]=this.words[y]|1<<j:this.words[y]=this.words[y]&~(1<<j),this._strip()},s.prototype.iadd=function(c){var m;if(this.negative!==0&&c.negative===0)return this.negative=0,m=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,m=this.isub(c),c.negative=1,m._normSign();var y,j;this.length>c.length?(y=this,j=c):(y=c,j=this);for(var N=0,P=0;P<j.length;P++)m=(y.words[P]|0)+(j.words[P]|0)+N,this.words[P]=m&67108863,N=m>>>26;for(;N!==0&&P<y.length;P++)m=(y.words[P]|0)+N,this.words[P]=m&67108863,N=m>>>26;if(this.length=y.length,N!==0)this.words[this.length]=N,this.length++;else if(y!==this)for(;P<y.length;P++)this.words[P]=y.words[P];return this},s.prototype.add=function(c){var m;return c.negative!==0&&this.negative===0?(c.negative=0,m=this.sub(c),c.negative^=1,m):c.negative===0&&this.negative!==0?(this.negative=0,m=c.sub(this),this.negative=1,m):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var m=this.iadd(c);return c.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var j,N;y>0?(j=this,N=c):(j=c,N=this);for(var P=0,q=0;q<N.length;q++)m=(j.words[q]|0)-(N.words[q]|0)+P,P=m>>26,this.words[q]=m&67108863;for(;P!==0&&q<j.length;q++)m=(j.words[q]|0)+P,P=m>>26,this.words[q]=m&67108863;if(P===0&&q<j.length&&j!==this)for(;q<j.length;q++)this.words[q]=j.words[q];return this.length=Math.max(this.length,q),j!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function F(E,c,m){m.negative=c.negative^E.negative;var y=E.length+c.length|0;m.length=y,y=y-1|0;var j=E.words[0]|0,N=c.words[0]|0,P=j*N,q=P&67108863,A=P/67108864|0;m.words[0]=q;for(var u=1;u<y;u++){for(var h=A>>>26,v=A&67108863,R=Math.min(u,c.length-1),V=Math.max(0,u-E.length+1);V<=R;V++){var te=u-V|0;j=E.words[te]|0,N=c.words[V]|0,P=j*N+v,h+=P/67108864|0,v=P&67108863}m.words[u]=v|0,A=h|0}return A!==0?m.words[u]=A|0:m.length--,m._strip()}var L=function(c,m,y){var j=c.words,N=m.words,P=y.words,q=0,A,u,h,v=j[0]|0,R=v&8191,V=v>>>13,te=j[1]|0,se=te&8191,he=te>>>13,je=j[2]|0,ne=je&8191,oe=je>>>13,pe=j[3]|0,de=pe&8191,xe=pe>>>13,Pe=j[4]|0,Ie=Pe&8191,Ce=Pe>>>13,Ht=j[5]|0,Te=Ht&8191,Re=Ht>>>13,Nt=j[6]|0,Oe=Nt&8191,ze=Nt>>>13,Rt=j[7]|0,$e=Rt&8191,w=Rt>>>13,f=j[8]|0,p=f&8191,T=f>>>13,H=j[9]|0,Y=H&8191,ee=H>>>13,Se=N[0]|0,ve=Se&8191,we=Se>>>13,Le=N[1]|0,be=Le&8191,He=Le>>>13,Ii=N[2]|0,Ve=Ii&8191,Ge=Ii>>>13,Ci=N[3]|0,Ze=Ci&8191,Ye=Ci>>>13,_i=N[4]|0,Je=_i&8191,Xe=_i>>>13,Mi=N[5]|0,Qe=Mi&8191,et=Mi>>>13,Ti=N[6]|0,tt=Ti&8191,nt=Ti>>>13,Ri=N[7]|0,rt=Ri&8191,st=Ri>>>13,Li=N[8]|0,it=Li&8191,ot=Li>>>13,Pi=N[9]|0,at=Pi&8191,ct=Pi>>>13;y.negative=c.negative^m.negative,y.length=19,A=Math.imul(R,ve),u=Math.imul(R,we),u=u+Math.imul(V,ve)|0,h=Math.imul(V,we);var Zr=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,A=Math.imul(se,ve),u=Math.imul(se,we),u=u+Math.imul(he,ve)|0,h=Math.imul(he,we),A=A+Math.imul(R,be)|0,u=u+Math.imul(R,He)|0,u=u+Math.imul(V,be)|0,h=h+Math.imul(V,He)|0;var Yr=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,A=Math.imul(ne,ve),u=Math.imul(ne,we),u=u+Math.imul(oe,ve)|0,h=Math.imul(oe,we),A=A+Math.imul(se,be)|0,u=u+Math.imul(se,He)|0,u=u+Math.imul(he,be)|0,h=h+Math.imul(he,He)|0,A=A+Math.imul(R,Ve)|0,u=u+Math.imul(R,Ge)|0,u=u+Math.imul(V,Ve)|0,h=h+Math.imul(V,Ge)|0;var Jr=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,A=Math.imul(de,ve),u=Math.imul(de,we),u=u+Math.imul(xe,ve)|0,h=Math.imul(xe,we),A=A+Math.imul(ne,be)|0,u=u+Math.imul(ne,He)|0,u=u+Math.imul(oe,be)|0,h=h+Math.imul(oe,He)|0,A=A+Math.imul(se,Ve)|0,u=u+Math.imul(se,Ge)|0,u=u+Math.imul(he,Ve)|0,h=h+Math.imul(he,Ge)|0,A=A+Math.imul(R,Ze)|0,u=u+Math.imul(R,Ye)|0,u=u+Math.imul(V,Ze)|0,h=h+Math.imul(V,Ye)|0;var Xr=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,A=Math.imul(Ie,ve),u=Math.imul(Ie,we),u=u+Math.imul(Ce,ve)|0,h=Math.imul(Ce,we),A=A+Math.imul(de,be)|0,u=u+Math.imul(de,He)|0,u=u+Math.imul(xe,be)|0,h=h+Math.imul(xe,He)|0,A=A+Math.imul(ne,Ve)|0,u=u+Math.imul(ne,Ge)|0,u=u+Math.imul(oe,Ve)|0,h=h+Math.imul(oe,Ge)|0,A=A+Math.imul(se,Ze)|0,u=u+Math.imul(se,Ye)|0,u=u+Math.imul(he,Ze)|0,h=h+Math.imul(he,Ye)|0,A=A+Math.imul(R,Je)|0,u=u+Math.imul(R,Xe)|0,u=u+Math.imul(V,Je)|0,h=h+Math.imul(V,Xe)|0;var Qr=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,A=Math.imul(Te,ve),u=Math.imul(Te,we),u=u+Math.imul(Re,ve)|0,h=Math.imul(Re,we),A=A+Math.imul(Ie,be)|0,u=u+Math.imul(Ie,He)|0,u=u+Math.imul(Ce,be)|0,h=h+Math.imul(Ce,He)|0,A=A+Math.imul(de,Ve)|0,u=u+Math.imul(de,Ge)|0,u=u+Math.imul(xe,Ve)|0,h=h+Math.imul(xe,Ge)|0,A=A+Math.imul(ne,Ze)|0,u=u+Math.imul(ne,Ye)|0,u=u+Math.imul(oe,Ze)|0,h=h+Math.imul(oe,Ye)|0,A=A+Math.imul(se,Je)|0,u=u+Math.imul(se,Xe)|0,u=u+Math.imul(he,Je)|0,h=h+Math.imul(he,Xe)|0,A=A+Math.imul(R,Qe)|0,u=u+Math.imul(R,et)|0,u=u+Math.imul(V,Qe)|0,h=h+Math.imul(V,et)|0;var es=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(es>>>26)|0,es&=67108863,A=Math.imul(Oe,ve),u=Math.imul(Oe,we),u=u+Math.imul(ze,ve)|0,h=Math.imul(ze,we),A=A+Math.imul(Te,be)|0,u=u+Math.imul(Te,He)|0,u=u+Math.imul(Re,be)|0,h=h+Math.imul(Re,He)|0,A=A+Math.imul(Ie,Ve)|0,u=u+Math.imul(Ie,Ge)|0,u=u+Math.imul(Ce,Ve)|0,h=h+Math.imul(Ce,Ge)|0,A=A+Math.imul(de,Ze)|0,u=u+Math.imul(de,Ye)|0,u=u+Math.imul(xe,Ze)|0,h=h+Math.imul(xe,Ye)|0,A=A+Math.imul(ne,Je)|0,u=u+Math.imul(ne,Xe)|0,u=u+Math.imul(oe,Je)|0,h=h+Math.imul(oe,Xe)|0,A=A+Math.imul(se,Qe)|0,u=u+Math.imul(se,et)|0,u=u+Math.imul(he,Qe)|0,h=h+Math.imul(he,et)|0,A=A+Math.imul(R,tt)|0,u=u+Math.imul(R,nt)|0,u=u+Math.imul(V,tt)|0,h=h+Math.imul(V,nt)|0;var ts=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(ts>>>26)|0,ts&=67108863,A=Math.imul($e,ve),u=Math.imul($e,we),u=u+Math.imul(w,ve)|0,h=Math.imul(w,we),A=A+Math.imul(Oe,be)|0,u=u+Math.imul(Oe,He)|0,u=u+Math.imul(ze,be)|0,h=h+Math.imul(ze,He)|0,A=A+Math.imul(Te,Ve)|0,u=u+Math.imul(Te,Ge)|0,u=u+Math.imul(Re,Ve)|0,h=h+Math.imul(Re,Ge)|0,A=A+Math.imul(Ie,Ze)|0,u=u+Math.imul(Ie,Ye)|0,u=u+Math.imul(Ce,Ze)|0,h=h+Math.imul(Ce,Ye)|0,A=A+Math.imul(de,Je)|0,u=u+Math.imul(de,Xe)|0,u=u+Math.imul(xe,Je)|0,h=h+Math.imul(xe,Xe)|0,A=A+Math.imul(ne,Qe)|0,u=u+Math.imul(ne,et)|0,u=u+Math.imul(oe,Qe)|0,h=h+Math.imul(oe,et)|0,A=A+Math.imul(se,tt)|0,u=u+Math.imul(se,nt)|0,u=u+Math.imul(he,tt)|0,h=h+Math.imul(he,nt)|0,A=A+Math.imul(R,rt)|0,u=u+Math.imul(R,st)|0,u=u+Math.imul(V,rt)|0,h=h+Math.imul(V,st)|0;var ns=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(ns>>>26)|0,ns&=67108863,A=Math.imul(p,ve),u=Math.imul(p,we),u=u+Math.imul(T,ve)|0,h=Math.imul(T,we),A=A+Math.imul($e,be)|0,u=u+Math.imul($e,He)|0,u=u+Math.imul(w,be)|0,h=h+Math.imul(w,He)|0,A=A+Math.imul(Oe,Ve)|0,u=u+Math.imul(Oe,Ge)|0,u=u+Math.imul(ze,Ve)|0,h=h+Math.imul(ze,Ge)|0,A=A+Math.imul(Te,Ze)|0,u=u+Math.imul(Te,Ye)|0,u=u+Math.imul(Re,Ze)|0,h=h+Math.imul(Re,Ye)|0,A=A+Math.imul(Ie,Je)|0,u=u+Math.imul(Ie,Xe)|0,u=u+Math.imul(Ce,Je)|0,h=h+Math.imul(Ce,Xe)|0,A=A+Math.imul(de,Qe)|0,u=u+Math.imul(de,et)|0,u=u+Math.imul(xe,Qe)|0,h=h+Math.imul(xe,et)|0,A=A+Math.imul(ne,tt)|0,u=u+Math.imul(ne,nt)|0,u=u+Math.imul(oe,tt)|0,h=h+Math.imul(oe,nt)|0,A=A+Math.imul(se,rt)|0,u=u+Math.imul(se,st)|0,u=u+Math.imul(he,rt)|0,h=h+Math.imul(he,st)|0,A=A+Math.imul(R,it)|0,u=u+Math.imul(R,ot)|0,u=u+Math.imul(V,it)|0,h=h+Math.imul(V,ot)|0;var rs=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(rs>>>26)|0,rs&=67108863,A=Math.imul(Y,ve),u=Math.imul(Y,we),u=u+Math.imul(ee,ve)|0,h=Math.imul(ee,we),A=A+Math.imul(p,be)|0,u=u+Math.imul(p,He)|0,u=u+Math.imul(T,be)|0,h=h+Math.imul(T,He)|0,A=A+Math.imul($e,Ve)|0,u=u+Math.imul($e,Ge)|0,u=u+Math.imul(w,Ve)|0,h=h+Math.imul(w,Ge)|0,A=A+Math.imul(Oe,Ze)|0,u=u+Math.imul(Oe,Ye)|0,u=u+Math.imul(ze,Ze)|0,h=h+Math.imul(ze,Ye)|0,A=A+Math.imul(Te,Je)|0,u=u+Math.imul(Te,Xe)|0,u=u+Math.imul(Re,Je)|0,h=h+Math.imul(Re,Xe)|0,A=A+Math.imul(Ie,Qe)|0,u=u+Math.imul(Ie,et)|0,u=u+Math.imul(Ce,Qe)|0,h=h+Math.imul(Ce,et)|0,A=A+Math.imul(de,tt)|0,u=u+Math.imul(de,nt)|0,u=u+Math.imul(xe,tt)|0,h=h+Math.imul(xe,nt)|0,A=A+Math.imul(ne,rt)|0,u=u+Math.imul(ne,st)|0,u=u+Math.imul(oe,rt)|0,h=h+Math.imul(oe,st)|0,A=A+Math.imul(se,it)|0,u=u+Math.imul(se,ot)|0,u=u+Math.imul(he,it)|0,h=h+Math.imul(he,ot)|0,A=A+Math.imul(R,at)|0,u=u+Math.imul(R,ct)|0,u=u+Math.imul(V,at)|0,h=h+Math.imul(V,ct)|0;var ss=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(ss>>>26)|0,ss&=67108863,A=Math.imul(Y,be),u=Math.imul(Y,He),u=u+Math.imul(ee,be)|0,h=Math.imul(ee,He),A=A+Math.imul(p,Ve)|0,u=u+Math.imul(p,Ge)|0,u=u+Math.imul(T,Ve)|0,h=h+Math.imul(T,Ge)|0,A=A+Math.imul($e,Ze)|0,u=u+Math.imul($e,Ye)|0,u=u+Math.imul(w,Ze)|0,h=h+Math.imul(w,Ye)|0,A=A+Math.imul(Oe,Je)|0,u=u+Math.imul(Oe,Xe)|0,u=u+Math.imul(ze,Je)|0,h=h+Math.imul(ze,Xe)|0,A=A+Math.imul(Te,Qe)|0,u=u+Math.imul(Te,et)|0,u=u+Math.imul(Re,Qe)|0,h=h+Math.imul(Re,et)|0,A=A+Math.imul(Ie,tt)|0,u=u+Math.imul(Ie,nt)|0,u=u+Math.imul(Ce,tt)|0,h=h+Math.imul(Ce,nt)|0,A=A+Math.imul(de,rt)|0,u=u+Math.imul(de,st)|0,u=u+Math.imul(xe,rt)|0,h=h+Math.imul(xe,st)|0,A=A+Math.imul(ne,it)|0,u=u+Math.imul(ne,ot)|0,u=u+Math.imul(oe,it)|0,h=h+Math.imul(oe,ot)|0,A=A+Math.imul(se,at)|0,u=u+Math.imul(se,ct)|0,u=u+Math.imul(he,at)|0,h=h+Math.imul(he,ct)|0;var is=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(is>>>26)|0,is&=67108863,A=Math.imul(Y,Ve),u=Math.imul(Y,Ge),u=u+Math.imul(ee,Ve)|0,h=Math.imul(ee,Ge),A=A+Math.imul(p,Ze)|0,u=u+Math.imul(p,Ye)|0,u=u+Math.imul(T,Ze)|0,h=h+Math.imul(T,Ye)|0,A=A+Math.imul($e,Je)|0,u=u+Math.imul($e,Xe)|0,u=u+Math.imul(w,Je)|0,h=h+Math.imul(w,Xe)|0,A=A+Math.imul(Oe,Qe)|0,u=u+Math.imul(Oe,et)|0,u=u+Math.imul(ze,Qe)|0,h=h+Math.imul(ze,et)|0,A=A+Math.imul(Te,tt)|0,u=u+Math.imul(Te,nt)|0,u=u+Math.imul(Re,tt)|0,h=h+Math.imul(Re,nt)|0,A=A+Math.imul(Ie,rt)|0,u=u+Math.imul(Ie,st)|0,u=u+Math.imul(Ce,rt)|0,h=h+Math.imul(Ce,st)|0,A=A+Math.imul(de,it)|0,u=u+Math.imul(de,ot)|0,u=u+Math.imul(xe,it)|0,h=h+Math.imul(xe,ot)|0,A=A+Math.imul(ne,at)|0,u=u+Math.imul(ne,ct)|0,u=u+Math.imul(oe,at)|0,h=h+Math.imul(oe,ct)|0;var os=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(os>>>26)|0,os&=67108863,A=Math.imul(Y,Ze),u=Math.imul(Y,Ye),u=u+Math.imul(ee,Ze)|0,h=Math.imul(ee,Ye),A=A+Math.imul(p,Je)|0,u=u+Math.imul(p,Xe)|0,u=u+Math.imul(T,Je)|0,h=h+Math.imul(T,Xe)|0,A=A+Math.imul($e,Qe)|0,u=u+Math.imul($e,et)|0,u=u+Math.imul(w,Qe)|0,h=h+Math.imul(w,et)|0,A=A+Math.imul(Oe,tt)|0,u=u+Math.imul(Oe,nt)|0,u=u+Math.imul(ze,tt)|0,h=h+Math.imul(ze,nt)|0,A=A+Math.imul(Te,rt)|0,u=u+Math.imul(Te,st)|0,u=u+Math.imul(Re,rt)|0,h=h+Math.imul(Re,st)|0,A=A+Math.imul(Ie,it)|0,u=u+Math.imul(Ie,ot)|0,u=u+Math.imul(Ce,it)|0,h=h+Math.imul(Ce,ot)|0,A=A+Math.imul(de,at)|0,u=u+Math.imul(de,ct)|0,u=u+Math.imul(xe,at)|0,h=h+Math.imul(xe,ct)|0;var as=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(as>>>26)|0,as&=67108863,A=Math.imul(Y,Je),u=Math.imul(Y,Xe),u=u+Math.imul(ee,Je)|0,h=Math.imul(ee,Xe),A=A+Math.imul(p,Qe)|0,u=u+Math.imul(p,et)|0,u=u+Math.imul(T,Qe)|0,h=h+Math.imul(T,et)|0,A=A+Math.imul($e,tt)|0,u=u+Math.imul($e,nt)|0,u=u+Math.imul(w,tt)|0,h=h+Math.imul(w,nt)|0,A=A+Math.imul(Oe,rt)|0,u=u+Math.imul(Oe,st)|0,u=u+Math.imul(ze,rt)|0,h=h+Math.imul(ze,st)|0,A=A+Math.imul(Te,it)|0,u=u+Math.imul(Te,ot)|0,u=u+Math.imul(Re,it)|0,h=h+Math.imul(Re,ot)|0,A=A+Math.imul(Ie,at)|0,u=u+Math.imul(Ie,ct)|0,u=u+Math.imul(Ce,at)|0,h=h+Math.imul(Ce,ct)|0;var cs=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(cs>>>26)|0,cs&=67108863,A=Math.imul(Y,Qe),u=Math.imul(Y,et),u=u+Math.imul(ee,Qe)|0,h=Math.imul(ee,et),A=A+Math.imul(p,tt)|0,u=u+Math.imul(p,nt)|0,u=u+Math.imul(T,tt)|0,h=h+Math.imul(T,nt)|0,A=A+Math.imul($e,rt)|0,u=u+Math.imul($e,st)|0,u=u+Math.imul(w,rt)|0,h=h+Math.imul(w,st)|0,A=A+Math.imul(Oe,it)|0,u=u+Math.imul(Oe,ot)|0,u=u+Math.imul(ze,it)|0,h=h+Math.imul(ze,ot)|0,A=A+Math.imul(Te,at)|0,u=u+Math.imul(Te,ct)|0,u=u+Math.imul(Re,at)|0,h=h+Math.imul(Re,ct)|0;var ls=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(ls>>>26)|0,ls&=67108863,A=Math.imul(Y,tt),u=Math.imul(Y,nt),u=u+Math.imul(ee,tt)|0,h=Math.imul(ee,nt),A=A+Math.imul(p,rt)|0,u=u+Math.imul(p,st)|0,u=u+Math.imul(T,rt)|0,h=h+Math.imul(T,st)|0,A=A+Math.imul($e,it)|0,u=u+Math.imul($e,ot)|0,u=u+Math.imul(w,it)|0,h=h+Math.imul(w,ot)|0,A=A+Math.imul(Oe,at)|0,u=u+Math.imul(Oe,ct)|0,u=u+Math.imul(ze,at)|0,h=h+Math.imul(ze,ct)|0;var us=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(us>>>26)|0,us&=67108863,A=Math.imul(Y,rt),u=Math.imul(Y,st),u=u+Math.imul(ee,rt)|0,h=Math.imul(ee,st),A=A+Math.imul(p,it)|0,u=u+Math.imul(p,ot)|0,u=u+Math.imul(T,it)|0,h=h+Math.imul(T,ot)|0,A=A+Math.imul($e,at)|0,u=u+Math.imul($e,ct)|0,u=u+Math.imul(w,at)|0,h=h+Math.imul(w,ct)|0;var ds=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(ds>>>26)|0,ds&=67108863,A=Math.imul(Y,it),u=Math.imul(Y,ot),u=u+Math.imul(ee,it)|0,h=Math.imul(ee,ot),A=A+Math.imul(p,at)|0,u=u+Math.imul(p,ct)|0,u=u+Math.imul(T,at)|0,h=h+Math.imul(T,ct)|0;var hs=(q+A|0)+((u&8191)<<13)|0;q=(h+(u>>>13)|0)+(hs>>>26)|0,hs&=67108863,A=Math.imul(Y,at),u=Math.imul(Y,ct),u=u+Math.imul(ee,at)|0,h=Math.imul(ee,ct);var fs=(q+A|0)+((u&8191)<<13)|0;return q=(h+(u>>>13)|0)+(fs>>>26)|0,fs&=67108863,P[0]=Zr,P[1]=Yr,P[2]=Jr,P[3]=Xr,P[4]=Qr,P[5]=es,P[6]=ts,P[7]=ns,P[8]=rs,P[9]=ss,P[10]=is,P[11]=os,P[12]=as,P[13]=cs,P[14]=ls,P[15]=us,P[16]=ds,P[17]=hs,P[18]=fs,q!==0&&(P[19]=q,y.length++),y};Math.imul||(L=F);function I(E,c,m){m.negative=c.negative^E.negative,m.length=E.length+c.length;for(var y=0,j=0,N=0;N<m.length-1;N++){var P=j;j=0;for(var q=y&67108863,A=Math.min(N,c.length-1),u=Math.max(0,N-E.length+1);u<=A;u++){var h=N-u,v=E.words[h]|0,R=c.words[u]|0,V=v*R,te=V&67108863;P=P+(V/67108864|0)|0,te=te+q|0,q=te&67108863,P=P+(te>>>26)|0,j+=P>>>26,P&=67108863}m.words[N]=q,y=P,P=j}return y!==0?m.words[N]=y:m.length--,m._strip()}function U(E,c,m){return I(E,c,m)}s.prototype.mulTo=function(c,m){var y,j=this.length+c.length;return this.length===10&&c.length===10?y=L(this,c,m):j<63?y=F(this,c,m):j<1024?y=I(this,c,m):y=U(this,c,m),y},s.prototype.mul=function(c){var m=new s(null);return m.words=new Array(this.length+c.length),this.mulTo(c,m)},s.prototype.mulf=function(c){var m=new s(null);return m.words=new Array(this.length+c.length),U(this,c,m)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var m=c<0;m&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var y=0,j=0;j<this.length;j++){var N=(this.words[j]|0)*c,P=(N&67108863)+(y&67108863);y>>=26,y+=N/67108864|0,y+=P>>>26,this.words[j]=P&67108863}return y!==0&&(this.words[j]=y,this.length++),m?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var m=S(c);if(m.length===0)return new s(1);for(var y=this,j=0;j<m.length&&m[j]===0;j++,y=y.sqr());if(++j<m.length)for(var N=y.sqr();j<m.length;j++,N=N.sqr())m[j]!==0&&(y=y.mul(N));return y},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var m=c%26,y=(c-m)/26,j=67108863>>>26-m<<26-m,N;if(m!==0){var P=0;for(N=0;N<this.length;N++){var q=this.words[N]&j,A=(this.words[N]|0)-q<<m;this.words[N]=A|P,P=q>>>26-m}P&&(this.words[N]=P,this.length++)}if(y!==0){for(N=this.length-1;N>=0;N--)this.words[N+y]=this.words[N];for(N=0;N<y;N++)this.words[N]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,m,y){n(typeof c=="number"&&c>=0);var j;m?j=(m-m%26)/26:j=0;var N=c%26,P=Math.min((c-N)/26,this.length),q=67108863^67108863>>>N<<N,A=y;if(j-=P,j=Math.max(0,j),A){for(var u=0;u<P;u++)A.words[u]=this.words[u];A.length=P}if(P!==0)if(this.length>P)for(this.length-=P,u=0;u<this.length;u++)this.words[u]=this.words[u+P];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(h!==0||u>=j);u--){var v=this.words[u]|0;this.words[u]=h<<26-N|v>>>N,h=v&q}return A&&h!==0&&(A.words[A.length++]=h),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,m,y){return n(this.negative===0),this.iushrn(c,m,y)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var m=c%26,y=(c-m)/26,j=1<<m;if(this.length<=y)return!1;var N=this.words[y];return!!(N&j)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var m=c%26,y=(c-m)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(m!==0&&y++,this.length=Math.min(y,this.length),m!==0){var j=67108863^67108863>>>m<<m;this.words[this.length-1]&=j}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,m,y){var j=c.length+y,N;this._expand(j);var P,q=0;for(N=0;N<c.length;N++){P=(this.words[N+y]|0)+q;var A=(c.words[N]|0)*m;P-=A&67108863,q=(P>>26)-(A/67108864|0),this.words[N+y]=P&67108863}for(;N<this.length-y;N++)P=(this.words[N+y]|0)+q,q=P>>26,this.words[N+y]=P&67108863;if(q===0)return this._strip();for(n(q===-1),q=0,N=0;N<this.length;N++)P=-(this.words[N]|0)+q,q=P>>26,this.words[N]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,m){var y=this.length-c.length,j=this.clone(),N=c,P=N.words[N.length-1]|0,q=this._countBits(P);y=26-q,y!==0&&(N=N.ushln(y),j.iushln(y),P=N.words[N.length-1]|0);var A=j.length-N.length,u;if(m!=="mod"){u=new s(null),u.length=A+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var v=j.clone()._ishlnsubmul(N,1,A);v.negative===0&&(j=v,u&&(u.words[A]=1));for(var R=A-1;R>=0;R--){var V=(j.words[N.length+R]|0)*67108864+(j.words[N.length+R-1]|0);for(V=Math.min(V/P|0,67108863),j._ishlnsubmul(N,V,R);j.negative!==0;)V--,j.negative=0,j._ishlnsubmul(N,1,R),j.isZero()||(j.negative^=1);u&&(u.words[R]=V)}return u&&u._strip(),j._strip(),m!=="div"&&y!==0&&j.iushrn(y),{div:u||null,mod:j}},s.prototype.divmod=function(c,m,y){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var j,N,P;return this.negative!==0&&c.negative===0?(P=this.neg().divmod(c,m),m!=="mod"&&(j=P.div.neg()),m!=="div"&&(N=P.mod.neg(),y&&N.negative!==0&&N.iadd(c)),{div:j,mod:N}):this.negative===0&&c.negative!==0?(P=this.divmod(c.neg(),m),m!=="mod"&&(j=P.div.neg()),{div:j,mod:P.mod}):(this.negative&c.negative)!==0?(P=this.neg().divmod(c.neg(),m),m!=="div"&&(N=P.mod.neg(),y&&N.negative!==0&&N.isub(c)),{div:P.div,mod:N}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?m==="div"?{div:this.divn(c.words[0]),mod:null}:m==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,m)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var m=this.divmod(c);if(m.mod.isZero())return m.div;var y=m.div.negative!==0?m.mod.isub(c):m.mod,j=c.ushrn(1),N=c.andln(1),P=y.cmp(j);return P<0||N===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},s.prototype.modrn=function(c){var m=c<0;m&&(c=-c),n(c<=67108863);for(var y=(1<<26)%c,j=0,N=this.length-1;N>=0;N--)j=(y*j+(this.words[N]|0))%c;return m?-j:j},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var m=c<0;m&&(c=-c),n(c<=67108863);for(var y=0,j=this.length-1;j>=0;j--){var N=(this.words[j]|0)+y*67108864;this.words[j]=N/c|0,y=N%c}return this._strip(),m?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var m=this,y=c.clone();m.negative!==0?m=m.umod(c):m=m.clone();for(var j=new s(1),N=new s(0),P=new s(0),q=new s(1),A=0;m.isEven()&&y.isEven();)m.iushrn(1),y.iushrn(1),++A;for(var u=y.clone(),h=m.clone();!m.isZero();){for(var v=0,R=1;(m.words[0]&R)===0&&v<26;++v,R<<=1);if(v>0)for(m.iushrn(v);v-- >0;)(j.isOdd()||N.isOdd())&&(j.iadd(u),N.isub(h)),j.iushrn(1),N.iushrn(1);for(var V=0,te=1;(y.words[0]&te)===0&&V<26;++V,te<<=1);if(V>0)for(y.iushrn(V);V-- >0;)(P.isOdd()||q.isOdd())&&(P.iadd(u),q.isub(h)),P.iushrn(1),q.iushrn(1);m.cmp(y)>=0?(m.isub(y),j.isub(P),N.isub(q)):(y.isub(m),P.isub(j),q.isub(N))}return{a:P,b:q,gcd:y.iushln(A)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var m=this,y=c.clone();m.negative!==0?m=m.umod(c):m=m.clone();for(var j=new s(1),N=new s(0),P=y.clone();m.cmpn(1)>0&&y.cmpn(1)>0;){for(var q=0,A=1;(m.words[0]&A)===0&&q<26;++q,A<<=1);if(q>0)for(m.iushrn(q);q-- >0;)j.isOdd()&&j.iadd(P),j.iushrn(1);for(var u=0,h=1;(y.words[0]&h)===0&&u<26;++u,h<<=1);if(u>0)for(y.iushrn(u);u-- >0;)N.isOdd()&&N.iadd(P),N.iushrn(1);m.cmp(y)>=0?(m.isub(y),j.isub(N)):(y.isub(m),N.isub(j))}var v;return m.cmpn(1)===0?v=j:v=N,v.cmpn(0)<0&&v.iadd(c),v},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var m=this.clone(),y=c.clone();m.negative=0,y.negative=0;for(var j=0;m.isEven()&&y.isEven();j++)m.iushrn(1),y.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;y.isEven();)y.iushrn(1);var N=m.cmp(y);if(N<0){var P=m;m=y,y=P}else if(N===0||y.cmpn(1)===0)break;m.isub(y)}while(!0);return y.iushln(j)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var m=c%26,y=(c-m)/26,j=1<<m;if(this.length<=y)return this._expand(y+1),this.words[y]|=j,this;for(var N=j,P=y;N!==0&&P<this.length;P++){var q=this.words[P]|0;q+=N,N=q>>>26,q&=67108863,this.words[P]=q}return N!==0&&(this.words[P]=N,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var m=c<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this._strip();var y;if(this.length>1)y=1;else{m&&(c=-c),n(c<=67108863,"Number is too big");var j=this.words[0]|0;y=j===c?0:j<c?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var m=this.ucmp(c);return this.negative!==0?-m|0:m},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var m=0,y=this.length-1;y>=0;y--){var j=this.words[y]|0,N=c.words[y]|0;if(j!==N){j<N?m=-1:j>N&&(m=1);break}}return m},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new W(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var O={k256:null,p224:null,p192:null,p25519:null};function D(E,c){this.name=E,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},D.prototype.ireduce=function(c){var m=c,y;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),y=m.bitLength();while(y>this.n);var j=y<this.n?-1:m.ucmp(this.p);return j===0?(m.words[0]=0,m.length=1):j>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},D.prototype.split=function(c,m){c.iushrn(this.n,0,m)},D.prototype.imulK=function(c){return c.imul(this.k)};function J(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(J,D),J.prototype.split=function(c,m){for(var y=4194303,j=Math.min(c.length,9),N=0;N<j;N++)m.words[N]=c.words[N];if(m.length=j,c.length<=9){c.words[0]=0,c.length=1;return}var P=c.words[9];for(m.words[m.length++]=P&y,N=10;N<c.length;N++){var q=c.words[N]|0;c.words[N-10]=(q&y)<<4|P>>>22,P=q}P>>>=22,c.words[N-10]=P,P===0&&c.length>10?c.length-=10:c.length-=9},J.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var m=0,y=0;y<c.length;y++){var j=c.words[y]|0;m+=j*977,c.words[y]=m&67108863,m=j*64+(m/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function K(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(K,D);function $(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i($,D);function _(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(_,D),_.prototype.imulK=function(c){for(var m=0,y=0;y<c.length;y++){var j=(c.words[y]|0)*19+m,N=j&67108863;j>>>=26,c.words[y]=N,m=j}return m!==0&&(c.words[c.length++]=m),c},s._prime=function(c){if(O[c])return O[c];var m;if(c==="k256")m=new J;else if(c==="p224")m=new K;else if(c==="p192")m=new $;else if(c==="p25519")m=new _;else throw new Error("Unknown prime "+c);return O[c]=m,m};function W(E){if(typeof E=="string"){var c=s._prime(E);this.m=c.p,this.prime=c}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}W.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},W.prototype._verify2=function(c,m){n((c.negative|m.negative)===0,"red works only with positives"),n(c.red&&c.red===m.red,"red works only with red numbers")},W.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(x(c,c.umod(this.m)._forceRed(this)),c)},W.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},W.prototype.add=function(c,m){this._verify2(c,m);var y=c.add(m);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},W.prototype.iadd=function(c,m){this._verify2(c,m);var y=c.iadd(m);return y.cmp(this.m)>=0&&y.isub(this.m),y},W.prototype.sub=function(c,m){this._verify2(c,m);var y=c.sub(m);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},W.prototype.isub=function(c,m){this._verify2(c,m);var y=c.isub(m);return y.cmpn(0)<0&&y.iadd(this.m),y},W.prototype.shl=function(c,m){return this._verify1(c),this.imod(c.ushln(m))},W.prototype.imul=function(c,m){return this._verify2(c,m),this.imod(c.imul(m))},W.prototype.mul=function(c,m){return this._verify2(c,m),this.imod(c.mul(m))},W.prototype.isqr=function(c){return this.imul(c,c.clone())},W.prototype.sqr=function(c){return this.mul(c,c)},W.prototype.sqrt=function(c){if(c.isZero())return c.clone();var m=this.m.andln(3);if(n(m%2===1),m===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(c,y)}for(var j=this.m.subn(1),N=0;!j.isZero()&&j.andln(1)===0;)N++,j.iushrn(1);n(!j.isZero());var P=new s(1).toRed(this),q=P.redNeg(),A=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,A).cmp(q)!==0;)u.redIAdd(q);for(var h=this.pow(u,j),v=this.pow(c,j.addn(1).iushrn(1)),R=this.pow(c,j),V=N;R.cmp(P)!==0;){for(var te=R,se=0;te.cmp(P)!==0;se++)te=te.redSqr();n(se<V);var he=this.pow(h,new s(1).iushln(V-se-1));v=v.redMul(he),h=he.redSqr(),R=R.redMul(h),V=se}return v},W.prototype.invm=function(c){var m=c._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},W.prototype.pow=function(c,m){if(m.isZero())return new s(1).toRed(this);if(m.cmpn(1)===0)return c.clone();var y=4,j=new Array(1<<y);j[0]=new s(1).toRed(this),j[1]=c;for(var N=2;N<j.length;N++)j[N]=this.mul(j[N-1],c);var P=j[0],q=0,A=0,u=m.bitLength()%26;for(u===0&&(u=26),N=m.length-1;N>=0;N--){for(var h=m.words[N],v=u-1;v>=0;v--){var R=h>>v&1;if(P!==j[0]&&(P=this.sqr(P)),R===0&&q===0){A=0;continue}q<<=1,q|=R,A++,!(A!==y&&(N!==0||v!==0))&&(P=this.mul(P,j[q]),A=0,q=0)}u=26}return P},W.prototype.convertTo=function(c){var m=c.umod(this.m);return m===c?m.clone():m},W.prototype.convertFrom=function(c){var m=c.clone();return m.red=null,m},s.mont=function(c){return new G(c)};function G(E){W.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(G,W),G.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},G.prototype.convertFrom=function(c){var m=this.imod(c.mul(this.rinv));return m.red=null,m},G.prototype.imul=function(c,m){if(c.isZero()||m.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(m),j=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=y.isub(j).iushrn(this.shift),P=N;return N.cmp(this.m)>=0?P=N.isub(this.m):N.cmpn(0)<0&&(P=N.iadd(this.m)),P._forceRed(this)},G.prototype.mul=function(c,m){if(c.isZero()||m.isZero())return new s(0)._forceRed(this);var y=c.mul(m),j=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=y.isub(j).iushrn(this.shift),P=N;return N.cmp(this.m)>=0?P=N.isub(this.m):N.cmpn(0)<0&&(P=N.iadd(this.m)),P._forceRed(this)},G.prototype.invm=function(c){var m=this.imod(c._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(r,lu)}(fr)),fr.exports}var uu=Aa();const oo=Xn(uu);var cr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ao;function Ia(){return ao||(ao=1,function(r,t){var e=pi(),n=e.Buffer;function i(a,l){for(var d in a)l[d]=a[d]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(i(e,t),t.Buffer=s);function s(a,l,d){return n(a,l,d)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,l,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,l,d)},s.alloc=function(a,l,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var g=n(a);return l!==void 0?typeof d=="string"?g.fill(l,d):g.fill(l):g.fill(0),g},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(a)}}(cr,cr.exports)),cr.exports}var Es,co;function du(){if(co)return Es;co=1;var r=Ia().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),l=a.charCodeAt(0);if(n[l]!==255)throw new TypeError(a+" is ambiguous");n[l]=s}var d=e.length,g=e.charAt(0),x=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function C(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=r.from(k)),!r.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var S=0,F=0,L=0,I=k.length;L!==I&&k[L]===0;)L++,S++;for(var U=(I-L)*b+1>>>0,O=new Uint8Array(U);L!==I;){for(var D=k[L],J=0,K=U-1;(D!==0||J<F)&&K!==-1;K--,J++)D+=256*O[K]>>>0,O[K]=D%d>>>0,D=D/d>>>0;if(D!==0)throw new Error("Non-zero carry");F=J,L++}for(var $=U-F;$!==U&&O[$]===0;)$++;for(var _=g.repeat(S);$<U;++$)_+=e.charAt(O[$]);return _}function B(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return r.alloc(0);for(var S=0,F=0,L=0;k[S]===g;)F++,S++;for(var I=(k.length-S)*x+1>>>0,U=new Uint8Array(I);S<k.length;){var O=n[k.charCodeAt(S)];if(O===255)return;for(var D=0,J=I-1;(O!==0||D<L)&&J!==-1;J--,D++)O+=d*U[J]>>>0,U[J]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");L=D,S++}for(var K=I-L;K!==I&&U[K]===0;)K++;var $=r.allocUnsafe(F+(I-K));$.fill(0,0,F);for(var _=F;K!==I;)$[_++]=U[K++];return $}function M(k){var S=B(k);if(S)return S;throw new Error("Non-base"+d+" character")}return{encode:C,decodeUnsafe:B,decode:M}}return Es=t,Es}var Bs,lo;function hu(){if(lo)return Bs;lo=1;var r=du(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Bs=r(t),Bs}var fu=hu();const xt=Xn(fu);var Ae={},Ns,uo;function pu(){if(uo)return Ns;uo=1;var r=Ia().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),l=a.charCodeAt(0);if(n[l]!==255)throw new TypeError(a+" is ambiguous");n[l]=s}var d=e.length,g=e.charAt(0),x=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function C(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=r.from(k)),!r.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var S=0,F=0,L=0,I=k.length;L!==I&&k[L]===0;)L++,S++;for(var U=(I-L)*b+1>>>0,O=new Uint8Array(U);L!==I;){for(var D=k[L],J=0,K=U-1;(D!==0||J<F)&&K!==-1;K--,J++)D+=256*O[K]>>>0,O[K]=D%d>>>0,D=D/d>>>0;if(D!==0)throw new Error("Non-zero carry");F=J,L++}for(var $=U-F;$!==U&&O[$]===0;)$++;for(var _=g.repeat(S);$<U;++$)_+=e.charAt(O[$]);return _}function B(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return r.alloc(0);for(var S=0,F=0,L=0;k[S]===g;)F++,S++;for(var I=(k.length-S)*x+1>>>0,U=new Uint8Array(I);S<k.length;){var O=n[k.charCodeAt(S)];if(O===255)return;for(var D=0,J=I-1;(O!==0||D<L)&&J!==-1;J--,D++)O+=d*U[J]>>>0,U[J]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");L=D,S++}for(var K=I-L;K!==I&&U[K]===0;)K++;var $=r.allocUnsafe(F+(I-K));$.fill(0,0,F);for(var _=F;K!==I;)$[_++]=U[K++];return $}function M(k){var S=B(k);if(S)return S;throw new Error("Non-base"+d+" character")}return{encode:C,decodeUnsafe:B,decode:M}}return Ns=t,Ns}var js,ho;function mu(){if(ho)return js;ho=1;var r=pu(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return js=r(t),js}function Zt(r,t,e){return t<=r&&r<=e}function qr(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function gu(r){for(var t=String(r),e=t.length,n=0,i=[];n<e;){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===e-1)i.push(65533);else{var a=r.charCodeAt(n+1);if(56320<=a&&a<=57343){var l=s&1023,d=a&1023;i.push(65536+(l<<10)+d),n+=1}else i.push(65533)}n+=1}return i}function xu(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Nr=-1;function vi(r){this.tokens=[].slice.call(r)}vi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Nr},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var qn=-1;function As(r,t){if(r)throw TypeError("Decoder error");return t||65533}var jr="utf-8";function Ar(r,t){if(!(this instanceof Ar))return new Ar(r,t);if(r=r!==void 0?String(r).toLowerCase():jr,r!==jr)throw new Error("Encoding not supported. Only utf-8 is supported");t=qr(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Ar.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=qr(e),this._streaming||(this._decoder=new yu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var i=new vi(n),s=[],a;!i.endOfStream()&&(a=this._decoder.handler(i,i.read()),a!==qn);)a!==null&&(Array.isArray(a)?s.push.apply(s,a):s.push(a));if(!this._streaming){do{if(a=this._decoder.handler(i,i.read()),a===qn)break;a!==null&&(Array.isArray(a)?s.push.apply(s,a):s.push(a))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),xu(s)}};function Ir(r,t){if(!(this instanceof Ir))return new Ir(r,t);if(r=r!==void 0?String(r).toLowerCase():jr,r!==jr)throw new Error("Encoding not supported. Only utf-8 is supported");t=qr(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ir.prototype={encode:function(t,e){t=t?String(t):"",e=qr(e),this._streaming||(this._encoder=new bu(this._options)),this._streaming=!!e.stream;for(var n=[],i=new vi(gu(t)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==qn);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==qn;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function yu(r){var t=r.fatal,e=0,n=0,i=0,s=128,a=191;this.handler=function(l,d){if(d===Nr&&i!==0)return i=0,As(t);if(d===Nr)return qn;if(i===0){if(Zt(d,0,127))return d;if(Zt(d,194,223))i=1,e=d-192;else if(Zt(d,224,239))d===224&&(s=160),d===237&&(a=159),i=2,e=d-224;else if(Zt(d,240,244))d===240&&(s=144),d===244&&(a=143),i=3,e=d-240;else return As(t);return e=e<<6*i,null}if(!Zt(d,s,a))return e=i=n=0,s=128,a=191,l.prepend(d),As(t);if(s=128,a=191,n+=1,e+=d-128<<6*(i-n),n!==i)return null;var g=e;return e=i=n=0,g}}function bu(r){r.fatal,this.handler=function(t,e){if(e===Nr)return qn;if(Zt(e,0,127))return e;var n,i;Zt(e,128,2047)?(n=1,i=192):Zt(e,2048,65535)?(n=2,i=224):Zt(e,65536,1114111)&&(n=3,i=240);for(var s=[(e>>6*n)+i];n>0;){var a=e>>6*(n-1);s.push(128|a&63),n-=1}return s}}const wu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Ar,TextEncoder:Ir},Symbol.toStringTag,{value:"Module"})),vu=fi(wu);var fo;function Su(){if(fo)return Ae;fo=1;var r=Ae&&Ae.__createBinding||(Object.create?function($,_,W,G){G===void 0&&(G=W),Object.defineProperty($,G,{enumerable:!0,get:function(){return _[W]}})}:function($,_,W,G){G===void 0&&(G=W),$[G]=_[W]}),t=Ae&&Ae.__setModuleDefault||(Object.create?function($,_){Object.defineProperty($,"default",{enumerable:!0,value:_})}:function($,_){$.default=_}),e=Ae&&Ae.__decorate||function($,_,W,G){var E=arguments.length,c=E<3?_:G===null?G=Object.getOwnPropertyDescriptor(_,W):G,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate($,_,W,G);else for(var y=$.length-1;y>=0;y--)(m=$[y])&&(c=(E<3?m(c):E>3?m(_,W,c):m(_,W))||c);return E>3&&c&&Object.defineProperty(_,W,c),c},n=Ae&&Ae.__importStar||function($){if($&&$.__esModule)return $;var _={};if($!=null)for(var W in $)W!=="default"&&Object.hasOwnProperty.call($,W)&&r(_,$,W);return t(_,$),_},i=Ae&&Ae.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.deserializeUnchecked=Ae.deserialize=Ae.serialize=Ae.BinaryReader=Ae.BinaryWriter=Ae.BorshError=Ae.baseDecode=Ae.baseEncode=void 0;const s=i(Aa()),a=i(mu()),l=n(vu),d=typeof TextDecoder!="function"?l.TextDecoder:TextDecoder,g=new d("utf-8",{fatal:!0});function x($){return typeof $=="string"&&($=Buffer.from($,"utf8")),a.default.encode(Buffer.from($))}Ae.baseEncode=x;function b($){return Buffer.from(a.default.decode($))}Ae.baseDecode=b;const C=1024;class B extends Error{constructor(_){super(_),this.fieldPath=[],this.originalMessage=_}addToFieldPath(_){this.fieldPath.splice(0,0,_),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ae.BorshError=B;class M{constructor(){this.buf=Buffer.alloc(C),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(C)]))}writeU8(_){this.maybeResize(),this.buf.writeUInt8(_,this.length),this.length+=1}writeU16(_){this.maybeResize(),this.buf.writeUInt16LE(_,this.length),this.length+=2}writeU32(_){this.maybeResize(),this.buf.writeUInt32LE(_,this.length),this.length+=4}writeU64(_){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(_).toArray("le",8)))}writeU128(_){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(_).toArray("le",16)))}writeU256(_){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(_).toArray("le",32)))}writeU512(_){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(_).toArray("le",64)))}writeBuffer(_){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),_,Buffer.alloc(C)]),this.length+=_.length}writeString(_){this.maybeResize();const W=Buffer.from(_,"utf8");this.writeU32(W.length),this.writeBuffer(W)}writeFixedArray(_){this.writeBuffer(Buffer.from(_))}writeArray(_,W){this.maybeResize(),this.writeU32(_.length);for(const G of _)this.maybeResize(),W(G)}toArray(){return this.buf.subarray(0,this.length)}}Ae.BinaryWriter=M;function k($,_,W){const G=W.value;W.value=function(...E){try{return G.apply(this,E)}catch(c){if(c instanceof RangeError){const m=c.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(m)>=0)throw new B("Reached the end of buffer when deserializing")}throw c}}}class S{constructor(_){this.buf=_,this.offset=0}readU8(){const _=this.buf.readUInt8(this.offset);return this.offset+=1,_}readU16(){const _=this.buf.readUInt16LE(this.offset);return this.offset+=2,_}readU32(){const _=this.buf.readUInt32LE(this.offset);return this.offset+=4,_}readU64(){const _=this.readBuffer(8);return new s.default(_,"le")}readU128(){const _=this.readBuffer(16);return new s.default(_,"le")}readU256(){const _=this.readBuffer(32);return new s.default(_,"le")}readU512(){const _=this.readBuffer(64);return new s.default(_,"le")}readBuffer(_){if(this.offset+_>this.buf.length)throw new B(`Expected buffer length ${_} isn't within bounds`);const W=this.buf.slice(this.offset,this.offset+_);return this.offset+=_,W}readString(){const _=this.readU32(),W=this.readBuffer(_);try{return g.decode(W)}catch(G){throw new B(`Error decoding UTF-8 string: ${G}`)}}readFixedArray(_){return new Uint8Array(this.readBuffer(_))}readArray(_){const W=this.readU32(),G=Array();for(let E=0;E<W;++E)G.push(_());return G}}e([k],S.prototype,"readU8",null),e([k],S.prototype,"readU16",null),e([k],S.prototype,"readU32",null),e([k],S.prototype,"readU64",null),e([k],S.prototype,"readU128",null),e([k],S.prototype,"readU256",null),e([k],S.prototype,"readU512",null),e([k],S.prototype,"readString",null),e([k],S.prototype,"readFixedArray",null),e([k],S.prototype,"readArray",null),Ae.BinaryReader=S;function F($){return $.charAt(0).toUpperCase()+$.slice(1)}function L($,_,W,G,E){try{if(typeof G=="string")E[`write${F(G)}`](W);else if(G instanceof Array)if(typeof G[0]=="number"){if(W.length!==G[0])throw new B(`Expecting byte array of length ${G[0]}, but got ${W.length} bytes`);E.writeFixedArray(W)}else if(G.length===2&&typeof G[1]=="number"){if(W.length!==G[1])throw new B(`Expecting byte array of length ${G[1]}, but got ${W.length} bytes`);for(let c=0;c<G[1];c++)L($,null,W[c],G[0],E)}else E.writeArray(W,c=>{L($,_,c,G[0],E)});else if(G.kind!==void 0)switch(G.kind){case"option":{W==null?E.writeU8(0):(E.writeU8(1),L($,_,W,G.type,E));break}case"map":{E.writeU32(W.size),W.forEach((c,m)=>{L($,_,m,G.key,E),L($,_,c,G.value,E)});break}default:throw new B(`FieldType ${G} unrecognized`)}else I($,W,E)}catch(c){throw c instanceof B&&c.addToFieldPath(_),c}}function I($,_,W){if(typeof _.borshSerialize=="function"){_.borshSerialize(W);return}const G=$.get(_.constructor);if(!G)throw new B(`Class ${_.constructor.name} is missing in schema`);if(G.kind==="struct")G.fields.map(([E,c])=>{L($,E,_[E],c,W)});else if(G.kind==="enum"){const E=_[G.field];for(let c=0;c<G.values.length;++c){const[m,y]=G.values[c];if(m===E){W.writeU8(c),L($,m,_[m],y,W);break}}}else throw new B(`Unexpected schema kind: ${G.kind} for ${_.constructor.name}`)}function U($,_,W=M){const G=new W;return I($,_,G),G.toArray()}Ae.serialize=U;function O($,_,W,G){try{if(typeof W=="string")return G[`read${F(W)}`]();if(W instanceof Array){if(typeof W[0]=="number")return G.readFixedArray(W[0]);if(typeof W[1]=="number"){const E=[];for(let c=0;c<W[1];c++)E.push(O($,null,W[0],G));return E}else return G.readArray(()=>O($,_,W[0],G))}if(W.kind==="option")return G.readU8()?O($,_,W.type,G):void 0;if(W.kind==="map"){let E=new Map;const c=G.readU32();for(let m=0;m<c;m++){const y=O($,_,W.key,G),j=O($,_,W.value,G);E.set(y,j)}return E}return D($,W,G)}catch(E){throw E instanceof B&&E.addToFieldPath(_),E}}function D($,_,W){if(typeof _.borshDeserialize=="function")return _.borshDeserialize(W);const G=$.get(_);if(!G)throw new B(`Class ${_.name} is missing in schema`);if(G.kind==="struct"){const E={};for(const[c,m]of $.get(_).fields)E[c]=O($,c,m,W);return new _(E)}if(G.kind==="enum"){const E=W.readU8();if(E>=G.values.length)throw new B(`Enum index: ${E} is out of range`);const[c,m]=G.values[E],y=O($,c,m,W);return new _({[c]:y})}throw new B(`Unexpected schema kind: ${G.kind} for ${_.constructor.name}`)}function J($,_,W,G=S){const E=new G(W),c=D($,_,E);if(E.offset<W.length)throw new B(`Unexpected ${W.length-E.offset} bytes after deserialized data`);return c}Ae.deserialize=J;function K($,_,W,G=S){const E=new G(W);return D($,_,E)}return Ae.deserializeUnchecked=K,Ae}var Is=Su(),Q={},po;function ku(){if(po)return Q;po=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.s16=Q.s8=Q.nu64be=Q.u48be=Q.u40be=Q.u32be=Q.u24be=Q.u16be=Q.nu64=Q.u48=Q.u40=Q.u32=Q.u24=Q.u16=Q.u8=Q.offset=Q.greedy=Q.Constant=Q.UTF8=Q.CString=Q.Blob=Q.Boolean=Q.BitField=Q.BitStructure=Q.VariantLayout=Q.Union=Q.UnionLayoutDiscriminator=Q.UnionDiscriminator=Q.Structure=Q.Sequence=Q.DoubleBE=Q.Double=Q.FloatBE=Q.Float=Q.NearInt64BE=Q.NearInt64=Q.NearUInt64BE=Q.NearUInt64=Q.IntBE=Q.Int=Q.UIntBE=Q.UInt=Q.OffsetLayout=Q.GreedyCount=Q.ExternalLayout=Q.bindConstructorLayout=Q.nameWithProperty=Q.Layout=Q.uint8ArrayToBuffer=Q.checkUint8Array=void 0,Q.constant=Q.utf8=Q.cstr=Q.blob=Q.unionLayoutDiscriminator=Q.union=Q.seq=Q.bits=Q.struct=Q.f64be=Q.f64=Q.f32be=Q.f32=Q.ns64be=Q.s48be=Q.s40be=Q.s32be=Q.s24be=Q.s16be=Q.ns64=Q.s48=Q.s40=Q.s32=Q.s24=void 0;const r=pi();function t(u){if(!(u instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Q.checkUint8Array=t;function e(u){return t(u),r.Buffer.from(u.buffer,u.byteOffset,u.length)}Q.uint8ArrayToBuffer=e;let n=class{constructor(h,v){if(!Number.isInteger(h))throw new TypeError("span must be an integer");this.span=h,this.property=v}makeDestinationObject(){return{}}getSpan(h,v){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(h){const v=Object.create(this.constructor.prototype);return Object.assign(v,this),v.property=h,v}fromArray(h){}};Q.Layout=n;function i(u,h){return h.property?u+"["+h.property+"]":u}Q.nameWithProperty=i;function s(u,h){if(typeof u!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(u,"layout_"))throw new Error("Class is already bound to a layout");if(!(h&&h instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(h,"boundConstructor_"))throw new Error("layout is already bound to a constructor");u.layout_=h,h.boundConstructor_=u,h.makeDestinationObject=()=>new u,Object.defineProperty(u.prototype,"encode",{value(v,R){return h.encode(this,v,R)},writable:!0}),Object.defineProperty(u,"decode",{value(v,R){return h.decode(v,R)},writable:!0})}Q.bindConstructorLayout=s;class a extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Q.ExternalLayout=a;class l extends a{constructor(h=1,v){if(!Number.isInteger(h)||0>=h)throw new TypeError("elementSpan must be a (positive) integer");super(-1,v),this.elementSpan=h}isCount(){return!0}decode(h,v=0){t(h);const R=h.length-v;return Math.floor(R/this.elementSpan)}encode(h,v,R){return 0}}Q.GreedyCount=l;class d extends a{constructor(h,v=0,R){if(!(h instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(v))throw new TypeError("offset must be integer or undefined");super(h.span,R||h.property),this.layout=h,this.offset=v}isCount(){return this.layout instanceof g||this.layout instanceof x}decode(h,v=0){return this.layout.decode(h,v+this.offset)}encode(h,v,R=0){return this.layout.encode(h,v,R+this.offset)}}Q.OffsetLayout=d;class g extends n{constructor(h,v){if(super(h,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,v=0){return e(h).readUIntLE(v,this.span)}encode(h,v,R=0){return e(v).writeUIntLE(h,R,this.span),this.span}}Q.UInt=g;class x extends n{constructor(h,v){if(super(h,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,v=0){return e(h).readUIntBE(v,this.span)}encode(h,v,R=0){return e(v).writeUIntBE(h,R,this.span),this.span}}Q.UIntBE=x;class b extends n{constructor(h,v){if(super(h,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,v=0){return e(h).readIntLE(v,this.span)}encode(h,v,R=0){return e(v).writeIntLE(h,R,this.span),this.span}}Q.Int=b;class C extends n{constructor(h,v){if(super(h,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,v=0){return e(h).readIntBE(v,this.span)}encode(h,v,R=0){return e(v).writeIntBE(h,R,this.span),this.span}}Q.IntBE=C;const B=Math.pow(2,32);function M(u){const h=Math.floor(u/B),v=u-h*B;return{hi32:h,lo32:v}}function k(u,h){return u*B+h}class S extends n{constructor(h){super(8,h)}decode(h,v=0){const R=e(h),V=R.readUInt32LE(v),te=R.readUInt32LE(v+4);return k(te,V)}encode(h,v,R=0){const V=M(h),te=e(v);return te.writeUInt32LE(V.lo32,R),te.writeUInt32LE(V.hi32,R+4),8}}Q.NearUInt64=S;class F extends n{constructor(h){super(8,h)}decode(h,v=0){const R=e(h),V=R.readUInt32BE(v),te=R.readUInt32BE(v+4);return k(V,te)}encode(h,v,R=0){const V=M(h),te=e(v);return te.writeUInt32BE(V.hi32,R),te.writeUInt32BE(V.lo32,R+4),8}}Q.NearUInt64BE=F;class L extends n{constructor(h){super(8,h)}decode(h,v=0){const R=e(h),V=R.readUInt32LE(v),te=R.readInt32LE(v+4);return k(te,V)}encode(h,v,R=0){const V=M(h),te=e(v);return te.writeUInt32LE(V.lo32,R),te.writeInt32LE(V.hi32,R+4),8}}Q.NearInt64=L;class I extends n{constructor(h){super(8,h)}decode(h,v=0){const R=e(h),V=R.readInt32BE(v),te=R.readUInt32BE(v+4);return k(V,te)}encode(h,v,R=0){const V=M(h),te=e(v);return te.writeInt32BE(V.hi32,R),te.writeUInt32BE(V.lo32,R+4),8}}Q.NearInt64BE=I;class U extends n{constructor(h){super(4,h)}decode(h,v=0){return e(h).readFloatLE(v)}encode(h,v,R=0){return e(v).writeFloatLE(h,R),4}}Q.Float=U;class O extends n{constructor(h){super(4,h)}decode(h,v=0){return e(h).readFloatBE(v)}encode(h,v,R=0){return e(v).writeFloatBE(h,R),4}}Q.FloatBE=O;class D extends n{constructor(h){super(8,h)}decode(h,v=0){return e(h).readDoubleLE(v)}encode(h,v,R=0){return e(v).writeDoubleLE(h,R),8}}Q.Double=D;class J extends n{constructor(h){super(8,h)}decode(h,v=0){return e(h).readDoubleBE(v)}encode(h,v,R=0){return e(v).writeDoubleBE(h,R),8}}Q.DoubleBE=J;class K extends n{constructor(h,v,R){if(!(h instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(v instanceof a&&v.isCount()||Number.isInteger(v)&&0<=v))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let V=-1;!(v instanceof a)&&0<h.span&&(V=v*h.span),super(V,R),this.elementLayout=h,this.count=v}getSpan(h,v=0){if(0<=this.span)return this.span;let R=0,V=this.count;if(V instanceof a&&(V=V.decode(h,v)),0<this.elementLayout.span)R=V*this.elementLayout.span;else{let te=0;for(;te<V;)R+=this.elementLayout.getSpan(h,v+R),++te}return R}decode(h,v=0){const R=[];let V=0,te=this.count;for(te instanceof a&&(te=te.decode(h,v));V<te;)R.push(this.elementLayout.decode(h,v)),v+=this.elementLayout.getSpan(h,v),V+=1;return R}encode(h,v,R=0){const V=this.elementLayout,te=h.reduce((se,he)=>se+V.encode(he,v,R+se),0);return this.count instanceof a&&this.count.encode(h.length,v,R),te}}Q.Sequence=K;class $ extends n{constructor(h,v,R){if(!(Array.isArray(h)&&h.reduce((te,se)=>te&&se instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof v=="boolean"&&R===void 0&&(R=v,v=void 0);for(const te of h)if(0>te.span&&te.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let V=-1;try{V=h.reduce((te,se)=>te+se.getSpan(),0)}catch{}super(V,v),this.fields=h,this.decodePrefixes=!!R}getSpan(h,v=0){if(0<=this.span)return this.span;let R=0;try{R=this.fields.reduce((V,te)=>{const se=te.getSpan(h,v);return v+=se,V+se},0)}catch{throw new RangeError("indeterminate span")}return R}decode(h,v=0){t(h);const R=this.makeDestinationObject();for(const V of this.fields)if(V.property!==void 0&&(R[V.property]=V.decode(h,v)),v+=V.getSpan(h,v),this.decodePrefixes&&h.length===v)break;return R}encode(h,v,R=0){const V=R;let te=0,se=0;for(const he of this.fields){let je=he.span;if(se=0<je?je:0,he.property!==void 0){const ne=h[he.property];ne!==void 0&&(se=he.encode(ne,v,R),0>je&&(je=he.getSpan(v,R)))}te=R,R+=je}return te+se-V}fromArray(h){const v=this.makeDestinationObject();for(const R of this.fields)R.property!==void 0&&0<h.length&&(v[R.property]=h.shift());return v}layoutFor(h){if(typeof h!="string")throw new TypeError("property must be string");for(const v of this.fields)if(v.property===h)return v}offsetOf(h){if(typeof h!="string")throw new TypeError("property must be string");let v=0;for(const R of this.fields){if(R.property===h)return v;0>R.span?v=-1:0<=v&&(v+=R.span)}}}Q.Structure=$;class _{constructor(h){this.property=h}decode(h,v){throw new Error("UnionDiscriminator is abstract")}encode(h,v,R){throw new Error("UnionDiscriminator is abstract")}}Q.UnionDiscriminator=_;class W extends _{constructor(h,v){if(!(h instanceof a&&h.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(v||h.property||"variant"),this.layout=h}decode(h,v){return this.layout.decode(h,v)}encode(h,v,R){return this.layout.encode(h,v,R)}}Q.UnionLayoutDiscriminator=W;class G extends n{constructor(h,v,R){let V;if(h instanceof g||h instanceof x)V=new W(new d(h));else if(h instanceof a&&h.isCount())V=new W(h);else if(h instanceof _)V=h;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(v===void 0&&(v=null),!(v===null||v instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(v!==null){if(0>v.span)throw new Error("defaultLayout must have constant span");v.property===void 0&&(v=v.replicate("content"))}let te=-1;v&&(te=v.span,0<=te&&(h instanceof g||h instanceof x)&&(te+=V.layout.span)),super(te,R),this.discriminator=V,this.usesPrefixDiscriminator=h instanceof g||h instanceof x,this.defaultLayout=v,this.registry={};let se=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(he){return se(he)},this.configGetSourceVariant=function(he){se=he.bind(this)}}getSpan(h,v=0){if(0<=this.span)return this.span;const R=this.getVariant(h,v);if(!R)throw new Error("unable to determine span for unrecognized variant");return R.getSpan(h,v)}defaultGetSourceVariant(h){if(Object.prototype.hasOwnProperty.call(h,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(h,this.defaultLayout.property))return;const v=this.registry[h[this.discriminator.property]];if(v&&(!v.layout||v.property&&Object.prototype.hasOwnProperty.call(h,v.property)))return v}else for(const v in this.registry){const R=this.registry[v];if(R.property&&Object.prototype.hasOwnProperty.call(h,R.property))return R}throw new Error("unable to infer src variant")}decode(h,v=0){let R;const V=this.discriminator,te=V.decode(h,v),se=this.registry[te];if(se===void 0){const he=this.defaultLayout;let je=0;this.usesPrefixDiscriminator&&(je=V.layout.span),R=this.makeDestinationObject(),R[V.property]=te,R[he.property]=he.decode(h,v+je)}else R=se.decode(h,v);return R}encode(h,v,R=0){const V=this.getSourceVariant(h);if(V===void 0){const te=this.discriminator,se=this.defaultLayout;let he=0;return this.usesPrefixDiscriminator&&(he=te.layout.span),te.encode(h[te.property],v,R),he+se.encode(h[se.property],v,R+he)}return V.encode(h,v,R)}addVariant(h,v,R){const V=new E(this,h,v,R);return this.registry[h]=V,V}getVariant(h,v=0){let R;return h instanceof Uint8Array?R=this.discriminator.decode(h,v):R=h,this.registry[R]}}Q.Union=G;class E extends n{constructor(h,v,R,V){if(!(h instanceof G))throw new TypeError("union must be a Union");if(!Number.isInteger(v)||0>v)throw new TypeError("variant must be a (non-negative) integer");if(typeof R=="string"&&V===void 0&&(V=R,R=null),R){if(!(R instanceof n))throw new TypeError("layout must be a Layout");if(h.defaultLayout!==null&&0<=R.span&&R.span>h.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof V!="string")throw new TypeError("variant must have a String property")}let te=h.span;0>h.span&&(te=R?R.span:0,0<=te&&h.usesPrefixDiscriminator&&(te+=h.discriminator.layout.span)),super(te,V),this.union=h,this.variant=v,this.layout=R||null}getSpan(h,v=0){if(0<=this.span)return this.span;let R=0;this.union.usesPrefixDiscriminator&&(R=this.union.discriminator.layout.span);let V=0;return this.layout&&(V=this.layout.getSpan(h,v+R)),R+V}decode(h,v=0){const R=this.makeDestinationObject();if(this!==this.union.getVariant(h,v))throw new Error("variant mismatch");let V=0;return this.union.usesPrefixDiscriminator&&(V=this.union.discriminator.layout.span),this.layout?R[this.property]=this.layout.decode(h,v+V):this.property?R[this.property]=!0:this.union.usesPrefixDiscriminator&&(R[this.union.discriminator.property]=this.variant),R}encode(h,v,R=0){let V=0;if(this.union.usesPrefixDiscriminator&&(V=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(h,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,v,R);let te=V;if(this.layout&&(this.layout.encode(h[this.property],v,R+V),te+=this.layout.getSpan(v,R+V),0<=this.union.span&&te>this.union.span))throw new Error("encoded variant overruns containing union");return te}fromArray(h){if(this.layout)return this.layout.fromArray(h)}}Q.VariantLayout=E;function c(u){return 0>u&&(u+=4294967296),u}class m extends n{constructor(h,v,R){if(!(h instanceof g||h instanceof x))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof v=="string"&&R===void 0&&(R=v,v=!1),4<h.span)throw new RangeError("word cannot exceed 32 bits");super(h.span,R),this.word=h,this.msb=!!v,this.fields=[];let V=0;this._packedSetValue=function(te){return V=c(te),this},this._packedGetValue=function(){return V}}decode(h,v=0){const R=this.makeDestinationObject(),V=this.word.decode(h,v);this._packedSetValue(V);for(const te of this.fields)te.property!==void 0&&(R[te.property]=te.decode(h));return R}encode(h,v,R=0){const V=this.word.decode(v,R);this._packedSetValue(V);for(const te of this.fields)if(te.property!==void 0){const se=h[te.property];se!==void 0&&te.encode(se)}return this.word.encode(this._packedGetValue(),v,R)}addField(h,v){const R=new y(this,h,v);return this.fields.push(R),R}addBoolean(h){const v=new j(this,h);return this.fields.push(v),v}fieldFor(h){if(typeof h!="string")throw new TypeError("property must be string");for(const v of this.fields)if(v.property===h)return v}}Q.BitStructure=m;class y{constructor(h,v,R){if(!(h instanceof m))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(v)||0>=v)throw new TypeError("bits must be positive integer");const V=8*h.span,te=h.fields.reduce((se,he)=>se+he.bits,0);if(v+te>V)throw new Error("bits too long for span remainder ("+(V-te)+" of "+V+" remain)");this.container=h,this.bits=v,this.valueMask=(1<<v)-1,v===32&&(this.valueMask=4294967295),this.start=te,this.container.msb&&(this.start=V-te-v),this.wordMask=c(this.valueMask<<this.start),this.property=R}decode(h,v){const R=this.container._packedGetValue();return c(R&this.wordMask)>>>this.start}encode(h){if(typeof h!="number"||!Number.isInteger(h)||h!==c(h&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const v=this.container._packedGetValue(),R=c(h<<this.start);this.container._packedSetValue(c(v&~this.wordMask)|R)}}Q.BitField=y;class j extends y{constructor(h,v){super(h,1,v)}decode(h,v){return!!super.decode(h,v)}encode(h){typeof h=="boolean"&&(h=+h),super.encode(h)}}Q.Boolean=j;class N extends n{constructor(h,v){if(!(h instanceof a&&h.isCount()||Number.isInteger(h)&&0<=h))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let R=-1;h instanceof a||(R=h),super(R,v),this.length=h}getSpan(h,v){let R=this.span;return 0>R&&(R=this.length.decode(h,v)),R}decode(h,v=0){let R=this.span;return 0>R&&(R=this.length.decode(h,v)),e(h).slice(v,v+R)}encode(h,v,R){let V=this.length;if(this.length instanceof a&&(V=h.length),!(h instanceof Uint8Array&&V===h.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+V+") Uint8Array as src");if(R+V>v.length)throw new RangeError("encoding overruns Uint8Array");const te=e(h);return e(v).write(te.toString("hex"),R,V,"hex"),this.length instanceof a&&this.length.encode(V,v,R),V}}Q.Blob=N;class P extends n{constructor(h){super(-1,h)}getSpan(h,v=0){t(h);let R=v;for(;R<h.length&&h[R]!==0;)R+=1;return 1+R-v}decode(h,v=0){const R=this.getSpan(h,v);return e(h).slice(v,v+R-1).toString("utf-8")}encode(h,v,R=0){typeof h!="string"&&(h=String(h));const V=r.Buffer.from(h,"utf8"),te=V.length;if(R+te>v.length)throw new RangeError("encoding overruns Buffer");const se=e(v);return V.copy(se,R),se[R+te]=0,te+1}}Q.CString=P;class q extends n{constructor(h,v){if(typeof h=="string"&&v===void 0&&(v=h,h=void 0),h===void 0)h=-1;else if(!Number.isInteger(h))throw new TypeError("maxSpan must be an integer");super(-1,v),this.maxSpan=h}getSpan(h,v=0){return t(h),h.length-v}decode(h,v=0){const R=this.getSpan(h,v);if(0<=this.maxSpan&&this.maxSpan<R)throw new RangeError("text length exceeds maxSpan");return e(h).slice(v,v+R).toString("utf-8")}encode(h,v,R=0){typeof h!="string"&&(h=String(h));const V=r.Buffer.from(h,"utf8"),te=V.length;if(0<=this.maxSpan&&this.maxSpan<te)throw new RangeError("text length exceeds maxSpan");if(R+te>v.length)throw new RangeError("encoding overruns Buffer");return V.copy(e(v),R),te}}Q.UTF8=q;class A extends n{constructor(h,v){super(0,v),this.value=h}decode(h,v){return this.value}encode(h,v,R){return 0}}return Q.Constant=A,Q.greedy=(u,h)=>new l(u,h),Q.offset=(u,h,v)=>new d(u,h,v),Q.u8=u=>new g(1,u),Q.u16=u=>new g(2,u),Q.u24=u=>new g(3,u),Q.u32=u=>new g(4,u),Q.u40=u=>new g(5,u),Q.u48=u=>new g(6,u),Q.nu64=u=>new S(u),Q.u16be=u=>new x(2,u),Q.u24be=u=>new x(3,u),Q.u32be=u=>new x(4,u),Q.u40be=u=>new x(5,u),Q.u48be=u=>new x(6,u),Q.nu64be=u=>new F(u),Q.s8=u=>new b(1,u),Q.s16=u=>new b(2,u),Q.s24=u=>new b(3,u),Q.s32=u=>new b(4,u),Q.s40=u=>new b(5,u),Q.s48=u=>new b(6,u),Q.ns64=u=>new L(u),Q.s16be=u=>new C(2,u),Q.s24be=u=>new C(3,u),Q.s32be=u=>new C(4,u),Q.s40be=u=>new C(5,u),Q.s48be=u=>new C(6,u),Q.ns64be=u=>new I(u),Q.f32=u=>new U(u),Q.f32be=u=>new O(u),Q.f64=u=>new D(u),Q.f64be=u=>new J(u),Q.struct=(u,h,v)=>new $(u,h,v),Q.bits=(u,h,v)=>new m(u,h,v),Q.seq=(u,h,v)=>new K(u,h,v),Q.union=(u,h,v)=>new G(u,h,v),Q.unionLayoutDiscriminator=(u,h)=>new W(u,h),Q.blob=(u,h)=>new N(u,h),Q.cstr=u=>new P(u),Q.utf8=(u,h)=>new q(u,h),Q.constant=(u,h)=>new A(u,h),Q}var z=ku(),Eu=8078e3,Bu=8078001,Nu=8078004,ju=8078005,Au=8078006,Iu=8078011;function Ca(r){return Array.isArray(r)?"%5B"+r.map(Ca).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function Cu([r,t]){return`${r}=${Ca(t)}`}function _u(r){const t=Object.entries(r).map(Cu).join("&");return btoa(t)}function Mu(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${_u(t)}'`),`${e}\``}}var Rn=class extends Error{cause=this.cause;context;constructor(...[r,t]){let e,n;if(t){const{cause:s,...a}=t;s&&(n={cause:s}),Object.keys(a).length>0&&(e=a)}const i=Mu(r,e);super(i,n),this.context={__code:r,...e},this.name="SolanaError"}};function Tu(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function Ru(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(Tu(t,r));return r.write(t,e,0),e}})}function Lu(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function An(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function Pu(r,t){if(An(r)!==An(t))throw new Rn(Nu);if(An(r)&&An(t)&&r.fixedSize!==t.fixedSize)throw new Rn(ju,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!An(r)&&!An(t)&&r.maxSize!==t.maxSize)throw new Rn(Au,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function Ou(r,t,e=0){if(t.length-e<=0)throw new Rn(Eu,{codecDescription:r})}function Fu(r,t,e,n=0){const i=e.length-n;if(i<t)throw new Rn(Bu,{bytesLength:i,codecDescription:r,expected:t})}function Uu(r,t,e,n){if(n<t||n>e)throw new Rn(Iu,{codecDescription:r,max:e,min:t,value:n})}function _a(r){return r?.endian!==1}function qu(r){return Ru({fixedSize:r.size,write(t,e,n){r.range&&Uu(r.name,r.range[0],r.range[1],t);const i=new ArrayBuffer(r.size);return r.set(new DataView(i),t,_a(r.config)),e.set(new Uint8Array(i),n),n+r.size}})}function Du(r){return Lu({fixedSize:r.size,read(t,e=0){Ou(r.name,t,e),Fu(r.name,r.size,t,e);const n=new DataView(zu(t,e,r.size));return[r.get(n,_a(r.config)),e+r.size]}})}function zu(r,t,e){const n=r.byteOffset+(t??0),i=e??r.byteLength;return r.buffer.slice(n,n+i)}var $u=(r={})=>qu({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),Ku=(r={})=>Du({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Wu=(r={})=>Pu($u(r),Ku(r));class Hu extends TypeError{constructor(t,e){let n;const{message:i,explanation:s,...a}=t,{path:l}=t,d=l.length===0?i:`At path: ${l.join(".")} -- ${i}`;super(s??d),s!=null&&(this.cause=d),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function Vu(r){return tr(r)&&typeof r[Symbol.iterator]=="function"}function tr(r){return typeof r=="object"&&r!=null}function Cr(r){return tr(r)&&!Array.isArray(r)}function Ut(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Gu(r){const{done:t,value:e}=r.next();return t?void 0:e}function Zu(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=t,{type:a}=e,{refinement:l,message:d=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${Ut(n)}\``}=r;return{value:n,type:a,refinement:l,key:i[i.length-1],path:i,branch:s,...r,message:d}}function*mo(r,t,e,n){Vu(r)||(r=[r]);for(const i of r){const s=Zu(i,t,e,n);s&&(yield s)}}function*Si(r,t,e={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=e,l={path:n,branch:i,mask:a};s&&(r=t.coercer(r,l));let d="valid";for(const g of t.validator(r,l))g.explanation=e.message,d="not_valid",yield[g,void 0];for(let[g,x,b]of t.entries(r,l)){const C=Si(x,b,{path:g===void 0?n:[...n,g],branch:g===void 0?i:[...i,x],coerce:s,mask:a,message:e.message});for(const B of C)B[0]?(d=B[0].refinement!=null?"not_refined":"not_valid",yield[B[0],void 0]):s&&(x=B[1],g===void 0?r=x:r instanceof Map?r.set(g,x):r instanceof Set?r.add(x):tr(r)&&(x!==void 0||g in r)&&(r[g]=x))}if(d!=="not_valid")for(const g of t.refiner(r,l))g.explanation=e.message,d="not_refined",yield[g,void 0];d==="valid"&&(yield[void 0,r])}let Wt=class{constructor(t){const{type:e,schema:n,validator:i,refiner:s,coercer:a=d=>d,entries:l=function*(){}}=t;this.type=e,this.schema=n,this.entries=l,this.coercer=a,i?this.validator=(d,g)=>{const x=i(d,g);return mo(x,g,this,d)}:this.validator=()=>[],s?this.refiner=(d,g)=>{const x=s(d,g);return mo(x,g,this,d)}:this.refiner=()=>[]}assert(t,e){return Yu(t,this,e)}create(t,e){return ae(t,this,e)}is(t){return Ma(t,this)}mask(t,e){return Ju(t,this,e)}validate(t,e={}){return nr(t,this,e)}};function Yu(r,t,e){const n=nr(r,t,{message:e});if(n[0])throw n[0]}function ae(r,t,e){const n=nr(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function Ju(r,t,e){const n=nr(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function Ma(r,t){return!nr(r,t)[0]}function nr(r,t,e={}){const n=Si(r,t,e),i=Gu(n);return i[0]?[new Hu(i[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,i[1]]}function En(r,t){return new Wt({type:r,schema:null,validator:t})}function Xu(){return En("any",()=>!0)}function ce(r){return new Wt({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ut(t)}`}})}function Kt(){return En("boolean",r=>typeof r=="boolean")}function ki(r){return En("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${Ut(t)}`)}function Ue(r){const t=Ut(r),e=typeof r;return new Wt({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${Ut(n)}`}})}function Qu(){return En("never",()=>!1)}function ue(r){return new Wt({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function X(){return En("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Ut(r)}`)}function ge(r){return new Wt({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Ta(r,t){return new Wt({type:"record",schema:null,*entries(e){if(tr(e))for(const n in e){const i=e[n];yield[n,n,r],yield[n,i,t]}},validator(e){return Cr(e)||`Expected an object, but received: ${Ut(e)}`},coercer(e){return Cr(e)?{...e}:e}})}function ie(){return En("string",r=>typeof r=="string"||`Expected a string, but received: ${Ut(r)}`)}function Ei(r){const t=Qu();return new Wt({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let i=0;i<n;i++)yield[i,e[i],r[i]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ut(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function re(r){const t=Object.keys(r);return new Wt({type:"type",schema:r,*entries(e){if(tr(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return Cr(e)||`Expected an object, but received: ${Ut(e)}`},coercer(e){return Cr(e)?{...e}:e}})}function Bt(r){const t=r.map(e=>e.type).join(" | ");return new Wt({type:"union",schema:null,coercer(e,n){for(const i of r){const[s,a]=i.validate(e,{coerce:!0,mask:n.mask});if(!s)return a}return e},validator(e,n){const i=[];for(const s of r){const[...a]=Si(e,s,n),[l]=a;if(l[0])for(const[d]of a)d&&i.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ut(e)}`,...i]}})}function $n(){return En("unknown",()=>!0)}function rr(r,t,e){return new Wt({...r,coercer:(n,i)=>Ma(n,t)?r.coercer(e(n,i),i):r.coercer(n,i)})}var lr,ed=new Uint8Array(16);function Ra(){if(!lr&&(lr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!lr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lr(ed)}const td=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dr(r){return typeof r=="string"&&td.test(r)}var mt=[];for(var Cs=0;Cs<256;++Cs)mt.push((Cs+256).toString(16).substr(1));function zr(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(mt[r[t+0]]+mt[r[t+1]]+mt[r[t+2]]+mt[r[t+3]]+"-"+mt[r[t+4]]+mt[r[t+5]]+"-"+mt[r[t+6]]+mt[r[t+7]]+"-"+mt[r[t+8]]+mt[r[t+9]]+"-"+mt[r[t+10]]+mt[r[t+11]]+mt[r[t+12]]+mt[r[t+13]]+mt[r[t+14]]+mt[r[t+15]]).toLowerCase();if(!Dr(e))throw TypeError("Stringified UUID is invalid");return e}var go,_s,Ms=0,Ts=0;function nd(r,t,e){var n=t&&e||0,i=t||new Array(16);r=r||{};var s=r.node||go,a=r.clockseq!==void 0?r.clockseq:_s;if(s==null||a==null){var l=r.random||(r.rng||Ra)();s==null&&(s=go=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),a==null&&(a=_s=(l[6]<<8|l[7])&16383)}var d=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:Ts+1,x=d-Ms+(g-Ts)/1e4;if(x<0&&r.clockseq===void 0&&(a=a+1&16383),(x<0||d>Ms)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ms=d,Ts=g,_s=a,d+=122192928e5;var b=((d&268435455)*1e4+g)%4294967296;i[n++]=b>>>24&255,i[n++]=b>>>16&255,i[n++]=b>>>8&255,i[n++]=b&255;var C=d/4294967296*1e4&268435455;i[n++]=C>>>8&255,i[n++]=C&255,i[n++]=C>>>24&15|16,i[n++]=C>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(var B=0;B<6;++B)i[n+B]=s[B];return t||zr(i)}function La(r){if(!Dr(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function rd(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var sd="6ba7b810-9dad-11d1-80b4-00c04fd430c8",id="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Pa(r,t,e){function n(i,s,a,l){if(typeof i=="string"&&(i=rd(i)),typeof s=="string"&&(s=La(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+i.length);if(d.set(s),d.set(i,s.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,a){l=l||0;for(var g=0;g<16;++g)a[l+g]=d[g];return a}return zr(d)}try{n.name=r}catch{}return n.DNS=sd,n.URL=id,n}function od(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return ad(cd(ld(r),r.length*8))}function ad(r){for(var t=[],e=r.length*32,n="0123456789abcdef",i=0;i<e;i+=8){var s=r[i>>5]>>>i%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(a)}return t}function Oa(r){return(r+64>>>9<<4)+14+1}function cd(r,t){r[t>>5]|=128<<t%32,r[Oa(t)-1]=t;for(var e=1732584193,n=-271733879,i=-1732584194,s=271733878,a=0;a<r.length;a+=16){var l=e,d=n,g=i,x=s;e=bt(e,n,i,s,r[a],7,-680876936),s=bt(s,e,n,i,r[a+1],12,-389564586),i=bt(i,s,e,n,r[a+2],17,606105819),n=bt(n,i,s,e,r[a+3],22,-1044525330),e=bt(e,n,i,s,r[a+4],7,-176418897),s=bt(s,e,n,i,r[a+5],12,1200080426),i=bt(i,s,e,n,r[a+6],17,-1473231341),n=bt(n,i,s,e,r[a+7],22,-45705983),e=bt(e,n,i,s,r[a+8],7,1770035416),s=bt(s,e,n,i,r[a+9],12,-1958414417),i=bt(i,s,e,n,r[a+10],17,-42063),n=bt(n,i,s,e,r[a+11],22,-1990404162),e=bt(e,n,i,s,r[a+12],7,1804603682),s=bt(s,e,n,i,r[a+13],12,-40341101),i=bt(i,s,e,n,r[a+14],17,-1502002290),n=bt(n,i,s,e,r[a+15],22,1236535329),e=wt(e,n,i,s,r[a+1],5,-165796510),s=wt(s,e,n,i,r[a+6],9,-1069501632),i=wt(i,s,e,n,r[a+11],14,643717713),n=wt(n,i,s,e,r[a],20,-373897302),e=wt(e,n,i,s,r[a+5],5,-701558691),s=wt(s,e,n,i,r[a+10],9,38016083),i=wt(i,s,e,n,r[a+15],14,-660478335),n=wt(n,i,s,e,r[a+4],20,-405537848),e=wt(e,n,i,s,r[a+9],5,568446438),s=wt(s,e,n,i,r[a+14],9,-1019803690),i=wt(i,s,e,n,r[a+3],14,-187363961),n=wt(n,i,s,e,r[a+8],20,1163531501),e=wt(e,n,i,s,r[a+13],5,-1444681467),s=wt(s,e,n,i,r[a+2],9,-51403784),i=wt(i,s,e,n,r[a+7],14,1735328473),n=wt(n,i,s,e,r[a+12],20,-1926607734),e=vt(e,n,i,s,r[a+5],4,-378558),s=vt(s,e,n,i,r[a+8],11,-2022574463),i=vt(i,s,e,n,r[a+11],16,1839030562),n=vt(n,i,s,e,r[a+14],23,-35309556),e=vt(e,n,i,s,r[a+1],4,-1530992060),s=vt(s,e,n,i,r[a+4],11,1272893353),i=vt(i,s,e,n,r[a+7],16,-155497632),n=vt(n,i,s,e,r[a+10],23,-1094730640),e=vt(e,n,i,s,r[a+13],4,681279174),s=vt(s,e,n,i,r[a],11,-358537222),i=vt(i,s,e,n,r[a+3],16,-722521979),n=vt(n,i,s,e,r[a+6],23,76029189),e=vt(e,n,i,s,r[a+9],4,-640364487),s=vt(s,e,n,i,r[a+12],11,-421815835),i=vt(i,s,e,n,r[a+15],16,530742520),n=vt(n,i,s,e,r[a+2],23,-995338651),e=St(e,n,i,s,r[a],6,-198630844),s=St(s,e,n,i,r[a+7],10,1126891415),i=St(i,s,e,n,r[a+14],15,-1416354905),n=St(n,i,s,e,r[a+5],21,-57434055),e=St(e,n,i,s,r[a+12],6,1700485571),s=St(s,e,n,i,r[a+3],10,-1894986606),i=St(i,s,e,n,r[a+10],15,-1051523),n=St(n,i,s,e,r[a+1],21,-2054922799),e=St(e,n,i,s,r[a+8],6,1873313359),s=St(s,e,n,i,r[a+15],10,-30611744),i=St(i,s,e,n,r[a+6],15,-1560198380),n=St(n,i,s,e,r[a+13],21,1309151649),e=St(e,n,i,s,r[a+4],6,-145523070),s=St(s,e,n,i,r[a+11],10,-1120210379),i=St(i,s,e,n,r[a+2],15,718787259),n=St(n,i,s,e,r[a+9],21,-343485551),e=cn(e,l),n=cn(n,d),i=cn(i,g),s=cn(s,x)}return[e,n,i,s]}function ld(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Oa(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function cn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function ud(r,t){return r<<t|r>>>32-t}function $r(r,t,e,n,i,s){return cn(ud(cn(cn(t,r),cn(n,s)),i),e)}function bt(r,t,e,n,i,s,a){return $r(t&e|~t&n,r,t,i,s,a)}function wt(r,t,e,n,i,s,a){return $r(t&n|e&~n,r,t,i,s,a)}function vt(r,t,e,n,i,s,a){return $r(t^e^n,r,t,i,s,a)}function St(r,t,e,n,i,s,a){return $r(e^(t|~n),r,t,i,s,a)}var dd=Pa("v3",48,od);function hd(r,t,e){r=r||{};var n=r.random||(r.rng||Ra)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=n[i];return t}return zr(n)}function fd(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function Rs(r,t){return r<<t|r>>>32-t}function pd(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,a=Math.ceil(s/16),l=new Array(a),d=0;d<a;++d){for(var g=new Uint32Array(16),x=0;x<16;++x)g[x]=r[d*64+x*4]<<24|r[d*64+x*4+1]<<16|r[d*64+x*4+2]<<8|r[d*64+x*4+3];l[d]=g}l[a-1][14]=(r.length-1)*8/Math.pow(2,32),l[a-1][14]=Math.floor(l[a-1][14]),l[a-1][15]=(r.length-1)*8&4294967295;for(var b=0;b<a;++b){for(var C=new Uint32Array(80),B=0;B<16;++B)C[B]=l[b][B];for(var M=16;M<80;++M)C[M]=Rs(C[M-3]^C[M-8]^C[M-14]^C[M-16],1);for(var k=e[0],S=e[1],F=e[2],L=e[3],I=e[4],U=0;U<80;++U){var O=Math.floor(U/20),D=Rs(k,5)+fd(O,S,F,L)+I+t[O]+C[U]>>>0;I=L,L=F,F=Rs(S,30)>>>0,S=k,k=D}e[0]=e[0]+k>>>0,e[1]=e[1]+S>>>0,e[2]=e[2]+F>>>0,e[3]=e[3]+L>>>0,e[4]=e[4]+I>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var md=Pa("v5",80,pd);const gd="00000000-0000-0000-0000-000000000000";function xd(r){if(!Dr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const yd=Object.freeze(Object.defineProperty({__proto__:null,NIL:gd,parse:La,stringify:zr,v1:nd,v3:dd,v4:hd,v5:md,validate:Dr,version:xd},Symbol.toStringTag,{value:"Module"})),Fa=fi(yd);var Ls,xo;function bd(){if(xo)return Ls;xo=1;const r=Fa.v4;return Ls=function(e,n,i,s){if(typeof e!="string")throw new TypeError(e+" must be a string");s=s||{};const a=typeof s.version=="number"?s.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const l={method:e};if(a===2&&(l.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");l.params=n}if(typeof i>"u"){const d=typeof s.generator=="function"?s.generator:function(){return r()};l.id=d(l,s)}else a===2&&i===null?s.notificationIdNull&&(l.id=null):l.id=i;return l},Ls}var Ps,yo;function wd(){if(yo)return Ps;yo=1;const r=Fa.v4,t=bd(),e=function(n,i){if(!(this instanceof e))return new e(n,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return r()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=n};return Ps=e,e.prototype.request=function(n,i,s,a){const l=this;let d=null;const g=Array.isArray(n)&&typeof i=="function";if(this.options.version===1&&g)throw new TypeError("JSON-RPC 1.0 does not support batching");if(g||!g&&n&&typeof n=="object"&&typeof i=="function")a=i,d=n;else{typeof s=="function"&&(a=s,s=void 0);const C=typeof a=="function";try{d=t(n,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(B){if(C)return a(B);throw B}if(!C)return d}let b;try{b=JSON.stringify(d,this.options.replacer)}catch(C){return a(C)}return this.callServer(b,function(C,B){l._parseResponse(C,B,a)}),d},e.prototype._parseResponse=function(n,i,s){if(n){s(n);return}if(!i)return s();let a;try{a=JSON.parse(i,this.options.reviver)}catch(l){return s(l)}if(s.length===3)if(Array.isArray(a)){const l=function(g){return typeof g.error<"u"},d=function(g){return!l(g)};return s(null,a.filter(l),a.filter(d))}else return s(null,a.error,a.result);s(null,a)},Ps}var vd=wd();const Sd=Xn(vd);var Os={exports:{}},bo;function kd(){return bo||(bo=1,function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(d,g,x){this.fn=d,this.context=g,this.once=x||!1}function s(d,g,x,b,C){if(typeof x!="function")throw new TypeError("The listener must be a function");var B=new i(x,b||d,C),M=e?e+g:g;return d._events[M]?d._events[M].fn?d._events[M]=[d._events[M],B]:d._events[M].push(B):(d._events[M]=B,d._eventsCount++),d}function a(d,g){--d._eventsCount===0?d._events=new n:delete d._events[g]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var g=[],x,b;if(this._eventsCount===0)return g;for(b in x=this._events)t.call(x,b)&&g.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(x)):g},l.prototype.listeners=function(g){var x=e?e+g:g,b=this._events[x];if(!b)return[];if(b.fn)return[b.fn];for(var C=0,B=b.length,M=new Array(B);C<B;C++)M[C]=b[C].fn;return M},l.prototype.listenerCount=function(g){var x=e?e+g:g,b=this._events[x];return b?b.fn?1:b.length:0},l.prototype.emit=function(g,x,b,C,B,M){var k=e?e+g:g;if(!this._events[k])return!1;var S=this._events[k],F=arguments.length,L,I;if(S.fn){switch(S.once&&this.removeListener(g,S.fn,void 0,!0),F){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,x),!0;case 3:return S.fn.call(S.context,x,b),!0;case 4:return S.fn.call(S.context,x,b,C),!0;case 5:return S.fn.call(S.context,x,b,C,B),!0;case 6:return S.fn.call(S.context,x,b,C,B,M),!0}for(I=1,L=new Array(F-1);I<F;I++)L[I-1]=arguments[I];S.fn.apply(S.context,L)}else{var U=S.length,O;for(I=0;I<U;I++)switch(S[I].once&&this.removeListener(g,S[I].fn,void 0,!0),F){case 1:S[I].fn.call(S[I].context);break;case 2:S[I].fn.call(S[I].context,x);break;case 3:S[I].fn.call(S[I].context,x,b);break;case 4:S[I].fn.call(S[I].context,x,b,C);break;default:if(!L)for(O=1,L=new Array(F-1);O<F;O++)L[O-1]=arguments[O];S[I].fn.apply(S[I].context,L)}}return!0},l.prototype.on=function(g,x,b){return s(this,g,x,b,!1)},l.prototype.once=function(g,x,b){return s(this,g,x,b,!0)},l.prototype.removeListener=function(g,x,b,C){var B=e?e+g:g;if(!this._events[B])return this;if(!x)return a(this,B),this;var M=this._events[B];if(M.fn)M.fn===x&&(!C||M.once)&&(!b||M.context===b)&&a(this,B);else{for(var k=0,S=[],F=M.length;k<F;k++)(M[k].fn!==x||C&&!M[k].once||b&&M[k].context!==b)&&S.push(M[k]);S.length?this._events[B]=S.length===1?S[0]:S:a(this,B)}return this},l.prototype.removeAllListeners=function(g){var x;return g?(x=e?e+g:g,this._events[x]&&a(this,x)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,r.exports=l}(Os)),Os.exports}var Ed=kd();const Ua=Xn(Ed);var Bd=class extends Ua{socket;constructor(r,t,e){super(),this.socket=new window.WebSocket(r,e),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,t,e){const n=e||t;try{this.socket.send(r),n()}catch(i){n(i)}}close(r,t){this.socket.close(r,t)}addEventListener(r,t,e){this.socket.addEventListener(r,t,e)}};function Nd(r,t){return new Bd(r,t)}var jd=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Ad=class extends Ua{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...a}={},l,d){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),d?this.dataPack=d:this.dataPack=new jd,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,t,e,n){return!n&&typeof e=="object"&&(n=e,e=null),new Promise((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const a=this.generate_request_id(r,t),l={jsonrpc:"2.0",method:r,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(l),n,d=>{if(d)return s(d);this.queue[a]={promise:[i,s]},e&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],s(new Error("reply timeout"))},e))})})}async login(r){const t=await this.call("rpc.login",r);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(r,t){return new Promise((e,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:r,params:t};this.socket.send(this.dataPack.encode(i),s=>{if(s)return n(s);e()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const t=await this.call("rpc.on",r);if(typeof r=="string"&&t[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+t[r]);return t}async unsubscribe(r){typeof r=="string"&&(r=[r]);const t=await this.call("rpc.off",r);if(typeof r=="string"&&t[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(r,t){this.socket.close(r||1e3,t)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}_connect(r,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=Be.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const n=[e.notification];if(e.params.constructor===Object)n.push(e.params);else for(let i=0;i<e.params.length;i++)n.push(e.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",e,n),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(r,t),this.reconnect_interval)))})}};class qa extends pa{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Qc(t);const n=mi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=t.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(t){return Sr(this),this.iHash.update(t),this}digestInto(t){Sr(this),Or(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:l}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=a,t.outputLen=l,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Da=(r,t,e)=>new qa(r,t).update(e).digest();Da.create=(r,t)=>new qa(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wo(r){r.lowS!==void 0&&dn("lowS",r.lowS),r.prehash!==void 0&&dn("prehash",r.prehash)}function Id(r){const t=bi(r);Qn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:i}=t;if(e){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}class Cd extends Error{constructor(t=""){super(t)}}const Gt={Err:Cd,_tlv:{encode:(r,t)=>{const{Err:e}=Gt;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,i=ar(n);if(i.length/2&128)throw new e("tlv.encode: long form length too big");const s=n>127?ar(i.length/2|128):"";return ar(r)+s+i+t},decode(r,t){const{Err:e}=Gt;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const i=t[n++],s=!!(i&128);let a=0;if(!s)a=i;else{const d=i&127;if(!d)throw new e("tlv.decode(long): indefinite length not supported");if(d>4)throw new e("tlv.decode(long): byte length is too big");const g=t.subarray(n,n+d);if(g.length!==d)throw new e("tlv.decode: length bytes not complete");if(g[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const x of g)a=a<<8|x;if(n+=d,a<128)throw new e("tlv.decode(long): not minimal encoding")}const l=t.subarray(n,n+a);if(l.length!==a)throw new e("tlv.decode: wrong value length");return{v:l,l:t.subarray(n+a)}}},_int:{encode(r){const{Err:t}=Gt;if(r<Yt)throw new t("integer: negative integers are not allowed");let e=ar(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=Gt;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return bn(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=Gt,i=ut("signature",r),{v:s,l:a}=n.decode(48,i);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:l,l:d}=n.decode(2,s),{v:g,l:x}=n.decode(2,d);if(x.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(l),s:e.decode(g)}},hexFromSig(r){const{_tlv:t,_int:e}=Gt,n=t.encode(2,e.encode(r.r)),i=t.encode(2,e.encode(r.s)),s=n+i;return t.encode(48,s)}},Yt=BigInt(0),ft=BigInt(1);BigInt(2);const vo=BigInt(3);BigInt(4);function _d(r){const t=Id(r),{Fp:e}=t,n=Ur(t.n,t.nBitLength),i=t.toBytes||((k,S,F)=>{const L=S.toAffine();return Un(Uint8Array.from([4]),e.toBytes(L.x),e.toBytes(L.y))}),s=t.fromBytes||(k=>{const S=k.subarray(1),F=e.fromBytes(S.subarray(0,e.BYTES)),L=e.fromBytes(S.subarray(e.BYTES,2*e.BYTES));return{x:F,y:L}});function a(k){const{a:S,b:F}=t,L=e.sqr(k),I=e.mul(L,k);return e.add(e.add(I,e.mul(k,S)),F)}if(!e.eql(e.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function l(k){return yi(k,ft,t.n)}function d(k){const{allowedPrivateKeyLengths:S,nByteLength:F,wrapPrivateKey:L,n:I}=t;if(S&&typeof k!="bigint"){if(On(k)&&(k=Fn(k)),typeof k!="string"||!S.includes(k.length))throw new Error("invalid private key");k=k.padStart(F*2,"0")}let U;try{U=typeof k=="bigint"?k:bn(ut("private key",k,F))}catch{throw new Error("invalid private key, expected hex or "+F+" bytes, got "+typeof k)}return L&&(U=Fe(U,I)),Pt("private key",U,ft,I),U}function g(k){if(!(k instanceof C))throw new Error("ProjectivePoint expected")}const x=Br((k,S)=>{const{px:F,py:L,pz:I}=k;if(e.eql(I,e.ONE))return{x:F,y:L};const U=k.is0();S==null&&(S=U?e.ONE:e.inv(I));const O=e.mul(F,S),D=e.mul(L,S),J=e.mul(I,S);if(U)return{x:e.ZERO,y:e.ZERO};if(!e.eql(J,e.ONE))throw new Error("invZ was invalid");return{x:O,y:D}}),b=Br(k=>{if(k.is0()){if(t.allowInfinityPoint&&!e.is0(k.py))return;throw new Error("bad point: ZERO")}const{x:S,y:F}=k.toAffine();if(!e.isValid(S)||!e.isValid(F))throw new Error("bad point: x or y not FE");const L=e.sqr(F),I=a(S);if(!e.eql(L,I))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class C{constructor(S,F,L){if(S==null||!e.isValid(S))throw new Error("x required");if(F==null||!e.isValid(F))throw new Error("y required");if(L==null||!e.isValid(L))throw new Error("z required");this.px=S,this.py=F,this.pz=L,Object.freeze(this)}static fromAffine(S){const{x:F,y:L}=S||{};if(!S||!e.isValid(F)||!e.isValid(L))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");const I=U=>e.eql(U,e.ZERO);return I(F)&&I(L)?C.ZERO:new C(F,L,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){const F=e.invertBatch(S.map(L=>L.pz));return S.map((L,I)=>L.toAffine(F[I])).map(C.fromAffine)}static fromHex(S){const F=C.fromAffine(s(ut("pointHex",S)));return F.assertValidity(),F}static fromPrivateKey(S){return C.BASE.multiply(d(S))}static msm(S,F){return ja(C,n,S,F)}_setWindowSize(S){M.setWindowSize(this,S)}assertValidity(){b(this)}hasEvenY(){const{y:S}=this.toAffine();if(e.isOdd)return!e.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){g(S);const{px:F,py:L,pz:I}=this,{px:U,py:O,pz:D}=S,J=e.eql(e.mul(F,D),e.mul(U,I)),K=e.eql(e.mul(L,D),e.mul(O,I));return J&&K}negate(){return new C(this.px,e.neg(this.py),this.pz)}double(){const{a:S,b:F}=t,L=e.mul(F,vo),{px:I,py:U,pz:O}=this;let D=e.ZERO,J=e.ZERO,K=e.ZERO,$=e.mul(I,I),_=e.mul(U,U),W=e.mul(O,O),G=e.mul(I,U);return G=e.add(G,G),K=e.mul(I,O),K=e.add(K,K),D=e.mul(S,K),J=e.mul(L,W),J=e.add(D,J),D=e.sub(_,J),J=e.add(_,J),J=e.mul(D,J),D=e.mul(G,D),K=e.mul(L,K),W=e.mul(S,W),G=e.sub($,W),G=e.mul(S,G),G=e.add(G,K),K=e.add($,$),$=e.add(K,$),$=e.add($,W),$=e.mul($,G),J=e.add(J,$),W=e.mul(U,O),W=e.add(W,W),$=e.mul(W,G),D=e.sub(D,$),K=e.mul(W,_),K=e.add(K,K),K=e.add(K,K),new C(D,J,K)}add(S){g(S);const{px:F,py:L,pz:I}=this,{px:U,py:O,pz:D}=S;let J=e.ZERO,K=e.ZERO,$=e.ZERO;const _=t.a,W=e.mul(t.b,vo);let G=e.mul(F,U),E=e.mul(L,O),c=e.mul(I,D),m=e.add(F,L),y=e.add(U,O);m=e.mul(m,y),y=e.add(G,E),m=e.sub(m,y),y=e.add(F,I);let j=e.add(U,D);return y=e.mul(y,j),j=e.add(G,c),y=e.sub(y,j),j=e.add(L,I),J=e.add(O,D),j=e.mul(j,J),J=e.add(E,c),j=e.sub(j,J),$=e.mul(_,y),J=e.mul(W,c),$=e.add(J,$),J=e.sub(E,$),$=e.add(E,$),K=e.mul(J,$),E=e.add(G,G),E=e.add(E,G),c=e.mul(_,c),y=e.mul(W,y),E=e.add(E,c),c=e.sub(G,c),c=e.mul(_,c),y=e.add(y,c),G=e.mul(E,y),K=e.add(K,G),G=e.mul(j,y),J=e.mul(m,J),J=e.sub(J,G),G=e.mul(m,E),$=e.mul(j,$),$=e.add($,G),new C(J,K,$)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}wNAF(S){return M.wNAFCached(this,S,C.normalizeZ)}multiplyUnsafe(S){const{endo:F,n:L}=t;Pt("scalar",S,Yt,L);const I=C.ZERO;if(S===Yt)return I;if(this.is0()||S===ft)return this;if(!F||M.hasPrecomputes(this))return M.wNAFCachedUnsafe(this,S,C.normalizeZ);let{k1neg:U,k1:O,k2neg:D,k2:J}=F.splitScalar(S),K=I,$=I,_=this;for(;O>Yt||J>Yt;)O&ft&&(K=K.add(_)),J&ft&&($=$.add(_)),_=_.double(),O>>=ft,J>>=ft;return U&&(K=K.negate()),D&&($=$.negate()),$=new C(e.mul($.px,F.beta),$.py,$.pz),K.add($)}multiply(S){const{endo:F,n:L}=t;Pt("scalar",S,ft,L);let I,U;if(F){const{k1neg:O,k1:D,k2neg:J,k2:K}=F.splitScalar(S);let{p:$,f:_}=this.wNAF(D),{p:W,f:G}=this.wNAF(K);$=M.constTimeNegate(O,$),W=M.constTimeNegate(J,W),W=new C(e.mul(W.px,F.beta),W.py,W.pz),I=$.add(W),U=_.add(G)}else{const{p:O,f:D}=this.wNAF(S);I=O,U=D}return C.normalizeZ([I,U])[0]}multiplyAndAddUnsafe(S,F,L){const I=C.BASE,U=(D,J)=>J===Yt||J===ft||!D.equals(I)?D.multiplyUnsafe(J):D.multiply(J),O=U(this,F).add(U(S,L));return O.is0()?void 0:O}toAffine(S){return x(this,S)}isTorsionFree(){const{h:S,isTorsionFree:F}=t;if(S===ft)return!0;if(F)return F(C,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:S,clearCofactor:F}=t;return S===ft?this:F?F(C,this):this.multiplyUnsafe(t.h)}toRawBytes(S=!0){return dn("isCompressed",S),this.assertValidity(),i(C,this,S)}toHex(S=!0){return dn("isCompressed",S),Fn(this.toRawBytes(S))}}C.BASE=new C(t.Gx,t.Gy,e.ONE),C.ZERO=new C(e.ZERO,e.ONE,e.ZERO);const B=t.nBitLength,M=Na(C,t.endo?Math.ceil(B/2):B);return{CURVE:t,ProjectivePoint:C,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:l}}function Md(r){const t=bi(r);return Qn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Td(r){const t=Md(r),{Fp:e,n}=t,i=e.BYTES+1,s=2*e.BYTES+1;function a(c){return Fe(c,n)}function l(c){return ni(c,n)}const{ProjectivePoint:d,normPrivateKeyToScalar:g,weierstrassEquation:x,isWithinCurveOrder:b}=_d({...t,toBytes(c,m,y){const j=m.toAffine(),N=e.toBytes(j.x),P=Un;return dn("isCompressed",y),y?P(Uint8Array.from([m.hasEvenY()?2:3]),N):P(Uint8Array.from([4]),N,e.toBytes(j.y))},fromBytes(c){const m=c.length,y=c[0],j=c.subarray(1);if(m===i&&(y===2||y===3)){const N=bn(j);if(!yi(N,ft,e.ORDER))throw new Error("Point is not on curve");const P=x(N);let q;try{q=e.sqrt(P)}catch(h){const v=h instanceof Error?": "+h.message:"";throw new Error("Point is not on curve"+v)}const A=(q&ft)===ft;return(y&1)===1!==A&&(q=e.neg(q)),{x:N,y:q}}else if(m===s&&y===4){const N=e.fromBytes(j.subarray(0,e.BYTES)),P=e.fromBytes(j.subarray(e.BYTES,2*e.BYTES));return{x:N,y:P}}else{const N=i,P=s;throw new Error("invalid Point, expected length of "+N+", or uncompressed "+P+", got "+m)}}}),C=c=>Fn(Yn(c,t.nByteLength));function B(c){const m=n>>ft;return c>m}function M(c){return B(c)?a(-c):c}const k=(c,m,y)=>bn(c.slice(m,y));class S{constructor(m,y,j){Pt("r",m,ft,n),Pt("s",y,ft,n),this.r=m,this.s=y,j!=null&&(this.recovery=j),Object.freeze(this)}static fromCompact(m){const y=t.nByteLength;return m=ut("compactSignature",m,y*2),new S(k(m,0,y),k(m,y,2*y))}static fromDER(m){const{r:y,s:j}=Gt.toSig(ut("DER",m));return new S(y,j)}assertValidity(){}addRecoveryBit(m){return new S(this.r,this.s,m)}recoverPublicKey(m){const{r:y,s:j,recovery:N}=this,P=D(ut("msgHash",m));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");const q=N===2||N===3?y+t.n:y;if(q>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const A=(N&1)===0?"02":"03",u=d.fromHex(A+C(q)),h=l(q),v=a(-P*h),R=a(j*h),V=d.BASE.multiplyAndAddUnsafe(u,v,R);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return kr(this.toDERHex())}toDERHex(){return Gt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return kr(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}const F={isValidPrivateKey(c){try{return g(c),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const c=ka(t.n);return Hl(t.randomBytes(c),t.n)},precompute(c=8,m=d.BASE){return m._setWindowSize(c),m.multiply(BigInt(3)),m}};function L(c,m=!0){return d.fromPrivateKey(c).toRawBytes(m)}function I(c){const m=On(c),y=typeof c=="string",j=(m||y)&&c.length;return m?j===i||j===s:y?j===2*i||j===2*s:c instanceof d}function U(c,m,y=!0){if(I(c))throw new Error("first arg must be private key");if(!I(m))throw new Error("second arg must be public key");return d.fromHex(m).multiply(g(c)).toRawBytes(y)}const O=t.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");const m=bn(c),y=c.length*8-t.nBitLength;return y>0?m>>BigInt(y):m},D=t.bits2int_modN||function(c){return a(O(c))},J=Fr(t.nBitLength);function K(c){return Pt("num < 2^"+t.nBitLength,c,Yt,J),Yn(c,t.nByteLength)}function $(c,m,y=_){if(["recovered","canonical"].some(se=>se in y))throw new Error("sign() legacy options not supported");const{hash:j,randomBytes:N}=t;let{lowS:P,prehash:q,extraEntropy:A}=y;P==null&&(P=!0),c=ut("msgHash",c),wo(y),q&&(c=ut("prehashed msgHash",j(c)));const u=D(c),h=g(m),v=[K(h),K(u)];if(A!=null&&A!==!1){const se=A===!0?N(e.BYTES):A;v.push(ut("extraEntropy",se))}const R=Un(...v),V=u;function te(se){const he=O(se);if(!b(he))return;const je=l(he),ne=d.BASE.multiply(he).toAffine(),oe=a(ne.x);if(oe===Yt)return;const pe=a(je*a(V+oe*h));if(pe===Yt)return;let de=(ne.x===oe?0:2)|Number(ne.y&ft),xe=pe;return P&&B(pe)&&(xe=M(pe),de^=1),new S(oe,xe,de)}return{seed:R,k2sig:te}}const _={lowS:t.lowS,prehash:!1},W={lowS:t.lowS,prehash:!1};function G(c,m,y=_){const{seed:j,k2sig:N}=$(c,m,y),P=t;return Ll(P.hash.outputLen,P.nByteLength,P.hmac)(j,N)}d.BASE._setWindowSize(8);function E(c,m,y,j=W){const N=c;m=ut("msgHash",m),y=ut("publicKey",y);const{lowS:P,prehash:q,format:A}=j;if(wo(j),"strict"in j)throw new Error("options.strict was renamed to lowS");if(A!==void 0&&A!=="compact"&&A!=="der")throw new Error("format must be compact or der");const u=typeof N=="string"||On(N),h=!u&&!A&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!u&&!h)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let v,R;try{if(h&&(v=new S(N.r,N.s)),u){try{A!=="compact"&&(v=S.fromDER(N))}catch(de){if(!(de instanceof Gt.Err))throw de}!v&&A!=="der"&&(v=S.fromCompact(N))}R=d.fromHex(y)}catch{return!1}if(!v||P&&v.hasHighS())return!1;q&&(m=t.hash(m));const{r:V,s:te}=v,se=D(m),he=l(te),je=a(se*he),ne=a(V*he),oe=d.BASE.multiplyAndAddUnsafe(R,je,ne)?.toAffine();return oe?a(oe.x)===V:!1}return{CURVE:t,getPublicKey:L,getSharedSecret:U,sign:G,verify:E,ProjectivePoint:d,Signature:S,utils:F}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rd(r){return{hash:r,hmac:(t,...e)=>Da(r,t,nl(...e)),randomBytes:ga}}function Ld(r,t){const e=n=>Td({...r,...Rd(n)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const za=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),So=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pd=BigInt(1),si=BigInt(2),ko=(r,t)=>(r+t/si)/t;function Od(r){const t=za,e=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),l=BigInt(44),d=BigInt(88),g=r*r*r%t,x=g*g*r%t,b=Ke(x,e,t)*x%t,C=Ke(b,e,t)*x%t,B=Ke(C,si,t)*g%t,M=Ke(B,i,t)*B%t,k=Ke(M,s,t)*M%t,S=Ke(k,l,t)*k%t,F=Ke(S,d,t)*S%t,L=Ke(F,l,t)*k%t,I=Ke(L,e,t)*x%t,U=Ke(I,a,t)*M%t,O=Ke(U,n,t)*g%t,D=Ke(O,si,t);if(!ii.eql(ii.sqr(D),r))throw new Error("Cannot find square root");return D}const ii=Ur(za,void 0,void 0,{sqrt:Od}),Fd=Ld({a:BigInt(0),b:BigInt(7),Fp:ii,n:So,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=So,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Pd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,a=BigInt("0x100000000000000000000000000000000"),l=ko(s*r,t),d=ko(-n*r,t);let g=Fe(r-l*e-d*i,t),x=Fe(-l*n-d*s,t);const b=g>a,C=x>a;if(b&&(g=t-g),C&&(x=t-x),g>a||x>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:b,k1:g,k2neg:C,k2:x}}}},Xs);BigInt(0);const Eo=()=>{const r=er.utils.randomPrivateKey(),t=oi(r),e=new Uint8Array(64);return e.set(r),e.set(t,32),{publicKey:t,secretKey:e}},oi=er.getPublicKey;function Bo(r){try{return er.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Ud=(r,t)=>er.sign(r,t.slice(0,32)),qd=er.verify,gt=r=>Be.Buffer.isBuffer(r)?r:r instanceof Uint8Array?Be.Buffer.from(r.buffer,r.byteOffset,r.byteLength):Be.Buffer.from(r);class Dd{constructor(t){Object.assign(this,t)}encode(){return Be.Buffer.from(Is.serialize(pr,this))}static decode(t){return Is.deserialize(pr,this,t)}static decodeUnchecked(t){return Is.deserializeUnchecked(pr,this,t)}}const pr=new Map;var $a;const zd=32,hn=32;function $d(r){return r._bn!==void 0}let No=1;class me extends Dd{constructor(t){if(super({}),this._bn=void 0,$d(t))this._bn=t._bn;else{if(typeof t=="string"){const e=xt.decode(t);if(e.length!=hn)throw new Error("Invalid public key input");this._bn=new oo(e)}else this._bn=new oo(t);if(this._bn.byteLength()>hn)throw new Error("Invalid public key input")}}static unique(){const t=new me(No);return No+=1,new me(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return xt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Be.Buffer);if(t.length===hn)return t;const e=Be.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const i=Be.Buffer.concat([t.toBuffer(),Be.Buffer.from(e),n.toBuffer()]),s=Xs(i);return new me(s)}static createProgramAddressSync(t,e){let n=Be.Buffer.alloc(0);t.forEach(function(s){if(s.length>zd)throw new TypeError("Max seed length exceeded");n=Be.Buffer.concat([n,gt(s)])}),n=Be.Buffer.concat([n,e.toBuffer(),Be.Buffer.from("ProgramDerivedAddress")]);const i=Xs(n);if(Bo(i))throw new Error("Invalid seeds, address must fall off the curve");return new me(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,i;for(;n!=0;){try{const s=t.concat(Be.Buffer.from([n]));i=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new me(t);return Bo(e.toBytes())}}$a=me;me.default=new $a("11111111111111111111111111111111");pr.set(me,{kind:"struct",fields:[["_bn","u256"]]});new me("BPFLoader1111111111111111111111111111111111");const Ln=1232,Ka=127,Wa=64;class Ha extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ha.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Va extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Va.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Gn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Gn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class _r{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Ne=(r="publicKey")=>z.blob(32,r),Cn=(r="string")=>{const t=z.struct([z.u32("length"),z.u32("lengthPadding"),z.blob(z.offset(z.u32(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(s,a)=>e(s,a).chars.toString(),i.encode=(s,a,l)=>{const d={chars:Be.Buffer.from(s,"utf8")};return n(d,a,l)},i.alloc=s=>z.u32().span+z.u32().span+Be.Buffer.from(s,"utf8").length,i},Kd=(r="authorized")=>z.struct([Ne("staker"),Ne("withdrawer")],r),Wd=(r="lockup")=>z.struct([z.ns64("unixTimestamp"),z.ns64("epoch"),Ne("custodian")],r),Hd=(r="voteInit")=>z.struct([Ne("nodePubkey"),Ne("authorizedVoter"),Ne("authorizedWithdrawer"),z.u8("commission")],r),Vd=(r="voteAuthorizeWithSeedArgs")=>z.struct([z.u32("voteAuthorizationType"),Ne("currentAuthorityDerivedKeyOwnerPubkey"),Cn("currentAuthorityDerivedKeySeed"),Ne("newAuthorized")],r);function Ga(r,t){const e=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){const s=t[i.property];if(Array.isArray(s))return s.length*e(i.elementLayout)}else if("fields"in i)return Ga({layout:i},t[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=e(i)}),n}function It(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,(n&128)===0)break}return t}function Ct(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function dt(r,t){if(!r)throw new Error(t||"Assertion failed")}class Kr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,i=a=>{const l=a.toBase58();let d=n.get(l);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(l,d)),d},s=i(e);s.isSigner=!0,s.isWritable=!0;for(const a of t){i(a.programId).isInvoked=!0;for(const l of a.keys){const d=i(l.pubkey);d.isSigner||=l.isSigner,d.isWritable||=l.isWritable}}return new Kr(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];dt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),n=t.filter(([,d])=>d.isSigner&&!d.isWritable),i=t.filter(([,d])=>!d.isSigner&&d.isWritable),s=t.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{dt(e.length>0,"Expected at least one writable signer key");const[d]=e[0];dt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...e.map(([d])=>new me(d)),...n.map(([d])=>new me(d)),...i.map(([d])=>new me(d)),...s.map(([d])=>new me(d))];return[a,l]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(t,e){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(e(a)){const l=new me(s),d=t.findIndex(g=>g.equals(l));d>=0&&(dt(d<256,"Max lookup table index exceeded"),n.push(d),i.push(l),this.keyMetaMap.delete(s))}return[n,i]}}const Za="Reached end of buffer unexpectedly";function Jt(r){if(r.length===0)throw new Error(Za);return r.shift()}function _t(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(Za);return r.splice(...t)}class pn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new me(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:xt.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new _r(this.staticAccountKeys)}static compile(t){const e=Kr.compile(t.instructions,t.payerKey),[n,i]=e.getMessageComponents(),a=new _r(i).compileInstructions(t.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:xt.encode(l.data)}));return new pn({header:n,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ct(e,t);const n=this.instructions.map(b=>{const{accounts:C,programIdIndex:B}=b,M=Array.from(xt.decode(b.data));let k=[];Ct(k,C.length);let S=[];return Ct(S,M.length),{programIdIndex:B,keyIndicesCount:Be.Buffer.from(k),keyIndices:C,dataLength:Be.Buffer.from(S),data:M}});let i=[];Ct(i,n.length);let s=Be.Buffer.alloc(Ln);Be.Buffer.from(i).copy(s);let a=i.length;n.forEach(b=>{const B=z.struct([z.u8("programIdIndex"),z.blob(b.keyIndicesCount.length,"keyIndicesCount"),z.seq(z.u8("keyIndex"),b.keyIndices.length,"keyIndices"),z.blob(b.dataLength.length,"dataLength"),z.seq(z.u8("userdatum"),b.data.length,"data")]).encode(b,s,a);a+=B}),s=s.slice(0,a);const l=z.struct([z.blob(1,"numRequiredSignatures"),z.blob(1,"numReadonlySignedAccounts"),z.blob(1,"numReadonlyUnsignedAccounts"),z.blob(e.length,"keyCount"),z.seq(Ne("key"),t,"keys"),Ne("recentBlockhash")]),d={numRequiredSignatures:Be.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Be.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Be.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Be.Buffer.from(e),keys:this.accountKeys.map(b=>gt(b.toBytes())),recentBlockhash:xt.decode(this.recentBlockhash)};let g=Be.Buffer.alloc(2048);const x=l.encode(d,g);return s.copy(g,x),g.slice(0,x+s.length)}static from(t){let e=[...t];const n=Jt(e);if(n!==(n&Ka))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Jt(e),s=Jt(e),a=It(e);let l=[];for(let C=0;C<a;C++){const B=_t(e,0,hn);l.push(new me(Be.Buffer.from(B)))}const d=_t(e,0,hn),g=It(e);let x=[];for(let C=0;C<g;C++){const B=Jt(e),M=It(e),k=_t(e,0,M),S=It(e),F=_t(e,0,S),L=xt.encode(Be.Buffer.from(F));x.push({programIdIndex:B,accounts:k,data:L})}const b={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:xt.encode(Be.Buffer.from(d)),accountKeys:l,instructions:x};return new pn(b)}}class Mr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new _r(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const i=t-n,s=this.addressTableLookups.reduce((a,l)=>a+l.writableIndexes.length,0);return i<s}else if(t>=this.header.numRequiredSignatures){const i=t-e,a=n-e-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=e-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=t.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)e.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)e.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Kr.compile(t.instructions,t.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const x of s){const b=e.extractTableLookup(x);if(b!==void 0){const[C,{writable:B,readonly:M}]=b;n.push(C),i.writable.push(...B),i.readonly.push(...M)}}const[a,l]=e.getMessageComponents(),g=new _r(l,i).compileInstructions(t.instructions);return new Mr({header:a,staticAccountKeys:l,recentBlockhash:t.recentBlockhash,compiledInstructions:g,addressTableLookups:n})}serialize(){const t=Array();Ct(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Ct(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Ct(s,this.addressTableLookups.length);const a=z.struct([z.u8("prefix"),z.struct([z.u8("numRequiredSignatures"),z.u8("numReadonlySignedAccounts"),z.u8("numReadonlyUnsignedAccounts")],"header"),z.blob(t.length,"staticAccountKeysLength"),z.seq(Ne(),this.staticAccountKeys.length,"staticAccountKeys"),Ne("recentBlockhash"),z.blob(n.length,"instructionsLength"),z.blob(e.length,"serializedInstructions"),z.blob(s.length,"addressTableLookupsLength"),z.blob(i.length,"serializedAddressTableLookups")]),l=new Uint8Array(Ln),g=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(x=>x.toBytes()),recentBlockhash:xt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},l);return l.slice(0,g)}serializeInstructions(){let t=0;const e=new Uint8Array(Ln);for(const n of this.compiledInstructions){const i=Array();Ct(i,n.accountKeyIndexes.length);const s=Array();Ct(s,n.data.length);const a=z.struct([z.u8("programIdIndex"),z.blob(i.length,"encodedAccountKeyIndexesLength"),z.seq(z.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),z.blob(s.length,"encodedDataLength"),z.blob(n.data.length,"data")]);t+=a.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Ln);for(const n of this.addressTableLookups){const i=Array();Ct(i,n.writableIndexes.length);const s=Array();Ct(s,n.readonlyIndexes.length);const a=z.struct([Ne("accountKey"),z.blob(i.length,"encodedWritableIndexesLength"),z.seq(z.u8(),n.writableIndexes.length,"writableIndexes"),z.blob(s.length,"encodedReadonlyIndexesLength"),z.seq(z.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=Jt(e),i=n&Ka;dt(n!==i,"Expected versioned message but received legacy message");const s=i;dt(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:Jt(e),numReadonlySignedAccounts:Jt(e),numReadonlyUnsignedAccounts:Jt(e)},l=[],d=It(e);for(let M=0;M<d;M++)l.push(new me(_t(e,0,hn)));const g=xt.encode(_t(e,0,hn)),x=It(e),b=[];for(let M=0;M<x;M++){const k=Jt(e),S=It(e),F=_t(e,0,S),L=It(e),I=new Uint8Array(_t(e,0,L));b.push({programIdIndex:k,accountKeyIndexes:F,data:I})}const C=It(e),B=[];for(let M=0;M<C;M++){const k=new me(_t(e,0,hn)),S=It(e),F=_t(e,0,S),L=It(e),I=_t(e,0,L);B.push({accountKey:k,writableIndexes:F,readonlyIndexes:I})}return new Mr({header:a,staticAccountKeys:l,recentBlockhash:g,compiledInstructions:b,addressTableLookups:B})}}let rn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Gd=Be.Buffer.alloc(Wa).fill(0);class Lt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Be.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ot{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Lt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let k=0;k<e.length;k++)if(e[k].programId===void 0)throw new Error(`Transaction instruction index ${k} has undefined program id`);const i=[],s=[];e.forEach(k=>{k.keys.forEach(F=>{s.push({...F})});const S=k.programId.toString();i.includes(S)||i.push(S)}),i.forEach(k=>{s.push({pubkey:new me(k),isSigner:!1,isWritable:!1})});const a=[];s.forEach(k=>{const S=k.pubkey.toString(),F=a.findIndex(L=>L.pubkey.toString()===S);F>-1?(a[F].isWritable=a[F].isWritable||k.isWritable,a[F].isSigner=a[F].isSigner||k.isSigner):a.push(k)}),a.sort(function(k,S){if(k.isSigner!==S.isSigner)return k.isSigner?-1:1;if(k.isWritable!==S.isWritable)return k.isWritable?-1:1;const F={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return k.pubkey.toBase58().localeCompare(S.pubkey.toBase58(),"en",F)});const l=a.findIndex(k=>k.pubkey.equals(n));if(l>-1){const[k]=a.splice(l,1);k.isSigner=!0,k.isWritable=!0,a.unshift(k)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const k of this.signatures){const S=a.findIndex(F=>F.pubkey.equals(k.publicKey));if(S>-1)a[S].isSigner||(a[S].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${k.publicKey.toString()}`)}let d=0,g=0,x=0;const b=[],C=[];a.forEach(({pubkey:k,isSigner:S,isWritable:F})=>{S?(b.push(k.toString()),d+=1,F||(g+=1)):(C.push(k.toString()),F||(x+=1))});const B=b.concat(C),M=e.map(k=>{const{data:S,programId:F}=k;return{programIdIndex:B.indexOf(F.toString()),accounts:k.keys.map(L=>B.indexOf(L.pubkey.toString())),data:xt.encode(S)}});return M.forEach(k=>{dt(k.programIdIndex>=0),k.accounts.forEach(S=>dt(S>=0))}),new pn({header:{numRequiredSignatures:d,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:x},accountKeys:B,recentBlockhash:t,instructions:M})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((i,s)=>e[s].equals(i.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const i=n.toString();return e.has(i)?!1:(e.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const s of t){const a=s.publicKey.toString();e.has(a)||(e.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const s of t){const a=s.publicKey.toString();e.has(a)||(e.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(i=>{const s=Ud(n,i.secretKey);this._addSignature(i.publicKey,gt(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){dt(e.length===64);const n=this.signatures.findIndex(i=>t.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=Be.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?e&&(n.missing||=[]).push(s):qd(i,t,s.toBytes())||(n.invalid||=[]).push(s);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,e);if(s){let a="Signature verification failed.";throw s.invalid&&(a+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),s.missing&&(a+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(i)}_serialize(t){const{signatures:e}=this,n=[];Ct(n,e.length);const i=n.length+e.length*64+t.length,s=Be.Buffer.alloc(i);return dt(e.length<256),Be.Buffer.from(n).copy(s,0),e.forEach(({signature:a},l)=>{a!==null&&(dt(a.length===64,"signature has invalid length"),Be.Buffer.from(a).copy(s,n.length+l*64))}),t.copy(s,n.length+e.length*64),dt(s.length<=Ln,`Transaction too large: ${s.length} > ${Ln}`),s}get keys(){return dt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return dt(this.instructions.length===1),this.instructions[0].programId}get data(){return dt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=It(e);let i=[];for(let s=0;s<n;s++){const a=_t(e,0,Wa);i.push(xt.encode(Be.Buffer.from(a)))}return Ot.populate(pn.from(e),i)}static populate(t,e=[]){const n=new Ot;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((i,s)=>{const a={signature:i==xt.encode(Gd)?null:xt.decode(i),publicKey:t.accountKeys[s]};n.signatures.push(a)}),t.instructions.forEach(i=>{const s=i.accounts.map(a=>{const l=t.accountKeys[a];return{pubkey:l,isSigner:n.signatures.some(d=>d.publicKey.toString()===l.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});n.instructions.push(new Lt({keys:s,programId:t.accountKeys[i.programIdIndex],data:xt.decode(i.data)}))}),n._message=t,n._json=n.toJSON(),n}}const Zd=160,Yd=64,Jd=Zd/Yd,Xd=1e3/Jd;new me("SysvarC1ock11111111111111111111111111111111");new me("SysvarEpochSchedu1e111111111111111111111111");new me("Sysvar1nstructions1111111111111111111111111");const Fs=new me("SysvarRecentB1ockHashes11111111111111111111"),jo=new me("SysvarRent111111111111111111111111111111111");new me("SysvarRewards111111111111111111111111111111");new me("SysvarS1otHashes111111111111111111111111111");new me("SysvarS1otHistory11111111111111111111111111");new me("SysvarStakeHistory1111111111111111111111111");class ai extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let l;switch(t){case"send":l=`Transaction ${e} resulted in an error. 
${n}. `+s+a;break;case"simulate":l=`Simulation failed. 
Message: ${n}. 
`+s+a;break;default:l=`Unknown action '${(d=>d)(t)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,e(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class fe extends Error{constructor({code:t,message:e,data:n},i){super(i!=null?`${i}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}async function Ao(r,t,e,n){const i=n,s=await r.sendTransaction(t,e,i);let a;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:l}=t.nonceInfo,d=l.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:t.nonceInfo.nonce,signature:s},n)).value}else a=(await r.confirmTransaction(s,n)).value;if(a.err)throw s!=null?new ai({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(a)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function In(r){return new Promise(t=>setTimeout(t,r))}function jt(r,t){const e=r.layout.span>=0?r.layout.span:Ga(r,t),n=Be.Buffer.alloc(e),i=Object.assign({instruction:r.index},t);return r.layout.encode(i,n),n}const Qd=z.nu64("lamportsPerSignature"),Ya=z.struct([z.u32("version"),z.u32("state"),Ne("authorizedPubkey"),Ne("nonce"),z.struct([Qd],"feeCalculator")]),Io=Ya.span;class Bi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ya.decode(gt(t),0);return new Bi({authorizedPubkey:new me(e.authorizedPubkey),nonce:new me(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Dn(r){const t=z.blob(8,r),e=t.decode.bind(t),n=t.encode.bind(t),i=t,s=Wu();return i.decode=(a,l)=>{const d=e(a,l);return s.decode(d)},i.encode=(a,l,d)=>{const g=s.encode(a);return n(g,l,d)},i}const At=Object.freeze({Create:{index:0,layout:z.struct([z.u32("instruction"),z.ns64("lamports"),z.ns64("space"),Ne("programId")])},Assign:{index:1,layout:z.struct([z.u32("instruction"),Ne("programId")])},Transfer:{index:2,layout:z.struct([z.u32("instruction"),Dn("lamports")])},CreateWithSeed:{index:3,layout:z.struct([z.u32("instruction"),Ne("base"),Cn("seed"),z.ns64("lamports"),z.ns64("space"),Ne("programId")])},AdvanceNonceAccount:{index:4,layout:z.struct([z.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:z.struct([z.u32("instruction"),z.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:z.struct([z.u32("instruction"),Ne("authorized")])},AuthorizeNonceAccount:{index:7,layout:z.struct([z.u32("instruction"),Ne("authorized")])},Allocate:{index:8,layout:z.struct([z.u32("instruction"),z.ns64("space")])},AllocateWithSeed:{index:9,layout:z.struct([z.u32("instruction"),Ne("base"),Cn("seed"),z.ns64("space"),Ne("programId")])},AssignWithSeed:{index:10,layout:z.struct([z.u32("instruction"),Ne("base"),Cn("seed"),Ne("programId")])},TransferWithSeed:{index:11,layout:z.struct([z.u32("instruction"),Dn("lamports"),Cn("seed"),Ne("programId")])},UpgradeNonceAccount:{index:12,layout:z.struct([z.u32("instruction")])}});class zn{constructor(){}static createAccount(t){const e=At.Create,n=jt(e,{lamports:t.lamports,space:t.space,programId:gt(t.programId.toBuffer())});return new Lt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const i=At.TransferWithSeed;e=jt(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:gt(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=At.Transfer;e=jt(i,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Lt({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const i=At.AssignWithSeed;e=jt(i,{base:gt(t.basePubkey.toBuffer()),seed:t.seed,programId:gt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=At.Assign;e=jt(i,{programId:gt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Lt({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=At.CreateWithSeed,n=jt(e,{base:gt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:gt(t.programId.toBuffer())});let i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Lt({keys:i,programId:this.programId,data:n})}static createNonceAccount(t){const e=new Ot;"basePubkey"in t&&"seed"in t?e.add(zn.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Io,programId:this.programId})):e.add(zn.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Io,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=At.InitializeNonceAccount,n=jt(e,{authorized:gt(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Fs,isSigner:!1,isWritable:!1},{pubkey:jo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Lt(i)}static nonceAdvance(t){const e=At.AdvanceNonceAccount,n=jt(e),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Fs,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Lt(i)}static nonceWithdraw(t){const e=At.WithdrawNonceAccount,n=jt(e,{lamports:t.lamports});return new Lt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Fs,isSigner:!1,isWritable:!1},{pubkey:jo,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=At.AuthorizeNonceAccount,n=jt(e,{authorized:gt(t.newAuthorizedPubkey.toBuffer())});return new Lt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const i=At.AllocateWithSeed;e=jt(i,{base:gt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:gt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=At.Allocate;e=jt(i,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Lt({keys:n,programId:this.programId,data:e})}}zn.programId=new me("11111111111111111111111111111111");new me("BPFLoader2111111111111111111111111111111111");function eh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Us,Co;function th(){if(Co)return Us;Co=1;var r=Object.prototype.toString,t=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function e(n,i){var s,a,l,d,g,x,b;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),i);if(b=r.call(n),b==="[object Array]"){for(l="[",a=n.length-1,s=0;s<a;s++)l+=e(n[s],!0)+",";return a>-1&&(l+=e(n[s],!0)),l+"]"}else if(b==="[object Object]"){for(d=t(n).sort(),a=d.length,l="",s=0;s<a;)g=d[s],x=e(n[g],!1),x!==void 0&&(l&&(l+=","),l+=JSON.stringify(g)+":"+x),s++;return"{"+l+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Us=function(n){var i=e(n,!1);if(i!==void 0)return""+i},Us}var nh=th(),_o=eh(nh);const Hn=32;function qs(r){let t=0;for(;r>1;)r/=2,t++;return t}function rh(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class sh{constructor(t,e,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=qs(rh(t+Hn+1))-qs(Hn)-1,n=this.getSlotsInEpoch(e),i=t-(n-Hn);return[e,i]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=e%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Hn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+qs(Hn)):this.slotsPerEpoch}}var ih=globalThis.fetch;class oh extends Ad{constructor(t,e,n){const i=s=>{const a=Nd(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,t,e,n),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function ah(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Mo=56;class To{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=ah(ch,t),n=t.length-Mo;dt(n>=0,"lookup table is invalid"),dt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=z.struct([z.seq(Ne(),i,"addresses")]).decode(t.slice(Mo));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new me(e.authority[0]):void 0,addresses:s.map(a=>new me(a))}}}const ch={index:1,layout:z.struct([z.u32("typeIndex"),Dn("deactivationSlot"),z.nu64("lastExtendedSlot"),z.u8("lastExtendedStartIndex"),z.u8(),z.seq(Ne(),z.offset(z.u8(),-1),"authority")])},lh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function uh(r){const t=r.match(lh);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,i,s]=t,a=r.startsWith("https:")?"wss:":"ws:",l=i==null?null:parseInt(i.slice(1),10),d=l==null?"":`:${l+1}`;return`${a}//${n}${d}${s}`}const De=rr(ki(me),ie(),r=>new me(r)),Ja=Ei([ie(),Ue("base64")]),Ni=rr(ki(Be.Buffer),Ja,r=>Be.Buffer.from(r[0],"base64")),dh=30*1e3;function hh(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Me(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...i}=r;t=n,e=i}return{commitment:t,config:e}}function Ro(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Xa(r){return Bt([re({jsonrpc:Ue("2.0"),id:ie(),result:r}),re({jsonrpc:Ue("2.0"),id:ie(),error:re({code:$n(),message:ie(),data:ge(Xu())})})])}const fh=Xa($n());function Ee(r){return rr(Xa(r),fh,t=>"error"in t?t:{...t,result:ae(t.result,r)})}function We(r){return Ee(re({context:re({slot:X()}),value:r}))}function Wr(r){return re({context:re({slot:X()}),value:r})}function Ds(r,t){return r===0?new Mr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new me(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:xt.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new pn(t)}const ph=re({foundation:X(),foundationTerm:X(),initial:X(),taper:X(),terminal:X()}),mh=Ee(ce(ue(re({epoch:X(),effectiveSlot:X(),amount:X(),postBalance:X(),commission:ge(ue(X()))})))),gh=ce(re({slot:X(),prioritizationFee:X()})),xh=re({total:X(),validator:X(),foundation:X(),epoch:X()}),yh=re({epoch:X(),slotIndex:X(),slotsInEpoch:X(),absoluteSlot:X(),blockHeight:ge(X()),transactionCount:ge(X())}),bh=re({slotsPerEpoch:X(),leaderScheduleSlotOffset:X(),warmup:Kt(),firstNormalEpoch:X(),firstNormalSlot:X()}),wh=Ta(ie(),ce(X())),Bn=ue(Bt([re({}),ie()])),vh=re({err:Bn}),Sh=Ue("receivedSignature"),kh=re({"solana-core":ie(),"feature-set":ge(X())}),Eh=re({program:ie(),programId:De,parsed:$n()}),Bh=re({programId:De,accounts:ce(De),data:ie()}),Lo=We(re({err:ue(Bt([re({}),ie()])),logs:ue(ce(ie())),accounts:ge(ue(ce(ue(re({executable:Kt(),owner:ie(),lamports:X(),data:ce(ie()),rentEpoch:ge(X())}))))),unitsConsumed:ge(X()),returnData:ge(ue(re({programId:ie(),data:Ei([ie(),Ue("base64")])}))),innerInstructions:ge(ue(ce(re({index:X(),instructions:ce(Bt([Eh,Bh]))}))))})),Nh=We(re({byIdentity:Ta(ie(),ce(X())),range:re({firstSlot:X(),lastSlot:X()})}));function jh(r,t,e,n,i,s){const a=e||ih;let l;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return n&&(d=async(x,b)=>{const C=await new Promise((B,M)=>{try{n(x,b,(k,S)=>B([k,S]))}catch(k){M(k)}});return await a(...C)}),new Sd(async(x,b)=>{const C={method:"POST",body:x,agent:l,headers:Object.assign({"Content-Type":"application/json"},t||{},Af)};try{let B=5,M,k=500;for(;d?M=await d(r,C):M=await a(r,C),!(M.status!==429||i===!0||(B-=1,B===0));)console.error(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${k}ms delay...`),await In(k),k*=2;const S=await M.text();M.ok?b(null,S):b(new Error(`${M.status} ${M.statusText}: ${S}`))}catch(B){B instanceof Error&&b(B)}},{})}function Ah(r){return(t,e)=>new Promise((n,i)=>{r.request(t,e,(s,a)=>{if(s){i(s);return}n(a)})})}function Ih(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const i=t.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}e(a)})})}const Ch=Ee(ph),_h=Ee(xh),Mh=Ee(gh),Th=Ee(yh),Rh=Ee(bh),Lh=Ee(wh),Ph=Ee(X()),Oh=We(re({total:X(),circulating:X(),nonCirculating:X(),nonCirculatingAccounts:ce(De)})),ci=re({amount:ie(),uiAmount:ue(X()),decimals:X(),uiAmountString:ge(ie())}),Fh=We(ce(re({address:De,amount:ie(),uiAmount:ue(X()),decimals:X(),uiAmountString:ge(ie())}))),Uh=We(ce(re({pubkey:De,account:re({executable:Kt(),owner:De,lamports:X(),data:Ni,rentEpoch:X()})}))),li=re({program:ie(),parsed:$n(),space:X()}),qh=We(ce(re({pubkey:De,account:re({executable:Kt(),owner:De,lamports:X(),data:li,rentEpoch:X()})}))),Dh=We(ce(re({lamports:X(),address:De}))),Jn=re({executable:Kt(),owner:De,lamports:X(),data:Ni,rentEpoch:X()}),zh=re({pubkey:De,account:Jn}),$h=rr(Bt([ki(Be.Buffer),li]),Bt([Ja,li]),r=>Array.isArray(r)?ae(r,Ni):r),ui=re({executable:Kt(),owner:De,lamports:X(),data:$h,rentEpoch:X()}),Kh=re({pubkey:De,account:ui}),Wh=re({state:Bt([Ue("active"),Ue("inactive"),Ue("activating"),Ue("deactivating")]),active:X(),inactive:X()}),Hh=Ee(ce(re({signature:ie(),slot:X(),err:Bn,memo:ue(ie()),blockTime:ge(ue(X()))}))),Vh=Ee(ce(re({signature:ie(),slot:X(),err:Bn,memo:ue(ie()),blockTime:ge(ue(X()))}))),Gh=re({subscription:X(),result:Wr(Jn)}),Zh=re({pubkey:De,account:Jn}),Yh=re({subscription:X(),result:Wr(Zh)}),Jh=re({parent:X(),slot:X(),root:X()}),Xh=re({subscription:X(),result:Jh}),Qh=Bt([re({type:Bt([Ue("firstShredReceived"),Ue("completed"),Ue("optimisticConfirmation"),Ue("root")]),slot:X(),timestamp:X()}),re({type:Ue("createdBank"),parent:X(),slot:X(),timestamp:X()}),re({type:Ue("frozen"),slot:X(),timestamp:X(),stats:re({numTransactionEntries:X(),numSuccessfulTransactions:X(),numFailedTransactions:X(),maxTransactionsPerEntry:X()})}),re({type:Ue("dead"),slot:X(),timestamp:X(),err:ie()})]),ef=re({subscription:X(),result:Qh}),tf=re({subscription:X(),result:Wr(Bt([vh,Sh]))}),nf=re({subscription:X(),result:X()}),rf=re({pubkey:ie(),gossip:ue(ie()),tpu:ue(ie()),rpc:ue(ie()),version:ue(ie())}),Po=re({votePubkey:ie(),nodePubkey:ie(),activatedStake:X(),epochVoteAccount:Kt(),epochCredits:ce(Ei([X(),X(),X()])),commission:X(),lastVote:X(),rootSlot:ue(X())}),sf=Ee(re({current:ce(Po),delinquent:ce(Po)})),of=Bt([Ue("processed"),Ue("confirmed"),Ue("finalized")]),af=re({slot:X(),confirmations:ue(X()),err:Bn,confirmationStatus:ge(of)}),cf=We(ce(ue(af))),lf=Ee(X()),Qa=re({accountKey:De,writableIndexes:ce(X()),readonlyIndexes:ce(X())}),ji=re({signatures:ce(ie()),message:re({accountKeys:ce(ie()),header:re({numRequiredSignatures:X(),numReadonlySignedAccounts:X(),numReadonlyUnsignedAccounts:X()}),instructions:ce(re({accounts:ce(X()),data:ie(),programIdIndex:X()})),recentBlockhash:ie(),addressTableLookups:ge(ce(Qa))})}),ec=re({pubkey:De,signer:Kt(),writable:Kt(),source:ge(Bt([Ue("transaction"),Ue("lookupTable")]))}),tc=re({accountKeys:ce(ec),signatures:ce(ie())}),nc=re({parsed:$n(),program:ie(),programId:De}),rc=re({accounts:ce(De),data:ie(),programId:De}),uf=Bt([rc,nc]),df=Bt([re({parsed:$n(),program:ie(),programId:ie()}),re({accounts:ce(ie()),data:ie(),programId:ie()})]),sc=rr(uf,df,r=>"accounts"in r?ae(r,rc):ae(r,nc)),ic=re({signatures:ce(ie()),message:re({accountKeys:ce(ec),instructions:ce(sc),recentBlockhash:ie(),addressTableLookups:ge(ue(ce(Qa)))})}),Tr=re({accountIndex:X(),mint:ie(),owner:ge(ie()),programId:ge(ie()),uiTokenAmount:ci}),oc=re({writable:ce(De),readonly:ce(De)}),Hr=re({err:Bn,fee:X(),innerInstructions:ge(ue(ce(re({index:X(),instructions:ce(re({accounts:ce(X()),data:ie(),programIdIndex:X()}))})))),preBalances:ce(X()),postBalances:ce(X()),logMessages:ge(ue(ce(ie()))),preTokenBalances:ge(ue(ce(Tr))),postTokenBalances:ge(ue(ce(Tr))),loadedAddresses:ge(oc),computeUnitsConsumed:ge(X())}),Ai=re({err:Bn,fee:X(),innerInstructions:ge(ue(ce(re({index:X(),instructions:ce(sc)})))),preBalances:ce(X()),postBalances:ce(X()),logMessages:ge(ue(ce(ie()))),preTokenBalances:ge(ue(ce(Tr))),postTokenBalances:ge(ue(ce(Tr))),loadedAddresses:ge(oc),computeUnitsConsumed:ge(X())}),Kn=Bt([Ue(0),Ue("legacy")]),Nn=re({pubkey:ie(),lamports:X(),postBalance:ue(X()),rewardType:ue(ie()),commission:ge(ue(X()))}),hf=Ee(ue(re({blockhash:ie(),previousBlockhash:ie(),parentSlot:X(),transactions:ce(re({transaction:ji,meta:ue(Hr),version:ge(Kn)})),rewards:ge(ce(Nn)),blockTime:ue(X()),blockHeight:ue(X())}))),ff=Ee(ue(re({blockhash:ie(),previousBlockhash:ie(),parentSlot:X(),rewards:ge(ce(Nn)),blockTime:ue(X()),blockHeight:ue(X())}))),pf=Ee(ue(re({blockhash:ie(),previousBlockhash:ie(),parentSlot:X(),transactions:ce(re({transaction:tc,meta:ue(Hr),version:ge(Kn)})),rewards:ge(ce(Nn)),blockTime:ue(X()),blockHeight:ue(X())}))),mf=Ee(ue(re({blockhash:ie(),previousBlockhash:ie(),parentSlot:X(),transactions:ce(re({transaction:ic,meta:ue(Ai),version:ge(Kn)})),rewards:ge(ce(Nn)),blockTime:ue(X()),blockHeight:ue(X())}))),gf=Ee(ue(re({blockhash:ie(),previousBlockhash:ie(),parentSlot:X(),transactions:ce(re({transaction:tc,meta:ue(Ai),version:ge(Kn)})),rewards:ge(ce(Nn)),blockTime:ue(X()),blockHeight:ue(X())}))),xf=Ee(ue(re({blockhash:ie(),previousBlockhash:ie(),parentSlot:X(),rewards:ge(ce(Nn)),blockTime:ue(X()),blockHeight:ue(X())}))),yf=Ee(ue(re({blockhash:ie(),previousBlockhash:ie(),parentSlot:X(),transactions:ce(re({transaction:ji,meta:ue(Hr)})),rewards:ge(ce(Nn)),blockTime:ue(X())}))),Oo=Ee(ue(re({blockhash:ie(),previousBlockhash:ie(),parentSlot:X(),signatures:ce(ie()),blockTime:ue(X())}))),zs=Ee(ue(re({slot:X(),meta:ue(Hr),blockTime:ge(ue(X())),transaction:ji,version:ge(Kn)}))),ur=Ee(ue(re({slot:X(),transaction:ic,meta:ue(Ai),blockTime:ge(ue(X())),version:ge(Kn)}))),bf=We(re({blockhash:ie(),lastValidBlockHeight:X()})),wf=We(Kt()),vf=re({slot:X(),numTransactions:X(),numSlots:X(),samplePeriodSecs:X()}),Sf=Ee(ce(vf)),kf=We(ue(re({feeCalculator:re({lamportsPerSignature:X()})}))),Ef=Ee(ie()),Bf=Ee(ie()),Nf=re({err:Bn,logs:ce(ie()),signature:ie()}),jf=re({result:Wr(Nf),subscription:X()}),Af={"solana-client":"js/1.0.0-maintenance"};class ac{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async x=>{const{commitment:b,config:C}=Me(x),B=this._buildArgs([],b,void 0,C),M=_o(B);return g[M]=g[M]??(async()=>{try{const k=await this._rpcRequest("getBlockHeight",B),S=ae(k,Ee(X()));if("error"in S)throw new fe(S.error,"failed to get block height information");return S.result}finally{delete g[M]}})(),await g[M]}})();let n,i,s,a,l,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,i=e.httpHeaders,s=e.fetch,a=e.fetchMiddleware,l=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=hh(t),this._rpcWsEndpoint=n||uh(t),this._rpcClient=jh(t,i,s,a,l,d),this._rpcRequest=Ah(this._rpcClient),this._rpcBatchRequest=Ih(this._rpcClient),this._rpcWebSocket=new oh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgs([t.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),l=ae(a,We(X()));if("error"in l)throw new fe(l.error,`failed to get balance for ${t.toBase58()}`);return l.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=ae(e,Ee(ue(X())));if("error"in n)throw new fe(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=ae(t,Ee(X()));if("error"in e)throw new fe(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=ae(t,Ph);if("error"in e)throw new fe(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),i=ae(n,Oh);if("error"in i)throw new fe(i.error,"failed to get supply");return i.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenSupply",n),s=ae(i,We(ci));if("error"in s)throw new fe(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenAccountBalance",n),s=ae(i,We(ci));if("error"in s)throw new fe(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,n){const{commitment:i,config:s}=Me(n);let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const l=this._buildArgs(a,i,"base64",s),d=await this._rpcRequest("getTokenAccountsByOwner",l),g=ae(d,Uh);if("error"in g)throw new fe(g.error,`failed to get token accounts owned by account ${t.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(t,e,n){let i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),l=ae(a,qh);if("error"in l)throw new fe(l.error,`failed to get token accounts owned by account ${t.toBase58()}`);return l.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],i=await this._rpcRequest("getLargestAccounts",n),s=ae(i,Dh);if("error"in s)throw new fe(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenLargestAccounts",n),s=ae(i,Fh);if("error"in s)throw new fe(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgs([t.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),l=ae(a,We(ue(Jn)));if("error"in l)throw new fe(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getParsedAccountInfo(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgs([t.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),l=ae(a,We(ue(ui)));if("error"in l)throw new fe(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:i}=Me(e),s=t.map(g=>g.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),l=await this._rpcRequest("getMultipleAccounts",a),d=ae(l,We(ce(ue(ui))));if("error"in d)throw new fe(d.error,`failed to get info for accounts ${s}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:i}=Me(e),s=t.map(g=>g.toBase58()),a=this._buildArgs([s],n,"base64",i),l=await this._rpcRequest("getMultipleAccounts",a),d=ae(l,We(ce(ue(Jn))));if("error"in d)throw new fe(d.error,`failed to get info for accounts ${s}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:i,config:s}=Me(e),a=this._buildArgs([t.toBase58()],i,void 0,{...s,epoch:n??s?.epoch}),l=await this._rpcRequest("getStakeActivation",a),d=ae(l,Ee(Wh));if("error"in d)throw new fe(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:n,config:i}=Me(e),{encoding:s,...a}=i||{},l=this._buildArgs([t.toBase58()],n,s||"base64",{...a,...a.filters?{filters:Ro(a.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",l),g=ce(zh),x=a.withContext===!0?ae(d,We(g)):ae(d,Ee(g));if("error"in x)throw new fe(x.error,`failed to get accounts owned by program ${t.toBase58()}`);return x.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgs([t.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),l=ae(a,Ee(ce(Kh)));if("error"in l)throw new fe(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async confirmTransaction(t,e){let n;if(typeof t=="string")n=t;else{const s=t;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);n=s.signature}let i;try{i=xt.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return dt(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,i,s=!1;const a=new Promise((d,g)=>{try{n=this.onSignature(e,(b,C)=>{n=void 0;const B={context:C,value:b};d({__type:rn.PROCESSED,response:B})},t);const x=new Promise(b=>{n==null?b():i=this._onSubscriptionStateChange(n,C=>{C==="subscribed"&&b()})});(async()=>{if(await x,s)return;const b=await this.getSignatureStatus(e);if(s||b==null)return;const{context:C,value:B}=b;if(B!=null)if(B?.err)g(B.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(B.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(B.confirmationStatus==="processed"||B.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,d({__type:rn.PROCESSED,response:{context:C,value:B}})}})()}catch(x){g(x)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(b=>{const C=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let B=await C();if(!s){for(;B<=n;)if(await In(1e3),s||(B=await C(),s))return;b({__type:rn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),g=this.getCancellationPromise(e);let x;try{const b=await Promise.race([g,d,a]);if(b.__type===rn.PROCESSED)x=b.response;else throw new Ha(i)}finally{s=!0,l()}return x}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let l=!1;const d=new Promise(B=>{let M=s,k=null;const S=async()=>{try{const{context:F,value:L}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return k=F.slot,L?.nonce}catch{return M}};(async()=>{if(M=await S(),!l)for(;;){if(s!==M){B({__type:rn.NONCE_INVALID,slotInWhichNonceDidAdvance:k});return}if(await In(2e3),l||(M=await S(),l))return}})()}),{abortConfirmation:g,confirmationPromise:x}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),b=this.getCancellationPromise(e);let C;try{const B=await Promise.race([b,x,d]);if(B.__type===rn.PROCESSED)C=B.response;else{let M;for(;;){const k=await this.getSignatureStatus(a);if(k==null)break;if(k.context.slot<(B.slotInWhichNonceDidAdvance??n)){await In(400);continue}M=k;break}if(M?.value){const k=t||"finalized",{confirmationStatus:S}=M.value;switch(k){case"processed":case"recent":if(S!=="processed"&&S!=="confirmed"&&S!=="finalized")throw new Gn(a);break;case"confirmed":case"single":case"singleGossip":if(S!=="confirmed"&&S!=="finalized")throw new Gn(a);break;case"finalized":case"max":case"root":if(S!=="finalized")throw new Gn(a);break;default:}C={context:M.context,value:{err:M.value.err}}}else throw new Gn(a)}}finally{l=!0,g()}return C}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const i=new Promise(d=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>d({__type:rn.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let l;try{const d=await Promise.race([a,i]);if(d.__type===rn.PROCESSED)l=d.response;else throw new Va(e,d.timeoutMs/1e3)}finally{clearTimeout(n),s()}return l}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=ae(t,Ee(ce(rf)));if("error"in e)throw new fe(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),i=ae(n,sf);if("error"in i)throw new fe(i.error,"failed to get vote accounts");return i.result}async getSlot(t){const{commitment:e,config:n}=Me(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getSlot",i),a=ae(s,Ee(X()));if("error"in a)throw new fe(a.error,"failed to get slot");return a.result}async getSlotLeader(t){const{commitment:e,config:n}=Me(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=ae(s,Ee(ie()));if("error"in a)throw new fe(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){const n=[t,e],i=await this._rpcRequest("getSlotLeaders",n),s=ae(i,Ee(ce(De)));if("error"in s)throw new fe(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:n,value:i}=await this.getSignatureStatuses([t],e);dt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const i=await this._rpcRequest("getSignatureStatuses",n),s=ae(i,cf);if("error"in s)throw new fe(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:n}=Me(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=ae(s,Ee(X()));if("error"in a)throw new fe(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),i=ae(n,Ch);if("error"in i)throw new fe(i.error,"failed to get inflation");return i.result}async getInflationReward(t,e,n){const{commitment:i,config:s}=Me(n),a=this._buildArgs([t.map(g=>g.toBase58())],i,void 0,{...s,epoch:e??s?.epoch}),l=await this._rpcRequest("getInflationReward",a),d=ae(l,mh);if("error"in d)throw new fe(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=ae(t,_h);if("error"in e)throw new fe(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Me(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=ae(s,Th);if("error"in a)throw new fe(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=ae(t,Rh);if("error"in e)throw new fe(e.error,"failed to get epoch schedule");const n=e.result;return new sh(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=ae(t,Lh);if("error"in e)throw new fe(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=ae(i,lf);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=ae(e,Sf);if("error"in n)throw new fe(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=ae(i,kf);if("error"in s)throw new fe(s.error,"failed to get fee calculator");const{context:a,value:l}=s.result;return{context:a,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(t,e){const n=gt(t.serialize()).toString("base64"),i=this._buildArgs([n],e),s=await this._rpcRequest("getFeeForMessage",i),a=ae(s,We(ue(X())));if("error"in a)throw new fe(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(a=>a.toBase58()),n=e?.length?[e]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=ae(i,Mh);if("error"in s)throw new fe(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Me(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=ae(s,bf);if("error"in a)throw new fe(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgs([t],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),l=ae(a,wf);if("error"in l)throw new fe(l.error,"failed to determine if the blockhash `"+t+"`is valid");return l.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=ae(t,Ee(kh));if("error"in e)throw new fe(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=ae(t,Ee(ie()));if("error"in e)throw new fe(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgsAtLeastConfirmed([t],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const l=ae(a,pf);if("error"in l)throw l.error;return l.result}case"none":{const l=ae(a,ff);if("error"in l)throw l.error;return l.result}default:{const l=ae(a,hf);if("error"in l)throw l.error;const{result:d}=l;return d?{...d,transactions:d.transactions.map(({transaction:g,meta:x,version:b})=>({meta:x,transaction:{...g,message:Ds(b,g.message)},version:b}))}:null}}}catch(l){throw new fe(l,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const l=ae(a,gf);if("error"in l)throw l.error;return l.result}case"none":{const l=ae(a,xf);if("error"in l)throw l.error;return l.result}default:{const l=ae(a,mf);if("error"in l)throw l.error;return l.result}}}catch(l){throw new fe(l,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:l,...d}=t;n=l,e=d}const i=this._buildArgs([],n,"base64",e),s=await this._rpcRequest("getBlockProduction",i),a=ae(s,Nh);if("error"in a)throw new fe(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgsAtLeastConfirmed([t],n,void 0,i),a=await this._rpcRequest("getTransaction",s),l=ae(a,zs);if("error"in l)throw new fe(l.error,"failed to get transaction");const d=l.result;return d&&{...d,transaction:{...d.transaction,message:Ds(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:i}=Me(e),s=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),l=ae(a,ur);if("error"in l)throw new fe(l.error,"failed to get transaction");return l.result}async getParsedTransactions(t,e){const{commitment:n,config:i}=Me(e),s=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(d=>{const g=ae(d,ur);if("error"in g)throw new fe(g.error,"failed to get transactions");return g.result})}async getTransactions(t,e){const{commitment:n,config:i}=Me(e),s=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(d=>{const g=ae(d,zs);if("error"in g)throw new fe(g.error,"failed to get transactions");const x=g.result;return x&&{...x,transaction:{...x.transaction,message:Ds(x.version,x.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getBlock",n),s=ae(i,yf);if("error"in s)throw new fe(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+t+" not found");const l={...a,transactions:a.transactions.map(({transaction:d,meta:g})=>{const x=new pn(d.message);return{meta:g,transaction:{...d,message:x}}})};return{...l,transactions:l.transactions.map(({transaction:d,meta:g})=>({meta:g,transaction:Ot.populate(d.message,d.signatures)}))}}async getBlocks(t,e,n){const i=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),s=await this._rpcRequest("getBlocks",i),a=ae(s,Ee(ce(X())));if("error"in a)throw new fe(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=ae(i,Oo);if("error"in s)throw new fe(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=ae(i,Oo);if("error"in s)throw new fe(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getTransaction",n),s=ae(i,zs);if("error"in s)throw new fe(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const l=new pn(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:Ot.populate(l,d)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=ae(i,ur);if("error"in s)throw new fe(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const n=t.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(a=>{const l=ae(a,ur);if("error"in l)throw new fe(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(t,e,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(e--,!(e<=0||e<s));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(i.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const d=await this.getConfirmedBlockSignatures(n);d.signatures.length>0&&(i.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=ae(s,Hh);if("error"in a)throw new fe(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,n){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",i),a=ae(s,Vh);if("error"in a)throw new fe(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){const{context:n,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=new To({key:t,state:To.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(t,e){const{context:n,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=Bi.fromAccountData(i.data)),{context:n,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),i=ae(n,Ef);if("error"in i)throw new fe(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await In(100);const n=Date.now()-this._blockhashInfo.lastFetch>=dh;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await In(Xd/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Me(t),i=this._buildArgs([],e,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=ae(s,We(X()));if("error"in a)throw new fe(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,n){if("message"in t){const k=t.serialize(),S=Be.Buffer.from(k).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const F=e||{};F.encoding="base64","commitment"in F||(F.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(F.innerInstructions=e.innerInstructions);const L=[S,F],I=await this._rpcRequest("simulateTransaction",L),U=ae(I,Lo);if("error"in U)throw new Error("failed to simulate transaction: "+U.error.message);return U.result}let i;if(t instanceof Ot){let M=t;i=new Ot,i.feePayer=M.feePayer,i.instructions=t.instructions,i.nonceInfo=M.nonceInfo,i.signatures=M.signatures}else i=Ot.populate(t),i._message=i._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let M=this._disableBlockhashCaching;for(;;){const k=await this._blockhashWithExpiryBlockHeight(M);if(i.lastValidBlockHeight=k.lastValidBlockHeight,i.recentBlockhash=k.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const S=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(S)&&!this._blockhashInfo.transactionSignatures.includes(S)){this._blockhashInfo.simulatedSignatures.push(S);break}else M=!0}}const a=i._compile(),l=a.serialize(),g=i._serialize(l).toString("base64"),x={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:a.nonProgramIds()).map(k=>k.toBase58());x.accounts={encoding:"base64",addresses:M}}s&&(x.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(x.innerInstructions=e.innerInstructions);const b=[g,x],C=await this._rpcRequest("simulateTransaction",b),B=ae(C,Lo);if("error"in B){let M;if("data"in B.error&&(M=B.error.data.logs,M&&Array.isArray(M))){const k=`
    `,S=k+M.join(k);console.error(B.error.message,S)}throw new ai({action:"simulate",signature:"",transactionMessage:B.error.message,logs:M})}return B.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const a=t.serialize();return await this.sendRawTransaction(a,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(t.nonceInfo)t.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=l.lastValidBlockHeight,t.recentBlockhash=l.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const s=t.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(t,e){const n=gt(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},i=e&&e.skipPreflight,s=i===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[t,n],l=await this._rpcRequest("sendTransaction",a),d=ae(l,Bf);if("error"in d){let g;throw"data"in d.error&&(g=d.error.data.logs),new ai({action:i?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:g})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){const n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(s=>{try{s(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const l=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=i.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:s,error:l}),!e())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(l){if(l instanceof Error&&console.error(`${a} error:`,l.message),!e())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(i=>{try{i(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=ae(t,Gh);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,i=_o([t.method,e]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];dt(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:i,config:s}=Me(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=ae(t,Yh);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,i){const{commitment:s,config:a}=Me(n),l=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",a||(i?{filters:Ro(i)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=ae(t,jf);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=ae(t,Xh);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=ae(t,ef);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,i){const s=e||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,n,i){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,i)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=ae(t,tf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const i=this._buildArgs([t],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,l)=>{if(a.type==="status"){e(a.result,l);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(t,e,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([t],i,void 0,s),l=this._makeSubscription({callback:(d,g)=>{e(d,g);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return l}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=ae(t,nf);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class $t{constructor(t){this._keypair=void 0,this._keypair=t??Eo()}static generate(){return new $t(Eo())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const n=t.slice(32,64);if(!e||!e.skipValidation){const i=t.slice(0,32),s=oi(i);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new $t({publicKey:n,secretKey:t})}static fromSeed(t){const e=oi(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),new $t({publicKey:e,secretKey:n})}get publicKey(){return new me(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:z.struct([z.u32("instruction"),Dn("recentSlot"),z.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:z.struct([z.u32("instruction")])},ExtendLookupTable:{index:2,layout:z.struct([z.u32("instruction"),Dn(),z.seq(Ne(),z.offset(z.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:z.struct([z.u32("instruction")])},CloseLookupTable:{index:4,layout:z.struct([z.u32("instruction")])}});new me("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:z.struct([z.u8("instruction"),z.u32("units"),z.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:z.struct([z.u8("instruction"),z.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:z.struct([z.u8("instruction"),z.u32("units")])},SetComputeUnitPrice:{index:3,layout:z.struct([z.u8("instruction"),Dn("microLamports")])}});new me("ComputeBudget111111111111111111111111111111");z.struct([z.u8("numSignatures"),z.u8("padding"),z.u16("signatureOffset"),z.u16("signatureInstructionIndex"),z.u16("publicKeyOffset"),z.u16("publicKeyInstructionIndex"),z.u16("messageDataOffset"),z.u16("messageDataSize"),z.u16("messageInstructionIndex")]);new me("Ed25519SigVerify111111111111111111111111111");Fd.utils.isValidPrivateKey;z.struct([z.u8("numSignatures"),z.u16("signatureOffset"),z.u8("signatureInstructionIndex"),z.u16("ethAddressOffset"),z.u8("ethAddressInstructionIndex"),z.u16("messageDataOffset"),z.u16("messageDataSize"),z.u8("messageInstructionIndex"),z.blob(20,"ethAddress"),z.blob(64,"signature"),z.u8("recoveryId")]);new me("KeccakSecp256k11111111111111111111111111111");var cc;new me("StakeConfig11111111111111111111111111111111");class lc{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}cc=lc;lc.default=new cc(0,0,me.default);Object.freeze({Initialize:{index:0,layout:z.struct([z.u32("instruction"),Kd(),Wd()])},Authorize:{index:1,layout:z.struct([z.u32("instruction"),Ne("newAuthorized"),z.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:z.struct([z.u32("instruction")])},Split:{index:3,layout:z.struct([z.u32("instruction"),z.ns64("lamports")])},Withdraw:{index:4,layout:z.struct([z.u32("instruction"),z.ns64("lamports")])},Deactivate:{index:5,layout:z.struct([z.u32("instruction")])},Merge:{index:7,layout:z.struct([z.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:z.struct([z.u32("instruction"),Ne("newAuthorized"),z.u32("stakeAuthorizationType"),Cn("authoritySeed"),Ne("authorityOwner")])}});new me("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:z.struct([z.u32("instruction"),Hd()])},Authorize:{index:1,layout:z.struct([z.u32("instruction"),Ne("newAuthorized"),z.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:z.struct([z.u32("instruction"),z.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:z.struct([z.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:z.struct([z.u32("instruction"),Vd()])}});new me("Vote111111111111111111111111111111111111111");new me("Va1idator1nfo111111111111111111111111111111");re({name:ie(),website:ge(ie()),details:ge(ie()),iconUrl:ge(ie()),keybaseUsername:ge(ie())});new me("Vote111111111111111111111111111111111111111");z.struct([Ne("nodePubkey"),Ne("authorizedWithdrawer"),z.u8("commission"),z.nu64(),z.seq(z.struct([z.nu64("slot"),z.u32("confirmationCount")]),z.offset(z.u32(),-8),"votes"),z.u8("rootSlotValid"),z.nu64("rootSlot"),z.nu64(),z.seq(z.struct([z.nu64("epoch"),Ne("authorizedVoter")]),z.offset(z.u32(),-8),"authorizedVoters"),z.struct([z.seq(z.struct([Ne("authorizedPubkey"),z.nu64("epochOfLastAuthorizedSwitch"),z.nu64("targetEpoch")]),32,"buf"),z.nu64("idx"),z.u8("isEmpty")],"priorVoters"),z.nu64(),z.seq(z.struct([z.nu64("epoch"),z.nu64("credits"),z.nu64("prevCredits")]),z.offset(z.u32(),-8),"epochCredits"),z.struct([z.nu64("slot"),z.nu64("timestamp")],"lastTimestamp")]);const Xt=1e9;var $s,Fo;function If(){if(Fo)return $s;Fo=1;function r(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(e[a]!==255)throw new TypeError(s+" is ambiguous");e[a]=i}var l=t.length,d=t.charAt(0),g=Math.log(l)/Math.log(256),x=Math.log(256)/Math.log(l);function b(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var k=0,S=0,F=0,L=M.length;F!==L&&M[F]===0;)F++,k++;for(var I=(L-F)*x+1>>>0,U=new Uint8Array(I);F!==L;){for(var O=M[F],D=0,J=I-1;(O!==0||D<S)&&J!==-1;J--,D++)O+=256*U[J]>>>0,U[J]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");S=D,F++}for(var K=I-S;K!==I&&U[K]===0;)K++;for(var $=d.repeat(k);K<I;++K)$+=t.charAt(U[K]);return $}function C(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;for(var k=0,S=0,F=0;M[k]===d;)S++,k++;for(var L=(M.length-k)*g+1>>>0,I=new Uint8Array(L);M[k];){var U=e[M.charCodeAt(k)];if(U===255)return;for(var O=0,D=L-1;(U!==0||O<F)&&D!==-1;D--,O++)U+=l*I[D]>>>0,I[D]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");F=O,k++}for(var J=L-F;J!==L&&I[J]===0;)J++;for(var K=new Uint8Array(S+(L-J)),$=S;J!==L;)K[$++]=I[J++];return K}function B(M){var k=C(M);if(k)return k;throw new Error("Non-base"+l+" character")}return{encode:b,decodeUnsafe:C,decode:B}}return $s=r,$s}var Ks,Uo;function Cf(){return Uo||(Uo=1,Ks=If()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),Ks}var Vr=Cf();const _f=Xn(Vr);function qo(r,t){const e=String(r).includes(".")?String(r).split(".")[1].length:0,n=t&&String(t).includes(".")?String(t).split(".")[1].length:0;return Math.max(e,n)}function mn(r,t){return r.toFixed(t)}function Do(r){const t=r.trim();if(t==="")return{isValid:!0,number:null};const e=parseFloat(t);return{isValid:!isNaN(e),number:isNaN(e)?null:e}}function yt({label:r,icon:t,className:e="",helperText:n,type:i="text",step:s,min:a,max:l,isFeeInput:d=!1,isPercentInput:g=!1,allowEmpty:x=!1,suffix:b,onClick:C,onChange:B,onBlur:M,customSize:k,...S}){const F=k||"py-2";return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[o.jsxs("label",{className:"text-xs font-medium flex items-center gap-1.5 text-text-secondary",children:[t&&o.jsx(t,{className:`w-3.5 h-3.5 ${S.disabled?"text-accent/50":"text-accent"}`}),r]}),n&&o.jsx("span",{className:"text-xs text-text-secondary",children:n})]}),o.jsxs("div",{className:"relative",onClick:C,children:[i==="button"?o.jsxs("div",{className:`w-full bg-surface-dark rounded-md ${b?"pr-8":"pr-3"} pl-3 flex items-center text-xs font-medium outline-none border border-[var(--border-color)] transition-all ${S.disabled?"text-text-primary/50 hover:border-[var(--border-color)]":"text-text-primary hover:border-[var(--border-hover)]"} ${F} ${e} cursor-pointer`,children:[o.jsx("span",{className:"flex-1",children:S.value}),b&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:b})]}):o.jsx("input",{...S,type:i,step:s,min:a,max:l,inputMode:i==="number"?"decimal":"text",onBlur:L=>{const I=L.target.value.trim(),{isValid:U,number:O}=Do(I),D=a?parseFloat(String(a)):void 0,J=l?parseFloat(String(l)):void 0,K=s||"0.0001",$=qo(K,a),_=W=>{L.target.value=W;const G=new Event("change",{bubbles:!0});L.target.dispatchEvent(G)};if(g)!I||!U||!O||O<1?_(mn(1,2)):O>100?_(mn(100,2)):_(mn(O,2));else if(d&&D!==void 0)if(!I||!U||!O||O<D){const W=String(a).includes(".")?String(a).split(".")[1].length:0;_(mn(D,W))}else _(mn(O,$));else if(i==="number"&&I&&U&&O!==null){let W=O;D!==void 0&&O<D&&(W=D),J!==void 0&&O>J&&(W=J),_(mn(W,$))}else i==="number"&&!I&&!x&&D!==void 0&&_(mn(D,qo(K,a)));M?.(L)},onChange:L=>{(i!=="number"||L.target.value===""||Do(L.target.value).isValid)&&B?.(L)},className:`${k||`w-full bg-surface-dark rounded-md ${b?"pr-8":"pr-3"} pl-3 ${F}`} text-xs font-medium outline-none border border-[var(--border-color)] transition-all appearance-none ${S.disabled?"text-text-primary/50 hover:border-[var(--border-color)]":"text-text-primary hover:border-[var(--border-hover)] focus:border-accent"} ${e}`,onSelect:L=>L.stopPropagation()}),b&&typeof b=="string"&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-medium text-text-secondary pointer-events-none",children:b})]})]})}function uc(r){if(r.transactions&&typeof r.transactions=="object"){const t=r.transactions;delete t.quickBuyFee,delete t.quickBuyTip,delete t.quickBuySlippage}if(r.soundEffects&&typeof r.soundEffects=="object"){const t=r.soundEffects;["buySound","sellSound","consolidateSound","splitSound"].forEach(e=>{const n=t[e];typeof n=="string"&&n.includes("/")?t[e]=n.split("/").pop()?.replace(".mp3","")||"none":n==="off"&&(t[e]="none")})}if(r.customColors&&typeof r.customColors=="object"&&!Array.isArray(r.customColors)){const t=r.customColors;r.customColors=Object.values(t)}return r}const Mf=3e4,dc=r=>(r.wallets=Array.isArray(r.wallets)?r.wallets:[],r.keybinds=Array.isArray(r.keybinds)?r.keybinds:Array(5).fill(null).map(()=>({primary:"",secondary:""})),r),Ws=r=>{const t=uc(r),e=Ys(structuredClone(vr),t);return e.platforms=Ys(structuredClone(vr.platforms),e.platforms||{}),dc(e)},_e=Z.createContext(null);function Tf({children:r}){const[t,e]=Z.useState(vr),[n,i]=Z.useState(Date.now()),s=Z.useMemo(()=>[...Uc],[]),a=b=>{yn.set(b),i(Date.now())};Z.useEffect(()=>{(async()=>{try{const C=await yn.get(s),B=Ws(C);e(B),a(B),un(B.theme)}catch(C){console.error("Error loading settings:",C);const B=Ws({});e(B),a(B),un(B.theme)}})()},[s]),Z.useEffect(()=>{const C=setInterval(async()=>{if(Date.now()-n>=Mf)try{const B=await yn.get(s);if(!B||Object.keys(B).length===0)throw new Error("Failed to sync settings");const M=Ws(B);e(M),i(Date.now())}catch(B){console.error("Error syncing settings:",B)}},5e3);return()=>clearInterval(C)},[n,s]);const l=b=>{console.log("SettingsContext updateSettings called with:",b),e(C=>{const B=Ys(C,b),M=dc(B);return console.log("SettingsContext updated settings:",M),a(M),M})},d=(b,C,B,M)=>{e(k=>{const S=k.platforms[b],F=S[C],L={...k,platforms:{...k.platforms,[b]:{...S,[C]:{...F,[B]:M}}}};return a(L),L})},g=()=>{const b=structuredClone(vr);e(b),a(b),un(b.theme)},x=b=>{const C=uc(b);l(C)};return o.jsx(_e.Provider,{value:{settings:t,updateSettings:l,updatePlatformSettings:d,resetSettings:g,migrateAndUpdateSettings:x},children:r})}const zo=15;function Rf({isOpen:r,onClose:t,onAdd:e}){const{settings:n}=Z.useContext(_e),[i,s]=Z.useState(""),[a,l]=Z.useState(""),[d,g]=Z.useState(null),[x,b]=Z.useState(null),C=k=>{if(!k.trim())return null;try{const S=Vr.decode(k);return S.length!==64?null:$t.fromSecretKey(S).publicKey.toBase58()}catch{return null}},B=k=>{const S=k.target.value;if(l(S),g(null),S.trim()){const F=C(S);b(F),F||g("Invalid Solana private key format")}else b(null)},M=k=>{if(k.preventDefault(),!a.trim()){g("Private key is required");return}if(!x){g("Invalid private key format");return}if(n.wallets.some(F=>F.publicKey===x)){g("This wallet has already been added");return}const S=i.trim()||`Wallet ${n.wallets.length+1}`;e(S,a.trim(),x),s(""),l(""),b(null),g(null),t()};return o.jsx(Tt,{isOpen:r,onClose:t,title:"Add New Wallet",children:o.jsxs("form",{onSubmit:M,className:"space-y-4",children:[o.jsx(yt,{label:"Wallet Label",icon:ra,placeholder:"Enter wallet label (optional)",maxLength:zo,value:i,onChange:k=>{s(k.target.value),g(null)},helperText:`${i.length}/${zo}`,autoFocus:!0}),o.jsx(yt,{label:"Solana Base58 Private Key",icon:Pn,type:"password",placeholder:"Enter your private key",value:a,className:`transition-all duration-200 ${a?x?"border-emerald-500/50 hover:border-emerald-500/75 focus:border-emerald-500 ring-1 ring-emerald-500/20":"border-rose-500/70 hover:border-rose-500/90 focus:border-rose-500 ring-1 ring-rose-500/30":""}`,onChange:B}),d&&o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/20 rounded-md",children:[o.jsx(vn,{className:"w-4 h-4 text-red-500 shrink-0"}),o.jsx("p",{className:"text-xs text-red-500",children:d})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx(Et,{type:"button",onClick:t,variant:"secondary",size:"sm",className:"px-3 py-1.5",children:"Cancel"}),o.jsx(Et,{type:"submit",disabled:!x,variant:x?"primary":"secondary",size:"sm",className:`px-3 py-1.5 ${x?"":"bg-accent/30 text-white/50"}`,children:"Add Wallet"})]})]})})}function sr({isOpen:r,onClose:t,onConfirm:e,title:n,message:i,description:s,sections:a=[],confirmText:l="Confirm",isDangerous:d=!1,children:g,showDefaultContent:x=!0,disabled:b=!1}){return o.jsx(Tt,{isOpen:r,onClose:t,title:n,children:o.jsxs("div",{className:"space-y-4",children:[x&&o.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-md border ${d?"bg-red-500/10 border-red-500/20":"bg-amber-500/10 border-amber-500/20"}`,children:[o.jsx(Gs,{className:`w-5 h-5 shrink-0 mt-0.5 ${d?"text-red-500":"text-amber-500"}`}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:`text-sm font-medium ${d?"text-red-500":"text-amber-500"}`,children:n}),o.jsxs("div",{className:"text-xs leading-relaxed text-text-secondary space-y-2",children:[s&&o.jsx("p",{children:s}),i&&o.jsx("p",{children:i}),a.map((C,B)=>o.jsx("p",{children:C},B))]})]})]}),g,o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx(Et,{onClick:t,variant:"secondary",size:"sm",children:"Cancel"}),o.jsx(Et,{onClick:e,disabled:b,variant:"primary",size:"sm",className:d?"bg-red-500 text-white hover:bg-red-400":"",children:l})]})]})})}function Lf({isOpen:r,onClose:t,onConfirm:e,hasTokens:n,error:i}){const[s,a]=Z.useState(!1),[l,d]=Z.useState(!1),g=()=>{t(),a(!1),d(!1)},x=()=>{e(s)};return o.jsx(sr,{isOpen:r,onClose:g,onConfirm:x,title:"Burn Tokens",confirmText:s?"Burn Tokens":"Close Accounts",isDangerous:s,showDefaultContent:!1,disabled:s&&!l,children:o.jsxs("div",{className:"space-y-4",children:[i&&o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/20 rounded-md",children:[o.jsx(Gs,{className:"w-4 h-4 text-red-500 shrink-0"}),o.jsx("p",{className:"text-xs text-red-500",children:i})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-500/10 border border-red-500/20 rounded-md",children:[o.jsx(Gs,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-red-500",children:"Burn Tokens"}),o.jsx("div",{className:"text-xs text-text-secondary leading-relaxed",children:n?o.jsxs(o.Fragment,{children:[o.jsx("p",{children:"Some accounts contain token balances."}),o.jsx("p",{children:"Choose to either skip these accounts or burn their tokens and close accounts."})]}):o.jsx("p",{children:"This will burn any remaining tokens and close all accounts."})})]})]}),n&&o.jsxs("div",{className:"space-y-3 p-3 bg-surface-dark rounded-md border border-white/[0.05]",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:!s,onChange:()=>a(!1),className:"appearance-none w-4 h-4 bg-surface border border-white/[0.08] rounded-full relative before:absolute before:inset-0 before:m-auto before:w-2 before:h-2 before:rounded-full before:bg-accent before:scale-0 before:opacity-0 before:transition-all checked:before:scale-100 checked:before:opacity-100 checked:border-accent checked:bg-accent/10 hover:border-accent/50 hover:bg-accent/5 transition-all cursor-pointer"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium",children:"Skip Non-Empty Accounts"}),o.jsx("div",{className:"text-[11px] text-text-secondary mt-0.5",children:"Only burn tokens from accounts with zero balance"})]})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:s,onChange:()=>a(!0),className:"appearance-none w-4 h-4 bg-surface border border-white/[0.08] rounded-full relative before:absolute before:inset-0 before:m-auto before:w-2 before:h-2 before:rounded-full before:bg-accent before:scale-0 before:opacity-0 before:transition-all checked:before:scale-100 checked:before:opacity-100 checked:border-accent checked:bg-accent/10 hover:border-accent/50 hover:bg-accent/5 transition-all cursor-pointer"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-xs font-medium",children:"Burn & Close All"}),o.jsx("div",{className:"text-[11px] text-text-secondary mt-0.5",children:"Burn remaining tokens and close all accounts (except wSOL, USDC, USDT)"})]})]}),s&&o.jsxs("label",{className:"flex items-start gap-2 mt-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:l,onChange:b=>d(b.target.checked),className:"appearance-none shrink-0 mt-0.5 w-4 h-4 bg-surface border border-white/[0.08] rounded relative before:absolute before:inset-0 before:m-auto before:w-2 before:h-2 before:rounded-sm before:bg-accent before:scale-0 before:opacity-0 before:transition-all checked:before:scale-100 checked:before:opacity-100 checked:border-accent checked:bg-accent/10 hover:border-accent/50 hover:bg-accent/5 transition-all cursor-pointer"}),o.jsx("span",{className:"text-[11px] text-text-secondary",children:"I understand this will permanently burn all remaining token balances"})]})]})]})})}function Pf({isOpen:r,onClose:t,onConfirm:e,walletLabel:n}){const i=ye.useRef(null);ye.useEffect(()=>{if(r){const l=setTimeout(()=>i.current?.focus(),100);return()=>clearTimeout(l)}},[r]);const s=()=>{e(),t()};return o.jsx(sr,{isOpen:r,onClose:t,onConfirm:s,title:"Delete Wallet",description:`Are you sure you want to delete the wallet "${n}"?`,message:"This action cannot be undone. The wallet will be permanently removed.",confirmText:"Delete Wallet",isDangerous:!0})}const $o=15;function Of({isOpen:r,onClose:t,onSave:e,currentLabel:n,currentPublicKey:i}){const[s,a]=Z.useState(n),[l,d]=Z.useState(""),[g,x]=Z.useState(i),[b,C]=Z.useState(null);Z.useEffect(()=>{r&&(a(n),d(""),x(i),C(null))},[r,n,i]);const B=F=>{if(F.length<32)return null;try{const L=Vr.decode(F);return L.length!==64?null:new me($t.fromSecretKey(L).publicKey).toBase58()}catch{return null}},M=F=>{const L=F.target.value.trim();if(d(L),C(null),!L)return;const I=B(L);I?x(I):C("Invalid private key format")},k=F=>{if(F.preventDefault(),l&&!B(l)){C("Invalid private key format");return}e(s.trim()||n,l.trim(),l?g:i),t()},S=l?B(l):null;return o.jsx(Tt,{isOpen:r,onClose:t,title:"Edit Wallet",children:o.jsxs("form",{onSubmit:k,className:"space-y-4",children:[o.jsx(yt,{label:"Wallet Label",icon:ra,placeholder:"Enter wallet label",maxLength:$o,value:s,onChange:F=>a(F.target.value),helperText:`${s.length}/${$o}`,autoFocus:!0}),o.jsx(yt,{label:"New Private Key (Optional)",icon:Pn,type:"password",placeholder:"Enter new private key to update",value:l,className:`transition-all duration-200 ${l?S?"border-emerald-500/50 hover:border-emerald-500/75 focus:border-emerald-500 ring-1 ring-emerald-500/20":"border-rose-500/70 hover:border-rose-500/90 focus:border-rose-500 ring-1 ring-rose-500/30":""}`,onChange:M}),b&&o.jsx("p",{className:"text-xs text-rose-500",children:b}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx(Et,{type:"button",onClick:t,variant:"secondary",size:"sm",className:"px-3 py-1.5",children:"Cancel"}),o.jsx(Et,{type:"submit",variant:"primary",size:"sm",className:"px-3 py-1.5",children:"Save Changes"})]})]})})}function Ff({isOpen:r,onClose:t,onSave:e}){const{settings:n}=Z.useContext(_e),[i,s]=Z.useState(null),[a,l]=Z.useState(""),[d,g]=Z.useState(!1),[x,b]=Z.useState(!1),[C,B]=Z.useState(!1),[M,k]=Z.useState(!1),S=()=>{const K=n.wallets||[],$=new Set(K.map(W=>W.label?.match(/^Wallet (\d+)$/)?.[1]).filter(Boolean).map(Number));let _=1;for(;$.has(_);)_++;return _},F=()=>{const K=$t.generate(),$=S();s(K),l(`Wallet ${$}`),g(!1),B(!1),k(!1)};Z.useEffect(()=>{if(r){const K=$t.generate(),$=n.wallets||[],_=new Set($.map(G=>G.label?.match(/^Wallet (\d+)$/)?.[1]).filter(Boolean).map(Number));let W=1;for(;_.has(W);)W++;s(K),l(`Wallet ${W}`),g(!1),B(!1),k(!1)}},[r,n.wallets]);const L=()=>{b(!0),F(),b(!1)},I=async(K,$)=>{try{await navigator.clipboard.writeText(K),$==="private"?(B(!0),setTimeout(()=>B(!1),2e3)):(k(!0),setTimeout(()=>k(!1),2e3))}catch(_){console.error("Failed to copy:",_)}},U=()=>i?{publicKey:i.publicKey.toBase58(),privateKey:Vr.encode(i.secretKey)}:null,O=()=>{const K=U();K&&(e(a.trim(),K.privateKey,K.publicKey),t())},D=U(),J=D?"â€¢".repeat(D.privateKey.length):"";return o.jsx(Tt,{isOpen:r,onClose:t,title:"New Solana Wallet",children:o.jsx("div",{className:"space-y-3",children:i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[o.jsxs("label",{className:"text-xs font-medium flex items-center gap-1.5 text-text-secondary",children:[o.jsx(Pn,{className:"w-3.5 h-3.5 text-accent"}),o.jsx("span",{children:"Wallet Label"})]}),o.jsx("button",{onClick:L,disabled:x,className:`p-1 rounded-md transition-all hover:bg-surface ${x?"opacity-50 cursor-not-allowed":"hover:scale-110"}`,title:"Generate new wallet",children:o.jsx(Qo,{className:`w-3.5 h-3.5 text-accent ${x?"animate-spin":""}`})})]}),o.jsx(yt,{value:a,onChange:K=>l(K.target.value),placeholder:"Enter wallet name",customSize:"w-full bg-surface-dark rounded-md px-2.5 py-1.5"})]}),o.jsxs("div",{className:"p-2 bg-surface-dark/50 border border-white/[0.05] rounded-md space-y-1.5",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("label",{className:"text-[11px] font-medium flex items-center gap-1.5 text-text-secondary",children:"Public Address"}),o.jsx("div",{className:"flex items-center gap-1",children:o.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),D&&I(D.publicKey,"public")},className:"p-1 hover:bg-surface rounded-md transition-colors",type:"button",children:M?o.jsx(fn,{className:"w-3.5 h-3.5 text-emerald-500"}):o.jsx(Zs,{className:"w-3.5 h-3.5 text-text-secondary"})})})]}),o.jsx("div",{className:"w-full bg-surface-dark rounded-md px-2 py-1 text-xs font-medium border transition-colors border-white/[0.05] hover:border-white/[0.08] focus:border-accent font-mono text-[9px] text-text-secondary break-all max-h-12 overflow-y-auto",children:D?.publicKey})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("label",{className:"text-[11px] font-medium flex items-center gap-1.5 text-red-400",children:[o.jsx(vn,{className:"w-3 h-3"}),"Private Key (Secret)"]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),g(!d)},className:"p-1 hover:bg-surface rounded-md transition-colors",title:d?"Hide private key":"Show private key",type:"button",children:d?o.jsx(xc,{className:"w-3.5 h-3.5 text-text-secondary"}):o.jsx(_n,{className:"w-3.5 h-3.5 text-text-secondary"})}),o.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),D&&I(D.privateKey,"private")},className:"p-1 hover:bg-surface rounded-md transition-colors",type:"button",children:C?o.jsx(fn,{className:"w-3.5 h-3.5 text-emerald-500"}):o.jsx(Zs,{className:"w-3.5 h-3.5 text-text-secondary"})})]})]}),o.jsx("div",{className:"w-full bg-surface-dark rounded-md px-2 py-1 text-xs font-medium border transition-colors bg-red-500/5 border-red-500/10 font-mono text-[9px] text-text-secondary break-all max-h-12 overflow-y-auto",children:d?D?.privateKey:J})]})]}),o.jsxs("div",{className:"flex items-start gap-2 p-1.5 bg-amber-500/10 border border-amber-500/20 rounded-md",children:[o.jsx(vn,{className:"w-4 h-4 text-amber-500 shrink-0 mt-0.5"}),o.jsx("p",{className:"text-[11px] font-medium text-amber-500 leading-tight",children:"Keep your private key secure! Anyone with access can control your funds."})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[o.jsx(Et,{onClick:t,variant:"secondary",size:"sm",className:"px-3 py-1.5",children:"Cancel"}),o.jsx(Et,{onClick:O,variant:"primary",size:"sm",className:"px-3 py-1.5",children:"Add Wallet"})]})]})})})}const Uf={commitment:"confirmed",confirmTransactionInitialTimeout:1e4},sn={RENT_EXEMPT:.00203928*Xt,FEE_ESTIMATE:1e-5*Xt},Vn=new ac("https://jacklin-2ymrlk-fast-mainnet.helius-rpc.com",Uf),Ko=r=>r?`${r.slice(0,4)}...${r.slice(-4)}`:"",Hs=r=>{try{const t=_f.decode(r);return $t.fromSecretKey(t)}catch{return null}},qf=({type:r,message:t})=>o.jsxs("div",{className:`flex items-center gap-2 p-3 mb-3 rounded-md animate-fade-in border ${r==="error"?"bg-red-500/10 border-red-500/20":"bg-emerald-500/10 border-emerald-500/20"}`,children:[r==="error"?o.jsx(vn,{className:"w-4 h-4 text-red-500 shrink-0"}):o.jsx(fn,{className:"w-4 h-4 text-emerald-500 shrink-0"}),o.jsx("p",{className:`text-xs ${r==="error"?"text-red-500":"text-emerald-500"}`,children:t})]});function Df({isOpen:r,onClose:t,wallets:e,onSuccess:n}){const[i,s]=ye.useState([]),[a,l]=ye.useState(!1),[d,g]=ye.useState(null),[x,b]=ye.useState(null),C=F=>{i.includes(F)?s(i.filter(L=>L!==F)):s([...i,F])};ye.useEffect(()=>{if(d){const F=setTimeout(()=>{g(null),b(null)},6e3);return()=>clearTimeout(F)}},[d]);const B=ye.useCallback(async F=>{let L=0,I=0,U=0;const O=[];for(const D of e){if(D.publicKey===F)continue;const J=Hs(D.privateKey);if(!J){I++;continue}const K=new me(D.publicKey),$=new me(F),W=await Vn.getBalance(K)-sn.RENT_EXEMPT-sn.FEE_ESTIMATE;if(W<=0){O.push(D.label||Ko(D.publicKey));continue}const G=W/Xt,E=new Ot().add(zn.transfer({fromPubkey:K,toPubkey:$,lamports:W}));try{await Ao(Vn,E,[J]),L++,U+=G}catch{I++}}return{txCount:L,errorCount:I,totalMoved:U,skippedWallets:O}},[e]),M=ye.useCallback(async F=>{let L=0,I=0,U=0,O=0;const D=[];for(const _ of e){const W=Hs(_.privateKey);if(!W){I++;continue}const G=new me(_.publicKey),E=await Vn.getBalance(G),c=E-sn.RENT_EXEMPT-sn.FEE_ESTIMATE;D.push({w:_,keypair:W,pubkey:G,balance:E,sendAmount:c}),c>0&&(O+=c)}if(O<=0)throw new Error("No wallets have enough SOL to redistribute.");const J=Math.floor(O/F.length);if(J<=0)throw new Error("Not enough SOL to split among selected wallets.");const K=new Map,$=new Map;for(const _ of D)F.includes(_.pubkey.toBase58())&&$.set(_.pubkey.toBase58(),_.balance);for(const _ of F){const G=($.get(_)||0)-sn.RENT_EXEMPT-sn.FEE_ESTIMATE,E=J-G;K.set(_,E)}for(const _ of F){const W=K.get(_)||0;if(W>0){let G=W;for(const E of F){if(E===_)continue;const c=K.get(E)||0;if(c<0){const m=D.find(N=>N.pubkey.toBase58()===E);if(!m)continue;const y=Math.min(-c,G);if(y<=0)continue;const j=new Ot().add(zn.transfer({fromPubkey:m.pubkey,toPubkey:new me(_),lamports:y}));try{if(await Ao(Vn,j,[m.keypair]),L++,U+=y/Xt,K.set(_,W-y),K.set(E,c+y),G-=y,G<=0)break}catch{I++}}}}}return{txCount:L,errorCount:I,totalMoved:U,skippedWallets:[]}},[e]),k=ye.useCallback(async()=>{if(!i.length)return;l(!0),g(null),b(null);const F=setTimeout(()=>{l(!1),g("Operation timed out. Please try again."),b("error")},3e4);try{let L=!1;for(const $ of e){if($.publicKey===i[0]&&i.length===1||!Hs($.privateKey))continue;const W=new me($.publicKey);if(await Vn.getBalance(W)-sn.RENT_EXEMPT-sn.FEE_ESTIMATE>0){L=!0;break}}if(!L){clearTimeout(F),g("No wallets have enough SOL to merge."),b("error"),l(!1);return}const I=i.length;let U;I===1?U=await B(i[0]):U=await M(i);const{txCount:O,errorCount:D,totalMoved:J,skippedWallets:K}=U;if(O===0){clearTimeout(F);const $=K?.length>0?"No wallets have enough SOL to merge.":"No wallets available to merge.";g($),b("error"),l(!1)}else{clearTimeout(F),g(`Moved ${J.toFixed(4)} SOL in ${O} transaction(s). ${D?D+" failed.":""}`),b("success"),l(!1),setTimeout(()=>{n?.()},1e3),setTimeout(()=>{t()},2e3);return}}catch(L){clearTimeout(F),g("Error: "+(L instanceof Error?L.message:String(L))),b("error"),l(!1),setTimeout(()=>{t()},3e3)}},[i,B,M,n,t,e]),S=()=>{s([]),g(null),b(null),t()};return o.jsx(Tt,{isOpen:r,onClose:S,title:"Move & Split",children:o.jsxs("div",{className:"space-y-2",children:[d&&o.jsx(qf,{type:x||"error",message:d}),o.jsx("p",{className:"text-xs text-text-secondary mb-3",children:"Select one or more destination wallets to split all SOL. If one is selected, all funds will be sent to that wallet. If multiple, funds will be split evenly."}),o.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-accent/10 scrollbar-track-transparent hover:scrollbar-thumb-accent/20",children:e.length===0?o.jsx("div",{className:"text-center py-4 text-text-secondary text-xs",children:"No wallets available"}):e.map(F=>o.jsxs("button",{type:"button",className:`w-full flex items-center gap-2 px-2.5 py-1.5 rounded-md border transition-colors ${i.includes(F.publicKey)?"border-accent bg-accent/10":"border-white/10 hover:bg-white/5"}`,onClick:()=>C(F.publicKey),disabled:a,children:[o.jsx(Pn,{className:"w-3.5 h-3.5 text-accent"}),o.jsx("span",{className:"text-xs font-medium text-text-primary flex-1 text-left",children:F.label}),o.jsx("span",{className:"text-[10px] text-text-secondary",children:Ko(F.publicKey)})]},F.publicKey))}),o.jsxs("div",{className:"flex gap-2 justify-end pt-3",children:[o.jsx(Et,{variant:"secondary",size:"sm",onClick:S,disabled:a,children:"Cancel"}),o.jsx(Et,{variant:"primary",size:"sm",onClick:k,disabled:i.length===0||a,children:i.length<=1?a?"Moving":"Move":a?"Splitting":"Split"})]})]})})}const zf={commitment:"confirmed",confirmTransactionInitialTimeout:1e4},zt={MAX_ACTIVE_WALLETS:5,WALLETS_PER_PAGE:5,BALANCE_REFRESH_INTERVAL:3e4,RENT_EXEMPT:.00203928*Xt,FEE_ESTIMATE:1e-5*Xt,BURN_FEE:1e-5,JITO_TIP:1e-5},$f=new ac("https://jacklin-2ymrlk-fast-mainnet.helius-rpc.com",zf),Kf=r=>r?`${r.slice(0,4)}...${r.slice(-4)}`:"";function Wf(){const{settings:r,updateSettings:t}=Z.useContext(_e),e=ye.useMemo(()=>Array.isArray(r.wallets)?r.wallets:[],[r.wallets]),n=Math.ceil(e.length/zt.WALLETS_PER_PAGE),[i,s]=ye.useState(null),[a,l]=ye.useState(!1),[d,g]=ye.useState(!1),[x,b]=ye.useState(null),[C,B]=ye.useState(!1),[M,k]=ye.useState(null),[S,F]=ye.useState(0),[L,I]=ye.useState(null),[U,O]=ye.useState(null),D=ye.useMemo(()=>e.slice(S*zt.WALLETS_PER_PAGE,(S+1)*zt.WALLETS_PER_PAGE),[e,S]),[J,K]=ye.useState({}),[$,_]=ye.useState(null),[W,G]=ye.useState(null),[E,c]=ye.useState(!1),[m,y]=ye.useState(null),j=ye.useCallback((ne,oe)=>{I(oe),ne.dataTransfer.effectAllowed="move",ne.dataTransfer.setData("text/plain",oe.toString()),ne.currentTarget instanceof HTMLElement&&(ne.currentTarget.style.opacity="0.5")},[]),N=ye.useCallback(ne=>{I(null),O(null),ne.currentTarget instanceof HTMLElement&&(ne.currentTarget.style.opacity="1")},[]),P=ye.useCallback((ne,oe)=>{ne.preventDefault(),ne.dataTransfer.dropEffect="move",O(oe)},[]),q=ye.useCallback(ne=>{ne.preventDefault(),O(null)},[]),A=ye.useCallback((ne,oe)=>{ne.preventDefault();const pe=parseInt(ne.dataTransfer.getData("text/plain"));if(pe===oe){O(null);return}const de=[...e],xe=de[pe];de.splice(pe,1),de.splice(oe,0,xe),t({wallets:de}),O(null)},[e,t]),u=ye.useCallback(async ne=>{try{_(null),G(null);const oe=await qi(ne.publicKey,zt.BURN_FEE,zt.JITO_TIP),pe=await oe.text();console.log("Raw response:",pe);let de;try{de=JSON.parse(pe)}catch{throw new Error("Invalid response from server")}if(oe.status===400){y(ne),c(!0);return}if(oe.ok&&de.status==="success"&&typeof de.sol_saved=="number"){const xe=de.sol_saved/Xt;xe===0?(_("No empty token accounts found to burn"),setTimeout(()=>_(null),5e3)):(G(xe),setTimeout(()=>G(null),5e3))}else throw new Error(de.error||de.message||"Failed to close accounts")}catch(oe){console.error("Error closing accounts:",oe);const pe=oe instanceof Error?oe.message:"Failed to burn tokens";_(pe),setTimeout(()=>_(null),5e3)}},[]),h=ye.useCallback(async ne=>{if(m)try{_(null),G(null);const oe=await qi(m.publicKey,zt.BURN_FEE,zt.JITO_TIP,ne),pe=await oe.text();console.log("Raw response:",pe);let de;try{de=JSON.parse(pe)}catch{throw new Error("Invalid response from server")}if(!oe.ok||de.status!=="success")throw new Error(de.error||de.message||"Failed to close accounts");if(typeof de.sol_saved=="number"){const xe=de.sol_saved/Xt;xe===0?(_("No empty token accounts found to burn"),setTimeout(()=>_(null),5e3)):(G(xe),setTimeout(()=>G(null),5e3))}c(!1),y(null)}catch(oe){console.error("Error closing accounts:",oe);const pe=oe instanceof Error?oe.message:"Failed to burn tokens";_(pe),setTimeout(()=>_(null),5e3),c(!1),y(null)}},[m]),v=ye.useCallback(async()=>{try{if(!e.length)return;const ne=e.reduce((de,xe)=>{try{de.push(new me(xe.publicKey))}catch{}return de},[]),oe=await $f.getMultipleAccountsInfo(ne),pe=Object.fromEntries(oe.map((de,xe)=>[ne[xe].toBase58(),de?de.lamports/Xt:0]));K(pe)}catch(ne){console.error("Error fetching balances:",ne),K({})}},[e]),R=ye.useCallback(async()=>{console.log("Refreshing balances after transaction...");for(let ne=0;ne<3;ne++)console.log(`Balance refresh attempt ${ne+1}/3`),await v(),ne<2&&await new Promise(oe=>setTimeout(oe,1e3));console.log("Balance refresh completed")},[v]);ye.useEffect(()=>{v();const ne=setInterval(v,zt.BALANCE_REFRESH_INTERVAL);return()=>clearInterval(ne)},[v]);const V=ye.useCallback(ne=>{t({wallets:e.filter((oe,pe)=>pe!==ne)})},[e,t]),te=ye.useCallback((ne,oe,pe)=>{const de=e.map(Ce=>{const Ht=Ce.label?.match(/^Wallet (\d+)$/);return Ht?parseInt(Ht[1]):0}).filter(Ce=>!isNaN(Ce));let xe=1;for(;de.includes(xe);)xe++;const Ie={label:ne.match(/^Wallet \d+$/)?`Wallet ${xe}`:ne,publicKey:pe,privateKey:oe};t({wallets:[...e,Ie]})},[e,t]),se=ye.useCallback((ne,oe,pe,de)=>{const xe=[...e];xe[ne]={...e[ne],label:oe,publicKey:de,privateKey:pe.trim()?pe:e[ne].privateKey},t({wallets:xe})},[e,t]),he=ye.useCallback(async ne=>{try{await navigator.clipboard.writeText(ne),k(ne),setTimeout(()=>k(null),2e3)}catch(oe){console.error("Failed to copy:",oe)}},[]),je=({type:ne,message:oe})=>o.jsxs("div",{className:`flex items-center gap-2 p-3 mb-3 rounded-md border ${ne==="error"?"bg-red-500/10 border-red-500/20":"bg-emerald-500/10 border-emerald-500/20"}`,children:[ne==="error"?o.jsx(vn,{className:"w-4 h-4 text-red-500 shrink-0"}):o.jsx(fn,{className:"w-4 h-4 text-emerald-500 shrink-0"}),o.jsx("p",{className:`text-xs ${ne==="error"?"text-red-500":"text-emerald-500"}`,children:oe})]});return o.jsxs("div",{className:"space-y-2 pl-2",children:[$&&o.jsx(je,{type:"error",message:$}),W!==null&&o.jsx(je,{type:"success",message:`Successfully burned tokens! Saved ${W.toFixed(4)} SOL`}),e.length>0&&o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-1 bg-surface-dark/50 rounded-md border border-white/[0.02] overflow-hidden",children:[o.jsx("span",{className:"px-2 text-[10px] font-medium text-text-secondary/75 border-r border-white/[0.02]",children:"Total"}),o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3 h-3 object-contain opacity-75 mx-1"}),o.jsx("span",{className:"pr-2 text-xs font-medium text-text-primary",children:Object.values(J).reduce((ne,oe)=>ne+oe,0).toFixed(4)})]}),o.jsx("div",{className:"flex items-center gap-2",children:e.length>0&&o.jsxs("div",{className:"flex items-center gap-1 bg-surface-dark/50 rounded-md border border-white/[0.02] overflow-hidden",children:[o.jsx("button",{onClick:()=>F(ne=>Math.max(0,ne-1)),disabled:S===0,className:"p-1 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-surface/50 transition-colors",children:o.jsx(ta,{className:"w-3.5 h-3.5 text-text-secondary"})}),o.jsxs("span",{className:"px-2 text-[10px] font-medium text-text-secondary/75 border-x border-white/[0.02]",children:[S+1,"/",n]}),o.jsx("button",{onClick:()=>F(ne=>Math.min(n-1,ne+1)),disabled:S===n-1,className:"p-1 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-surface/50 transition-colors",children:o.jsx(na,{className:"w-3.5 h-3.5 text-text-secondary"})})]})})]}),e.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[o.jsx("div",{className:"w-12 h-12 rounded-md bg-surface flex items-center justify-center mb-4",children:o.jsx(Ft,{className:"w-6 h-6 text-accent"})}),o.jsx("h3",{className:"text-sm font-medium text-text-primary mb-2",children:"No wallets yet"}),o.jsx("p",{className:"text-xs text-text-secondary mb-6",children:"Add your first wallet to get started"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(Et,{onClick:()=>l(!0),variant:"primary",size:"lg",icon:mr,className:"w-full",children:"Add Wallet"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-[1px] flex-1 bg-white/[0.02]"}),o.jsx("span",{className:"text-[10px] font-medium text-text-secondary/50 uppercase",children:"or"}),o.jsx("div",{className:"h-[1px] flex-1 bg-white/[0.02]"})]}),o.jsx(Et,{onClick:()=>g(!0),variant:"secondary",size:"lg",icon:Ft,children:"Generate Wallet"})]})]}):o.jsxs("div",{className:"space-y-2",children:[D.map((ne,oe)=>{const pe=S*zt.WALLETS_PER_PAGE+oe,de=L===pe,xe=U===pe;return o.jsx("div",{className:`flex items-center gap-2 group transition-all duration-200 ${de?"opacity-50":""} ${xe?"transform translate-y-1":""}`,draggable:!0,onDragStart:Pe=>j(Pe,pe),onDragEnd:N,onDragOver:Pe=>P(Pe,pe),onDragLeave:q,onDrop:Pe=>A(Pe,pe),children:o.jsxs("div",{className:`w-full relative bg-surface-dark rounded-md px-3 py-2.5 ring-1 cursor-move
                      ring-white/[0.05] hover:ring-accent/30 hover:shadow-[0_0_0_2px_rgba(0,102,255,0.35)]
                      transition-all duration-200 ${xe?"ring-accent/50 shadow-[0_0_0_2px_rgba(0,102,255,0.5)]":""}`,children:[o.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 flex items-center gap-1.5 transition-all duration-200 group-hover:opacity-0 z-10",children:o.jsx("span",{className:"px-2.5 py-1.5 bg-surface/80 backdrop-blur-[2px] rounded-md text-xs font-medium text-text-primary border border-white/[0.08] shadow-[0_2px_8px_rgba(0,0,0,0.12)] whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[J[ne.publicKey]?.toFixed(4)??"0.0000",o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3 h-3 object-contain"})]})})}),o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[o.jsx("div",{className:"w-6 h-6 rounded-md bg-surface flex items-center justify-center shrink-0",children:o.jsx(Ft,{className:"w-3.5 h-3.5 text-accent"})}),o.jsxs("div",{className:"flex flex-col min-w-0 flex-1 relative",children:[o.jsx("div",{className:"flex items-center gap-2 mb-0.5",children:o.jsx("span",{className:"text-sm font-medium text-text-primary",children:ne.label})}),o.jsx("div",{className:"flex items-center gap-1.5 mt-0.5",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-xs text-text-secondary",children:Kf(ne.publicKey)}),ne.publicKey&&o.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),he(ne.publicKey)},className:`p-1 hover:bg-surface rounded-md transition-all group/copy relative ${M===ne.publicKey?"pointer-events-none":""}`,children:[o.jsx(Zs,{className:`w-3 h-3 text-text-secondary transition-all absolute inset-0 m-auto ${M===ne.publicKey?"scale-0 opacity-0":"scale-100 opacity-100"}`}),o.jsx(fn,{className:`w-3 h-3 text-emerald-500 transition-all absolute inset-0 m-auto ${M===ne.publicKey?"scale-100 opacity-100":"scale-0 opacity-0"}`})]})]})})]})]}),o.jsxs("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 flex items-center gap-1.5 transition-all duration-200 opacity-0 group-hover:opacity-100 translate-x-2 group-hover:translate-x-0 z-20",children:[o.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),B(!0)},className:"p-1 rounded-md bg-surface/80 backdrop-blur-[2px] border border-white/[0.08] shadow-[0_2px_8px_rgba(0,0,0,0.12)] transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg group/btn relative overflow-hidden hover:bg-accent/10 hover:text-accent hover:shadow-accent/25",title:"Move & Split SOL",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/btn:opacity-100 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-all duration-500"}),o.jsx(yc,{className:"w-3 h-3"})]}),o.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),u(ne)},className:"p-1 rounded-md bg-surface/80 backdrop-blur-[2px] border border-white/[0.08] shadow-[0_2px_8px_rgba(0,0,0,0.12)] transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg group/btn relative overflow-hidden hover:bg-red-500/10 hover:text-red-500 hover:shadow-red-500/25",title:"Burn Tokens",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/btn:opacity-100 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-all duration-500"}),o.jsx(bc,{className:"w-3 h-3"})]}),o.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),s(pe)},className:"p-1 rounded-md bg-surface/80 backdrop-blur-[2px] border border-white/[0.08] shadow-[0_2px_8px_rgba(0,0,0,0.12)] transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg group/btn relative overflow-hidden hover:bg-accent/10 hover:text-accent hover:shadow-accent/25",title:"Edit wallet",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/btn:opacity-100 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-all duration-500"}),o.jsx(sa,{className:"w-3 h-3"})]}),o.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),b({index:pe,label:ne.label})},className:"p-1 rounded-md bg-surface/80 backdrop-blur-[2px] border border-white/[0.08] shadow-[0_2px_8px_rgba(0,0,0,0.12)] transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg group/btn relative overflow-hidden hover:bg-red-500/10 hover:text-red-500 hover:shadow-red-500/25",title:"Delete wallet",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/btn:opacity-100 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-all duration-500"}),o.jsx(Lr,{className:"w-3 h-3"})]})]})]})]})},pe)}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Et,{onClick:()=>l(!0),variant:"primary",icon:mr,className:"flex-1",children:"Add Wallet"}),o.jsx("div",{className:"flex flex-col items-center justify-center",children:o.jsx("span",{className:"text-[10px] font-medium text-text-secondary/50 uppercase",children:"or"})}),o.jsx(Et,{onClick:()=>g(!0),variant:"secondary",icon:Ft,className:"flex-1",children:"Gen Wallet"})]})]}),o.jsx(Rf,{isOpen:a,onClose:()=>l(!1),onAdd:te}),i!==null&&o.jsx(Of,{isOpen:!0,onClose:()=>s(null),onSave:(ne,oe,pe)=>{se(i,ne,oe,pe),s(null)},currentLabel:e[i].label,currentPublicKey:e[i].publicKey}),o.jsx(Ff,{isOpen:d,onClose:()=>g(!1),onSave:te}),o.jsx(Pf,{isOpen:x!==null,onClose:()=>b(null),onConfirm:()=>{if(x){V(x.index);const ne=Math.ceil((e.length-1)/zt.WALLETS_PER_PAGE);S>=ne&&F(Math.max(0,ne-1)),b(null)}},walletLabel:x?.label||""}),o.jsx(Df,{isOpen:C,onClose:()=>B(!1),wallets:e,onSuccess:R}),o.jsx(Lf,{isOpen:E,onClose:()=>{c(!1),y(null)},onConfirm:h,hasTokens:!0,error:$})]})}function Hf(){const{settings:r,updateSettings:t}=Z.useContext(_e),{transactions:e}=r,n=i=>{t({transactions:{...e,activePreset:i}})};return o.jsx("div",{className:"flex gap-1 bg-[var(--surface-dark)] p-1 rounded-md border border-white/[0.1] shadow-sm",children:["preset1","preset2","preset3"].map(i=>o.jsx("button",{onClick:()=>n(i),className:`group relative flex-1 px-2 py-1 rounded-md transition-all duration-200 border ${e.activePreset===i?"bg-[#0066FF] text-white shadow-lg shadow-accent/25 border-[#0066FF]":"bg-transparent text-text-secondary hover:text-text-primary border-transparent hover:border-white/[0.1]"}`,children:o.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[o.jsx(wc,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"font-medium text-xs",children:i==="preset1"?"Preset 1":i==="preset2"?"Preset 2":"Preset 3"})]})},i))})}function Gr({checked:r,onChange:t,className:e=""}){const n=()=>t(!r);return o.jsxs("button",{type:"button",role:"switch","aria-checked":r,onClick:n,tabIndex:0,className:`group relative inline-flex h-4 w-7 items-center rounded-full outline-none ${r?"bg-accent shadow-[0_0_8px_rgba(0,102,255,0.35)]":"bg-surface"} transition-colors duration-300 ease-[cubic-bezier(0.22,1,0.36,1)] ${e}`,style:{WebkitTapHighlightColor:"transparent"},children:[o.jsx("span",{className:`absolute left-0.5 inline-block h-3 w-3 transform rounded-full bg-white shadow-[0_1px_4px_rgba(0,0,0,0.15)] group-active:scale-90 transition-transform duration-300 ease-[cubic-bezier(0.22,1,0.36,1)] ${r?"translate-x-3":"translate-x-0"}`}),r&&o.jsx("span",{className:"absolute inset-0 rounded-full pointer-events-none opacity-100 scale-100 transition-all duration-300",style:{background:"radial-gradient(circle at center, rgba(0,102,255,0.1) 0%, rgba(0,102,255,0) 70%)"}})]})}function ht({title:r,children:t,defaultOpen:e=!0,icon:n,className:i=""}){const[s,a]=Z.useState(e);return o.jsxs("div",{className:`mb-2 ${i}`,children:[o.jsx("button",{onClick:()=>a(!s),className:"w-full text-left py-1 px-1 transition-all duration-200",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[n&&o.jsx(n,{className:"w-3.5 h-3.5 text-accent"}),o.jsx("h2",{className:"text-xs font-medium text-text-secondary flex-1",children:r}),o.jsx(Sn,{className:`w-3.5 h-3.5 text-text-secondary transition-transform duration-200 ${s?"rotate-180":""}`})]})}),o.jsx("div",{className:`space-y-1 transition-all duration-200 ease-in-out ${s?"mt-1 max-h-[1000px] opacity-100 visible":"mt-0 max-h-0 opacity-0 invisible overflow-hidden"}`,children:t})]})}function Vf(){const{settings:r,updateSettings:t}=Z.useContext(_e),{transactions:e}=r,n=e.presets[e.activePreset],i=(x,b)=>{const C={...n,[x]:b};t({transactions:{...e,[x]:b,presets:{...e.presets,[e.activePreset]:C}}})},s=x=>b=>{i(x,parseFloat(b.target.value)||0)},a=()=>{n.quickBuySlippage<1&&i("quickBuySlippage",1),n.quickBuySlippage>100&&i("quickBuySlippage",100)},l=x=>{i("quickBuyUseStaticTip",x)},d=n.isDynamicTipEnabled&&!n.quickBuyUseStaticTip,g=d?"opacity-50 cursor-not-allowed bg-surface/50 hover:border-white/[0.05]":"";return o.jsx(ht,{title:"Quick Buy Options",defaultOpen:!0,icon:Ft,children:o.jsxs("div",{className:"bg-surface-dark rounded-md p-3 border border-white/[0.05]",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-1.5",children:o.jsxs("label",{className:"text-xs font-medium flex items-center gap-1.5 text-text-secondary",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5"}),"Fee"]})}),o.jsx(yt,{value:n.quickBuyFee,onChange:s("quickBuyFee"),type:"number",step:"0.0001",min:"0.00001",isFeeInput:!0})]}),o.jsx(yt,{label:"Slippage",icon:vc,type:"number",step:"0.0001",min:"1.0",max:"100",value:typeof n.quickBuySlippage=="number"?n.quickBuySlippage:1,onChange:s("quickBuySlippage"),onBlur:a,isPercentInput:!0,suffix:"%"})]}),o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"text-xs font-medium flex items-center gap-1.5 text-text-secondary",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5"}),"Tip"]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(kn,{className:"w-3.5 h-3.5 text-accent"}),o.jsx("span",{className:"text-xs font-medium text-text-secondary",children:"Use only static"}),o.jsx(Gr,{checked:n.quickBuyUseStaticTip,onChange:l})]})]}),o.jsx(yt,{type:"number",step:"0.0001",min:"0.00001",isFeeInput:!0,disabled:d,value:n.quickBuyTip,onChange:s("quickBuyTip"),className:g})]})]})})}function Gf(){const{settings:r,updateSettings:t}=Z.useContext(_e),{transactions:e}=r,n=e.presets[e.activePreset],i=s=>a=>{const l={...n,utility:{...n.utility,[s]:parseFloat(a.target.value)||0}};t({transactions:{...e,presets:{...e.presets,[e.activePreset]:l}}})};return o.jsx(ht,{title:"Utility Options",defaultOpen:!0,icon:Ft,children:o.jsx("div",{className:"bg-surface-dark rounded-md p-3 border border-white/[0.05]",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-1.5",children:o.jsxs("label",{className:"text-xs font-medium flex items-center gap-1.5 text-text-secondary",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5"}),"Priority Fee"]})}),o.jsx(yt,{type:"number",step:"0.0001",min:"0.00001",isFeeInput:!0,value:n.utility.fee,onChange:i("fee")})]}),o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-1.5",children:o.jsxs("label",{className:"text-xs font-medium flex items-center gap-1.5 text-text-secondary",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5"}),"Tip"]})}),o.jsx(yt,{type:"number",step:"0.0001",min:"0.00001",isFeeInput:!0,value:n.utility.tip,onChange:i("tip")})]})]})})})}const Wo=[{key:"rpc",label:"RPC Only",description:"Use standard RPC transactions",icon:Sc,badge:null},{key:"jito",label:"Jito Only",description:"Use only Jito bundles",icon:gr,badge:{text:"MEV PROTECTED",icon:gr}},{key:"both",label:"Jito & RPC",description:"Fastest combination",icon:kc,badge:{text:"FASTEST",icon:kn}}];function Zf(){const{settings:r,updateSettings:t}=Z.useContext(_e),{transactions:e}=r,n=e.presets[e.activePreset],[i,s]=Z.useState(!1),a=Z.useRef(null),l=Z.useRef(null),d=Z.useMemo(()=>Wo.find(C=>C.key===n.transactionMode),[n.transactionMode]),g=C=>{const B={...n,transactionMode:C};t({transactions:{...e,presets:{...e.presets,[e.activePreset]:B}}}),s(!1)},x=Z.useCallback(C=>{i&&!a.current?.contains(C.target)&&!l.current?.contains(C.target)&&s(!1)},[i]);Z.useEffect(()=>(document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)),[x]);const b=C=>C?o.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-[8px] font-semibold bg-blue-500/10 text-blue-500 rounded-sm border border-blue-500/20 leading-none",children:[o.jsx(C.icon,{className:"w-2.5 h-2.5 mr-0.5"}),C.text]}):null;return o.jsx(ht,{title:"Transaction Mode",defaultOpen:!0,icon:kn,children:o.jsxs("div",{className:"relative",ref:a,children:[o.jsx("button",{onClick:()=>s(C=>!C),className:`w-full text-left appearance-none bg-surface-dark rounded-md px-2.5 py-1.5 text-text-primary text-xs font-medium border ${i?"border-accent":"border-white/[0.05] hover:border-white/[0.08]"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-5 h-5 rounded-md bg-surface flex items-center justify-center",children:d&&o.jsx(d.icon,{className:"w-3 h-3 text-accent"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium",children:[o.jsx("span",{children:d?.label}),d?.badge&&b(d.badge)]}),o.jsx("div",{className:"text-[11px] text-text-secondary mt-1 font-normal",children:d?.description})]})]}),o.jsx(Sn,{className:`w-3 h-3 text-text-secondary transition-transform duration-200 ${i?"rotate-180":""}`})]})}),o.jsx("div",{ref:l,className:`absolute w-full mt-1 bg-surface-dark rounded-md overflow-hidden shadow-lg shadow-black/50 z-10 border border-white/[0.05] transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)] transform origin-top ${i?"opacity-100 scale-100 translate-y-0 visible pointer-events-auto":"opacity-0 scale-95 -translate-y-2 invisible pointer-events-none"}`,children:Wo.map(({key:C,label:B,description:M,icon:k,badge:S})=>{const F=n.transactionMode===C;return o.jsxs("button",{className:`w-full h-[40px] px-2.5 py-1.5 text-xs flex items-center justify-between text-left transition-all duration-200 ${F?"bg-surface":"hover:bg-surface"}`,onClick:L=>{L.stopPropagation(),g(C)},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-5 h-5 rounded-md bg-surface flex items-center justify-center",children:o.jsx(k,{className:"w-3.5 h-3.5 text-accent"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium",children:[o.jsx("span",{children:B}),b(S)]}),o.jsx("div",{className:"text-[11px] text-text-secondary mt-1 font-normal leading-tight",children:M})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("div",{className:`w-3 h-3 rounded-md flex items-center justify-center ${F?"bg-accent shadow-[0_0_5px_rgba(0,102,255,0.5)]":"border border-white/[0.15]"}`,children:F&&o.jsx(fn,{className:"w-1.5 h-1.5 text-white"})})})]},C)})})]})})}function Yf(){const{settings:r,updateSettings:t}=Z.useContext(_e),{transactions:e}=r,n=e.presets[e.activePreset],i=(l,d)=>{const g={...n,[l]:d};t({transactions:{...e,[l]:d,presets:{...e.presets,[e.activePreset]:g}}})},s=l=>d=>i(l,parseFloat(d.target.value)||0),a=n.isDynamicTipEnabled;return o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between py-2 px-1",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Pr,{className:"w-4 h-4 text-accent"}),o.jsx("div",{className:"text-xs font-medium text-text-secondary",children:"Dynamic Tip"})]}),o.jsx(Gr,{checked:a,onChange:l=>i("isDynamicTipEnabled",l)})]}),o.jsx("div",{className:`mt-1.5 overflow-hidden transition-all duration-300 ease-in-out ${a?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:o.jsx("div",{className:`transition-all duration-300 ease-in-out mt-0 ${a?"translate-y-0":"-translate-y-2"}`,children:o.jsx("div",{className:"bg-surface-dark rounded-md p-3 border border-white/[0.05]",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-1.5",children:o.jsxs("label",{className:"text-xs font-medium flex items-center gap-1.5 text-text-secondary",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5"}),"Max Buy Tip"]})}),o.jsx(yt,{value:n.maxBuyTip,onChange:s("maxBuyTip"),type:"number",step:"0.0001",min:"0.00001",isFeeInput:!0})]}),o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-1.5",children:o.jsxs("label",{className:"text-xs font-medium flex items-center gap-1.5 text-text-secondary",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5"}),"Max Sell Tip"]})}),o.jsx(yt,{value:n.maxSellTip,onChange:s("maxSellTip"),type:"number",step:"0.0001",min:"0.00001",isFeeInput:!0})]})]})})})})]})}function Jf({content:r,title:t,icon:e}){const[n,i]=ye.useState(!1),s=()=>{i(!1)},a=l=>{l.stopPropagation(),i(!n)};return o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:a,className:`p-1 rounded-md ${n?"bg-accent/10 text-accent":""}`,children:o.jsx(Ec,{className:"w-3.5 h-3.5 text-text-secondary"})}),o.jsx(Tt,{isOpen:n,onClose:s,title:t||"Information",children:e?o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-md bg-surface flex items-center justify-center shrink-0",children:o.jsx(e,{className:"w-3.5 h-3.5 text-accent"})}),o.jsx("p",{className:"text-xs text-text-primary/90 leading-relaxed flex-1",children:r})]}):o.jsx("p",{className:"text-xs text-text-primary/90 leading-relaxed",children:r})})]})}function le({icon:r,title:t,description:e,isEnabled:n=!1,onToggle:i,onSettingsClick:s,className:a="",tooltip:l,tooltipIcon:d,customControl:g,showSwitch:x=!0,isNew:b=!1}){return o.jsx("div",{className:`py-2 px-3 bg-surface-dark rounded-md border border-white/[0.05] ${a}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-md bg-surface flex items-center justify-center",children:r}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-medium text-text-primary",children:t}),b&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1 py-0.5 rounded-md bg-emerald-500/10 border border-emerald-500/20",children:[o.jsx(Pr,{className:"w-2.5 h-2.5 text-emerald-500"}),o.jsx("span",{className:"text-[9px] font-medium text-emerald-500",children:"New"})]})]}),o.jsx("div",{className:"text-xs text-text-secondary mt-0.5",children:e})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[l&&o.jsx(Jf,{content:l,icon:d}),s&&o.jsx("button",{onClick:s,className:"p-1.5 hover:bg-surface rounded-md transition-colors",children:o.jsx(ia,{className:"w-4 h-4 text-text-secondary hover:text-text-primary transition-colors"})}),g,x&&i&&o.jsx(Gr,{checked:n,onChange:i})]})]})})}function Xf(){const{settings:r,updateSettings:t}=Z.useContext(_e),{transactions:e}=r,n=e.presets[e.activePreset],i=s=>{const a={...n,doubleSendProtection:s};t({transactions:{...e,presets:{...e.presets,[e.activePreset]:a}}})};return o.jsx(ht,{title:"Security",defaultOpen:!0,icon:gr,children:o.jsx("div",{className:"space-y-1.5",children:o.jsx(le,{icon:o.jsx(gr,{className:"w-4 h-4 text-accent"}),title:"Double Send Protection",description:"Prevent duplicate transactions",isEnabled:n.doubleSendProtection,onToggle:i})})})}function Qf(){const{settings:r,updateSettings:t}=Z.useContext(_e),{transactions:e,wallets:n}=r,i=e.presets[e.activePreset],[s,a]=Z.useState(!1),[l,d]=Z.useState(!1),[g,x]=Z.useState(null),b=()=>{a(!0);const S=[];for(let I=0;I<5;I++){const U=$t.generate();S.push(U.publicKey.toBase58())}const F=n.map(I=>({...I,nonceAccounts:S})),L=Object.fromEntries(Object.entries(e.presets).map(([I,U])=>[I,{...U,multisendMode:!0}]));t({wallets:F,transactions:{...e,presets:L}}),a(!1)},C=()=>{a(!0);const S=n.map(L=>({publicKey:L.publicKey,privateKey:L.privateKey,label:L.label})),F=Object.fromEntries(Object.entries(e.presets).map(([L,I])=>[L,{...I,multisendMode:!1}]));t({wallets:S,transactions:{...e,presets:F}}),a(!1)},B=i.multisendMode,M=S=>{x(S),d(!0)},k=()=>{g==="enable"?b():g==="disable"&&C(),d(!1),x(null)};return o.jsxs(ht,{title:"Multisend Mode",defaultOpen:!0,icon:Oi,children:[o.jsx("div",{className:"space-y-1.5",children:o.jsx("div",{className:"py-2 px-3 bg-surface-dark rounded-md border border-white/[0.05]",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2.5 flex-1",children:[o.jsx(Oi,{className:"w-4 h-4 text-accent shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-text-primary mb-0.5",children:"Multisend Mode"}),o.jsx("div",{className:"text-xs text-text-secondary",children:"Send transactions to multiple wallets"})]})]}),o.jsx("button",{onClick:()=>M(B?"disable":"enable"),disabled:s||n.length===0,title:n.length===0?"You need to add a wallet first":void 0,className:`px-2 py-0.5 rounded-md text-[11px] font-medium transition-all ${B?"bg-red-500 text-white hover:bg-red-600":"bg-accent text-white"} disabled:cursor-not-allowed`,children:s?o.jsx(Bc,{className:"w-3 h-3 animate-spin"}):B?"Disable":"Enable"})]})})}),o.jsx(sr,{isOpen:l,onClose:()=>{d(!1),x(null)},onConfirm:k,title:g==="disable"?"Disable Multisend Mode?":"Enable Multisend Mode?",description:g==="disable"?"Disabling will remove nonce accounts from your wallets. This cannot be undone without regenerating them.":"Enabling will generate new nonce accounts for your wallets.",confirmText:g==="disable"?"Disable":"Enable",isDangerous:g==="disable",showDefaultContent:!0,disabled:s})]})}function e0(){return o.jsxs("div",{className:"space-y-4",children:[o.jsx(Hf,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Vf,{}),o.jsx(Gf,{}),o.jsx(Zf,{}),o.jsx(Yf,{}),o.jsx(Qf,{}),o.jsx(Xf,{})]})]})}function lt({value:r,onChange:t,onMouseUp:e,onKeyUp:n,min:i=0,max:s=1,step:a=.1,className:l="",showInput:d=!1,unit:g=""}){const[x,b]=Z.useState(!1),[C,B]=Z.useState(""),M=g==="%",k=K=>M?Math.max(i*100,Math.min(s*100,K))/100:Math.max(i,Math.min(s,K)),S=K=>M?K*100:K,F=K=>M?`${Math.round(K*100)}%`:`${K}${g}`,L=K=>{t(parseFloat(K.target.value))},I=K=>{e?.(parseFloat(K.target.value))},U=K=>{n?.(parseFloat(K.target.value))},O=()=>{d&&(b(!0),B(S(r).toString()))},D=()=>{const K=parseFloat(C);isNaN(K)||t(k(K)),b(!1),B("")},J=K=>{K.key==="Enter"?D():K.key==="Escape"&&(b(!1),B(""))};return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"range",min:i,max:s,step:a,value:r,onChange:L,onMouseUp:I,onKeyUp:U,className:`h-1 bg-surface rounded-md appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2 [&::-webkit-slider-thumb]:h-2 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent [&::-webkit-slider-thumb]:hover:bg-accent-light [&::-webkit-slider-thumb]:transition-colors ${l}`.trim()}),d&&(x?o.jsx("input",{type:"number",value:C,onChange:K=>B(K.target.value),onBlur:D,onKeyDown:J,step:M?"0.1":a.toString(),min:M?(i*100).toString():i.toString(),max:M?(s*100).toString():s.toString(),className:`w-10 ${M?"px-1":"px-1.5"} py-0.5 text-[10px] font-medium text-text-secondary bg-surface-dark rounded border border-white/[0.05] outline-none focus:border-accent transition-colors`,autoFocus:!0}):o.jsx("span",{className:`text-[10px] font-medium text-text-secondary tabular-nums w-10 ${M?"text-center":"text-right"} cursor-pointer hover:text-accent transition-colors`,onClick:O,children:F(r)}))]})}const hc={blue:"rgb(0, 102, 255)",purple:"rgb(147, 51, 234)",green:"rgb(16, 185, 129)",amber:"rgb(245, 158, 11)",rose:"rgb(244, 63, 94)"},t0=Object.keys(hc);function di({value:r,onChange:t,className:e="",customColors:n=[],onCustomColorAdd:i,onCustomColorRemove:s}){const[a,l]=Z.useState(!1),[d,g]=Z.useState("#000000"),x=()=>{i&&(i(d),g("#000000"),l(!1))},b=B=>{s&&s(B)},C=a&&i&&o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity duration-200",onClick:()=>l(!1)}),o.jsx("div",{className:"relative p-3 bg-deep-dark border border-white/[0.05] rounded-md shadow-xl min-w-[200px] transition-all duration-200 ease-out",style:{boxShadow:`
                        0 0 0 1px rgba(255, 255, 255, 0.05),
                        0 8px 32px rgba(0, 0, 0, 0.32),
                        0 0 64px rgba(0, 0, 0, 0.16),
                        0 4px 8px rgba(0, 0, 0, 0.24)
                    `},children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Color"}),o.jsx("input",{type:"color",value:d,onChange:B=>g(B.target.value),className:"w-full h-8 rounded-md border border-white/[0.05] hover:border-white/[0.08] focus:border-accent transition-colors cursor-pointer",onKeyDown:B=>{B.key==="Enter"?x():B.key==="Escape"&&l(!1)},autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:x,className:"px-3 py-1 text-xs bg-accent text-white rounded hover:bg-accent-light transition-colors",children:"Add"}),o.jsx("button",{onClick:()=>l(!1),className:"px-3 py-1 text-xs bg-surface text-text-secondary rounded border border-white/[0.08] hover:bg-surface-dark transition-colors",children:"Cancel"})]})]})})]});return o.jsxs("div",{className:`flex items-center gap-1 relative ${e}`,children:[o.jsxs("div",{className:"flex items-center gap-1",children:[t0.map(B=>{const M=r===B;return o.jsx("button",{onClick:()=>t(B),className:`w-4 h-4 rounded-[3px] relative shadow-sm transition-all duration-200 ease-out hover:scale-110 hover:opacity-80 active:scale-95 group ${M?"scale-100 opacity-100":"scale-95 opacity-60"}`,style:{backgroundColor:hc[B]},title:B,children:M&&o.jsx("div",{className:"absolute inset-0 rounded-[3px] ring-2 ring-white/20 transition-all duration-200",style:{boxShadow:"0 0 6px 1px rgba(255, 255, 255, 0.15)"}})},B)}),(Array.isArray(n)?n:[]).map((B,M)=>{const k=r===B;return o.jsxs("button",{onClick:()=>t(B),className:`w-4 h-4 rounded-[3px] relative shadow-sm transition-all duration-200 ease-out hover:scale-110 hover:opacity-80 active:scale-95 group ${k?"scale-100 opacity-100":"scale-95 opacity-60"}`,style:{backgroundColor:B},title:B,children:[k&&o.jsx("div",{className:"absolute inset-0 rounded-[3px] ring-2 ring-white/20 transition-all duration-200",style:{boxShadow:"0 0 6px 1px rgba(255, 255, 255, 0.15)"}}),s&&o.jsx("button",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-md opacity-0 group-hover:opacity-100 transition-all duration-200 text-white text-xs flex items-center justify-center hover:scale-110 active:scale-90 hover:opacity-100",onClick:S=>{S.stopPropagation(),b(B)},children:"Ã—"})]},`custom-${M}`)}),i&&o.jsx("button",{onClick:()=>l(!a),className:"w-4 h-4 rounded-[3px] border border-dashed border-gray-400 flex items-center justify-center hover:border-gray-300 hover:scale-110 active:scale-95 transition-all duration-200",title:"Add custom color",children:o.jsx(mr,{className:"w-2 h-2 text-gray-400"})})]}),C]})}function Mt({isOpen:r,onClose:t,type:e}){const{settings:n,updateSettings:i}=Z.useContext(_e),{platforms:s}=n,a=s.photon.features,l=s.photon.buttons,d=s.photon.cleanup,g=_=>{i({platforms:{...s,photon:{...s.photon,features:{...a,..._}}}})},x=_=>{i({platforms:{...s,photon:{...s.photon,buttons:{...l,..._}}}})},b=_=>{i({platforms:{...s,photon:{...s.photon,cleanup:{...d,..._}}}})},[C,B]=Z.useState(()=>a.quickBuyPresets.amounts.map(String));Z.useEffect(()=>{B(a.quickBuyPresets.amounts.map(String))},[a.quickBuyPresets.amounts]);const M=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(oa,{className:"w-4 h-4 text-accent"}),title:"Focus New Tab",description:"Focus on new chart tab",isEnabled:a.autoOpenChart.focusTab,onToggle:_=>{g({autoOpenChart:{...a.autoOpenChart,focusTab:_}})}}),o.jsx(le,{icon:o.jsx(aa,{className:"w-4 h-4 text-accent"}),title:"Chart Open Delay",description:"Delay before opening chart",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:5e3,step:100,value:a.autoOpenChart.delay,onChange:_=>{g({autoOpenChart:{...a.autoOpenChart,delay:_}})},className:"w-14",showInput:!0,unit:"ms"})}),showSwitch:!1})]}),k=o.jsx("div",{className:"space-y-2",children:o.jsx(le,{icon:o.jsx(Mn,{className:"w-4 h-4 text-accent"}),title:"Currency",description:"Select price currency",customControl:o.jsx("div",{className:"flex items-center gap-2",children:["USD","EUR"].map(_=>o.jsx("button",{onClick:()=>{g({solPriceIndicator:{...a.solPriceIndicator,currency:_}})},className:`px-2 py-1 rounded-md text-xs font-medium ${a.solPriceIndicator.currency===_?"bg-accent text-white":"bg-surface text-text-secondary"}`,children:_},_))}),showSwitch:!1})}),S=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(ca,{className:"w-4 h-4 text-accent"}),title:"Border color",description:"Button color palette",customControl:o.jsx(di,{value:l.styleBuyButton.palette,onChange:_=>{x({styleBuyButton:{...l.styleBuyButton,palette:_}})},customColors:n.customColors,onCustomColorAdd:_=>{i({customColors:[...n.customColors,_]})},onCustomColorRemove:_=>{i({customColors:n.customColors.filter(W=>W!==_)})}}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(on,{className:"w-4 h-4 text-accent"}),title:"Border Radius",description:"Button corner roundness",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:20,value:l.styleBuyButton.borderRadius,onChange:_=>{x({styleBuyButton:{...l.styleBuyButton,borderRadius:_}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(on,{className:"w-4 h-4 text-accent"}),title:"Border Width",description:"Button border thickness",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:3,value:l.styleBuyButton.borderWidth,onChange:_=>{x({styleBuyButton:{...l.styleBuyButton,borderWidth:_}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(hr,{className:"w-4 h-4 text-accent"}),title:"Border Style",description:"Button border style",customControl:o.jsx("div",{className:"flex items-center gap-2",children:["solid","dashed","dotted"].map(_=>o.jsx("button",{onClick:()=>{x({styleBuyButton:{...l.styleBuyButton,borderStyle:_}})},className:`px-1.5 py-0.5 rounded-md text-[10px] font-medium ${l.styleBuyButton.borderStyle===_?"bg-accent text-white":"bg-surface text-text-secondary"}`,children:_.charAt(0).toUpperCase()+_.slice(1)},_))}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(kn,{className:"w-4 h-4 text-accent"}),title:"Glow Effect",description:"Button glow effect",isEnabled:l.styleBuyButton.glowEffect,onToggle:_=>{x({styleBuyButton:{...l.styleBuyButton,glowEffect:_}})}})]}),F=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(an,{className:"w-4 h-4 text-accent"}),title:"Border color",description:"Icons color palette",customControl:o.jsx(di,{value:l.styleSocialIcons.palette,onChange:_=>{x({styleSocialIcons:{...l.styleSocialIcons,palette:_}})},customColors:n.customColors,onCustomColorAdd:_=>{i({customColors:[...n.customColors,_]})},onCustomColorRemove:_=>{i({customColors:n.customColors.filter(W=>W!==_)})}}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(an,{className:"w-4 h-4 text-accent"}),title:"Border Radius",description:"Icon corner roundness",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:20,value:l.styleSocialIcons.borderRadius,onChange:_=>{x({styleSocialIcons:{...l.styleSocialIcons,borderRadius:_}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(an,{className:"w-4 h-4 text-accent"}),title:"Border Width",description:"Icon border thickness",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:3,value:l.styleSocialIcons.borderWidth,onChange:_=>{x({styleSocialIcons:{...l.styleSocialIcons,borderWidth:_}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1})]}),L=o.jsx("div",{className:"space-y-2",children:o.jsx(le,{icon:o.jsx(an,{className:"w-4 h-4 text-accent"}),title:"Icon Size",description:"Social icons size",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:16,max:100,step:1,value:l.expandSocialIcons.width,onChange:_=>{x({expandSocialIcons:{...l.expandSocialIcons,width:_,height:_}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1})}),I=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(on,{className:"w-4 h-4 text-accent"}),title:"Button Width",description:"Button horizontal size",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:80,max:600,step:10,value:l.expandBuyButton.width,onChange:_=>{x({expandBuyButton:{...l.expandBuyButton,width:_}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(on,{className:"w-4 h-4 text-accent"}),title:"Button Height",description:"Button vertical size",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:24,max:200,step:1,value:l.expandBuyButton.height,onChange:_=>{x({expandBuyButton:{...l.expandBuyButton,height:_}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(_n,{className:"w-4 h-4 text-accent"}),title:"Button Opacity",description:"Button transparency",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:.05,max:1,step:.01,value:l.expandBuyButton.opacity??1,onChange:_=>{x({expandBuyButton:{...l.expandBuyButton,opacity:_}})},className:"w-14",showInput:!0,unit:"%"})}),showSwitch:!1})]}),U=o.jsx("div",{className:"space-y-2",children:o.jsx(le,{icon:o.jsx(_n,{className:"w-4 h-4 text-accent"}),title:"Blacklist Action",description:"Blacklisted Tokens visibility",customControl:o.jsx("div",{className:"flex items-center gap-2",children:["hide","indicator"].map(_=>o.jsx("button",{onClick:()=>{b({blacklistAction:_})},className:`px-2 py-0.5 rounded-md text-[11px] font-medium ${d.blacklistAction===_?"bg-accent text-white":"bg-surface text-text-secondary"}`,children:_.charAt(0).toUpperCase()+_.slice(1)},_))}),showSwitch:!1})}),O=o.jsx("div",{className:"space-y-2",children:o.jsx(le,{icon:o.jsx(Mn,{className:"w-4 h-4 text-accent"}),title:"Currency",description:"Migration indicator currency",customControl:o.jsx("div",{className:"flex items-center gap-2",children:["USD","EUR"].map(_=>o.jsx("button",{onClick:()=>{b({migrationIndicator:{...d.migrationIndicator,currency:_}})},className:`px-2 py-1 rounded-md text-xs font-medium ${d.migrationIndicator.currency===_?"bg-accent text-white":"bg-surface text-text-secondary"}`,children:_},_))}),showSwitch:!1})}),D=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(xr,{className:"w-4 h-4 text-accent"}),title:"Shitter Tools",description:"Enable advanced tools",isEnabled:a.quickSwapTools,onToggle:_=>{g({quickSwapTools:_})}}),o.jsx(le,{icon:o.jsx(xr,{className:"w-4 h-4 text-accent"}),title:"Wallet Selector",description:"Show wallets selector",isEnabled:a.quickSwapWallets,onToggle:_=>{g({quickSwapWallets:_})}})]}),J=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(xn,{className:"w-4 h-4 text-accent"}),title:"New Pairs",description:"Apply to new pairs section",isEnabled:a.quickBuyPresets.affectNew,onToggle:_=>{g({quickBuyPresets:{...a.quickBuyPresets,affectNew:_}})}}),o.jsx(le,{icon:o.jsx(xn,{className:"w-4 h-4 text-accent"}),title:"About to Graduate",description:"Apply to about to graduate section",isEnabled:a.quickBuyPresets.affectGraduating,onToggle:_=>{g({quickBuyPresets:{...a.quickBuyPresets,affectGraduating:_}})}}),o.jsx(le,{icon:o.jsx(xn,{className:"w-4 h-4 text-accent"}),title:"Graduated",description:"Apply to graduated section",isEnabled:a.quickBuyPresets.affectGraduated,onToggle:_=>{g({quickBuyPresets:{...a.quickBuyPresets,affectGraduated:_}})}}),[0,1,2,3,4].map(_=>o.jsx(le,{icon:o.jsx(ln,{className:"w-4 h-4 text-accent"}),title:`Preset ${_+1}`,description:(_===0?"First":_===1?"Second":_===2?"Third":_===3?"Fourth":"Fifth")+" quick buy amount",customControl:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5 opacity-75 mt-1"}),o.jsx(yt,{type:"number",step:"0.0001",min:"0",allowEmpty:!0,value:C[_],onChange:W=>{const G=W.target.value;B(E=>{const c=[...E];return c[_]=G,c})},onBlur:W=>{const G=W.target.value;let E=G===""?0:parseFloat(G);(isNaN(E)||E<0)&&(E=0);const c=[...a.quickBuyPresets.amounts];c[_]=E,g({quickBuyPresets:{...a.quickBuyPresets,amounts:c}})},customSize:"w-16 h-6 bg-surface rounded-md px-1.5 py-1 text-xs flex items-center",placeholder:"0"})]}),showSwitch:!1},_))]}),K=o.jsx("div",{className:"space-y-2",children:o.jsx(le,{icon:o.jsx(ln,{className:"w-4 h-4 text-accent"}),title:"Buy Amount",description:"Amount of SOL to buy with",customControl:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5 opacity-75 mt-1"}),o.jsx(yt,{type:"number",step:"0.0001",min:"0",value:a.watchlistBuyButtons.buyAmount,onChange:_=>{const W=parseFloat(_.target.value);!isNaN(W)&&W>=0&&g({watchlistBuyButtons:{...a.watchlistBuyButtons,buyAmount:W}})},customSize:"w-20 h-6 bg-surface rounded-md px-1.5 py-1 text-xs flex items-center",placeholder:"0.01"})]}),showSwitch:!1})}),$=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(_n,{className:"w-4 h-4 text-accent"}),title:"Tracker Opacity",description:"Tracker transparency",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:.1,max:1,step:.01,value:a.livePnlTracker.opacity,onChange:_=>{g({livePnlTracker:{...a.livePnlTracker,opacity:_}})},className:"w-14",showInput:!0,unit:"%"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(Mn,{className:"w-4 h-4 text-accent"}),title:"Dollar Amounts",description:"Display USD values in the PNL tracker",isEnabled:a.livePnlTracker.showDollarAmounts,onToggle:_=>{!_&&!a.livePnlTracker.showSolAmounts||g({livePnlTracker:{...a.livePnlTracker,showDollarAmounts:_}})}}),o.jsx(le,{icon:o.jsx(ln,{className:"w-4 h-4 text-accent"}),title:"SOL Amounts",description:"Display SOL values in the PNL tracker",isEnabled:a.livePnlTracker.showSolAmounts,onToggle:_=>{!_&&!a.livePnlTracker.showDollarAmounts||g({livePnlTracker:{...a.livePnlTracker,showSolAmounts:_}})}})]});return o.jsx(Tt,{isOpen:r,onClose:t,title:e==="chart"?"Chart Settings":e==="button"?"Button Style Settings":e==="price"?"Price Indicator Settings":e==="quickSwap"?"Quick Swap Settings":e==="blacklist"?"Blacklist Settings":e==="socialIcons"?"Social Icons Style":e==="socialIconsExpand"?"Social Icons Size":e==="expandButton"?"Buy Button Size":e==="watchlistBuyButtons"?"Watchlist Buy Buttons Settings":e==="migration"?"Migration Indicator Settings":e==="pnlTracker"?"PNL Tracker Settings":"Quick Buy Preset Settings",children:e==="chart"?M:e==="button"?S:e==="price"?k:e==="quickSwap"?D:e==="blacklist"?U:e==="socialIcons"?F:e==="socialIconsExpand"?L:e==="expandButton"?I:e==="watchlistBuyButtons"?K:e==="migration"?O:e==="pnlTracker"?$:J})}function n0(){const{settings:r,updateSettings:t}=Z.useContext(_e),e=r.platforms.photon.features,n=r.platforms.photon.cleanup,[i,s]=Z.useState(!1),[a,l]=Z.useState(!1),[d,g]=Z.useState(!1),[x,b]=Z.useState(!1),[C,B]=Z.useState(!1),[M,k]=Z.useState(!1),[S,F]=Z.useState(!1),L=(I,U)=>{const O={platforms:{...r.platforms,photon:{...r.platforms.photon,features:{...e,[I]:U}}}};switch(I){case"autoOpenChart":O.platforms.photon.features.autoOpenChart={...e.autoOpenChart,enabled:U};break;case"quickBuyPresets":O.platforms.photon.features.quickBuyPresets={...e.quickBuyPresets,enabled:U};break;case"watchlistBuyButtons":O.platforms.photon.features.watchlistBuyButtons={...e.watchlistBuyButtons,enabled:U};break;case"shitterToggle":{O.platforms.photon.features.shitterToggle={...e.shitterToggle,enabled:U};break}case"livePnlTracker":O.platforms.photon.features.livePnlTracker={...e.livePnlTracker,enabled:U};break;case"autoBuy":O.platforms.photon.features.autoBuy={...e.autoBuy,enabled:U};break;case"solPriceIndicator":O.platforms.photon.features.solPriceIndicator={...e.solPriceIndicator,enabled:U};break;case"quickSwap":O.platforms.photon.features.quickSwap=U;break}t(O)};return o.jsxs(ht,{title:"Features",defaultOpen:!0,icon:Pr,children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(le,{icon:o.jsx(Ft,{className:"w-4 h-4 text-accent"}),title:"Multi-wallet Support",description:"Use Photon's multi-wallet",isEnabled:e.multiWallet,onToggle:I=>L("multiWallet",I),tooltip:"All selected wallets in Photon should be added in Wallets menu. When disabled, wallets with 'Active' status are used.",tooltipIcon:Ft}),o.jsx(le,{icon:o.jsx(yr,{className:"w-4 h-4 text-accent"}),title:"Shitter Toggle",description:"Shitter transactions toggle switch",isEnabled:e.shitterToggle.enabled,onToggle:I=>L("shitterToggle",I)}),o.jsx(le,{icon:o.jsx(la,{className:"w-4 h-4 text-accent"}),title:"Auto-open chart",description:"Open chart on quick-buy",isEnabled:e.autoOpenChart.enabled,onSettingsClick:()=>s(!0),onToggle:I=>L("autoOpenChart",I)}),o.jsx(le,{icon:o.jsx(Mn,{className:"w-4 h-4 text-accent"}),title:"SOL price indicator",description:"Show current SOL price",isEnabled:e.solPriceIndicator.enabled,onSettingsClick:()=>l(!0),onToggle:I=>L("solPriceIndicator",I)}),o.jsx(le,{icon:o.jsx(Nc,{className:"w-4 h-4 text-accent"}),title:"Migration Indicator",description:"Pump migration indicator",isEnabled:n.migrationIndicator.enabled,onSettingsClick:()=>B(!0),onToggle:I=>t({platforms:{...r.platforms,photon:{...r.platforms.photon,cleanup:{...n,migrationIndicator:{...n.migrationIndicator,enabled:I}}}}})}),o.jsx(le,{icon:o.jsx(ua,{className:"w-4 h-4 text-accent"}),title:"Quick-Swap Menu",description:"Custom quick swap",isEnabled:e.quickSwap,onSettingsClick:()=>g(!0),onToggle:I=>L("quickSwap",I)}),o.jsx(le,{icon:o.jsx(ln,{className:"w-4 h-4 text-accent"}),title:"Quick Buy Presets",description:"Enable quick buy presets",isEnabled:e.quickBuyPresets.enabled,onSettingsClick:()=>b(!0),onToggle:I=>L("quickBuyPresets",I)}),o.jsx(le,{icon:o.jsx(kn,{className:"w-4 h-4 text-accent"}),title:"Auto Buy",description:"Snipe tokens by Ticker / Name / CA",isEnabled:e.autoBuy.enabled,onToggle:I=>L("autoBuy",I)}),o.jsx(le,{icon:o.jsx(jc,{className:"w-4 h-4 text-accent"}),title:"Live PNL Tracker",description:"Show live profit/loss tracker",isEnabled:e.livePnlTracker.enabled,onSettingsClick:()=>F(!0),onToggle:I=>L("livePnlTracker",I)}),o.jsx(le,{icon:o.jsx(ln,{className:"w-4 h-4 text-accent"}),title:"Watchlist Buy Buttons",description:"Add buy buttons to watchlist items",isEnabled:e.watchlistBuyButtons.enabled,onSettingsClick:()=>k(!0),onToggle:I=>L("watchlistBuyButtons",I)})]}),o.jsx(Mt,{isOpen:i,onClose:()=>s(!1),type:"chart"}),o.jsx(Mt,{isOpen:a,onClose:()=>l(!1),type:"price"}),o.jsx(Mt,{isOpen:d,onClose:()=>g(!1),type:"quickSwap"}),o.jsx(Mt,{isOpen:x,onClose:()=>b(!1),type:"quickBuyPresets"}),o.jsx(Mt,{isOpen:C,onClose:()=>B(!1),type:"migration"}),o.jsx(Mt,{isOpen:M,onClose:()=>k(!1),type:"watchlistBuyButtons"}),o.jsx(Mt,{isOpen:S,onClose:()=>F(!1),type:"pnlTracker"})]})}function r0({isOpen:r,onClose:t,title:e,description:n,items:i,onAdd:s,onRemove:a,placeholder:l,isWallet:d=!1}){const{settings:g,updateSettings:x}=Z.useContext(_e),[b,C]=Z.useState(""),[B,M]=Z.useState(null),[k,S]=Z.useState(""),[F,L]=Z.useState(!1),I=Z.useRef(new Map),U=E=>/^[1-9A-HJ-NP-Za-km-z]{32,44}$/.test(E)?!0:(M("Invalid Solana wallet address"),!1),O=E=>{try{let c=E.toLowerCase();return c=c.includes("://")?new URL(c).hostname:c.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0],/^[a-z0-9]+([-.](?=[a-z0-9])[a-z0-9]+)*\.[a-z]{2,}$/.test(c)?i.some(y=>y.toLowerCase()===c)?(M("Domain already exists in blacklist"),!1):(C(c),!0):(M("Invalid domain format"),!1)}catch{return M("Invalid website format"),!1}},D=E=>{M(null);const c=E.trim();return c?d?U(c):O(c):(M("Input cannot be empty"),!1)},J=()=>{const E=b.trim().toLowerCase();!E||!D(b)||(s(E),C(""),M(null))},K=(E,c=!1)=>{window.dispatchEvent(new CustomEvent("shitter-toast",{detail:{message:E,isError:c}}))},$=E=>{const c=d?"blacklistedDevWallets":"blacklistedSites";x({platforms:{...g.platforms,photon:{...g.platforms.photon,cleanup:{...g.platforms.photon.cleanup,[c]:E}}}})},_=E=>{const c=E.target.files?.[0];if(!c)return K("No file selected for import",!0);const m=new FileReader;m.onload=y=>{try{const j=JSON.parse(y.target?.result);if(!Array.isArray(j))throw new Error("Import data must be an array");const N=new Set,P=new Set(i);j.forEach(A=>{if(typeof A!="string")throw new Error("All items must be strings");const u=A.trim().toLowerCase();u&&!P.has(u)&&N.add(u)});const q=Array.from(N);if(!q.length)return K("No new items to import");$([...i,...q]),q.forEach((A,u)=>{setTimeout(()=>{I.current.get(A)?.classList.add("importing")},Math.floor(u/50)*25)}),K(`Successfully imported ${q.length} items`)}catch(j){K(`Import failed: ${j instanceof Error?j.message:"Unknown error occurred"}`,!0)}},m.onerror=()=>K("Failed to read file",!0),m.readAsText(c),E.target.value=""},W=()=>{const E=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),c=URL.createObjectURL(E),m=document.createElement("a");m.href=c,m.download=`blacklist-${d?"wallets":"sites"}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(c)},G=()=>{i.forEach(E=>{I.current.get(E)?.classList.add("removing")}),setTimeout(()=>{$([]),L(!1)},300)};return o.jsxs(Tt,{isOpen:r,onClose:t,title:e,children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-[11px] text-text-secondary leading-tight",children:n}),o.jsxs("div",{className:"flex gap-1.5",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(yt,{type:"text",value:b,onChange:E=>{C(E.target.value),M(null)},placeholder:l,className:B?"border-red-500/50 hover:border-red-500/75 focus:border-red-500":"",onKeyDown:E=>E.key==="Enter"&&J()})}),o.jsx("div",{className:"flex items-end",children:o.jsxs("button",{onClick:J,className:"px-2 text-xs font-medium rounded-md transition-all flex items-center gap-1 bg-accent text-white hover:bg-accent-light whitespace-nowrap h-[34px]",children:[o.jsx(mr,{className:"w-3 h-3"}),"Add"]})})]}),B&&o.jsx("div",{className:"text-[10px] text-red-500 mt-1 ml-1",children:B}),o.jsxs("div",{className:"flex gap-1.5 pb-2 border-b border-white/[0.05]",children:[o.jsxs("label",{className:"px-2 py-1.5 text-[11px] font-medium rounded-md transition-all flex items-center gap-1 w-[calc(50%-0.375rem)] bg-surface text-text-primary hover:bg-surface-dark cursor-pointer justify-center",children:[o.jsx("input",{type:"file",accept:".json",onChange:_,className:"hidden"}),o.jsx(da,{className:"w-3 h-3"}),"Import"]}),o.jsxs("button",{onClick:W,disabled:!i.length,className:"px-2 py-1.5 text-[11px] font-medium rounded-md transition-all flex items-center gap-1 w-[calc(50%-0.375rem)] bg-surface text-text-primary hover:bg-surface-dark disabled:opacity-50 disabled:cursor-not-allowed justify-center",children:[o.jsx(ha,{className:"w-3 h-3"}),"Export"]})]}),!!i.length&&o.jsxs("div",{className:"flex gap-1.5",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(yt,{type:"text",value:k,onChange:E=>S(E.target.value),placeholder:"Search blacklist..."})}),o.jsx("div",{className:"flex items-end",children:o.jsxs("button",{onClick:()=>L(!0),className:"px-2 text-xs font-medium text-text-secondary hover:text-red-500 transition-colors flex items-center gap-1 bg-surface-dark rounded-md border border-white/[0.05] hover:border-red-500/30 whitespace-nowrap h-[34px]",children:[o.jsx(fa,{className:"w-3 h-3"}),"Clear All"]})})]}),o.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1.5 scrollbar-thin scrollbar-thumb-accent/10 scrollbar-track-transparent hover:scrollbar-thumb-accent/20",children:[i.filter(E=>E.toLowerCase().includes(k.toLowerCase())).map(E=>o.jsxs("div",{ref:c=>c?I.current.set(E,c):I.current.delete(E),className:"blacklist-item flex items-center justify-between py-1 px-2 bg-surface-dark rounded-md border border-white/[0.05] group hover:border-white/[0.08] transition-all",children:[o.jsx("span",{className:`text-[11px] font-medium truncate flex-1 min-w-0 pr-2 ${d?"font-mono":""}`,children:E}),o.jsx("button",{onClick:()=>a(E),className:"p-0.5 hover:bg-red-500/10 rounded-md transition-all opacity-0 group-hover:opacity-100 shrink-0",children:o.jsx(Lr,{className:"w-3 h-3 text-red-500"})})]},E)),!i.length&&o.jsx("div",{className:"text-center py-2 text-text-secondary text-[11px]",children:"No items in blacklist"})]})]}),o.jsx(sr,{isOpen:F,onClose:()=>L(!1),onConfirm:G,title:"Clear Blacklist",message:`Remove all ${i.length} items from the blacklist? This cannot be undone.`,confirmText:"Clear All",isDangerous:!0})]})}function s0(){const{settings:r,updateSettings:t}=Z.useContext(_e),[e,n]=Z.useState(!1),[i,s]=Z.useState(!1),[a,l]=Z.useState(!1),[d,g]=Z.useState(!1),[x,b]=Z.useState(0),[C,B]=Z.useState(!1),M=r.platforms.photon.cleanup.blacklistedSites,k=async()=>{try{if(typeof chrome<"u"&&chrome.storage?.local){const D=(await chrome.storage.local.get(["hiddenTokens"])).hiddenTokens||[];b(D.length)}}catch(O){console.error("Failed to fetch hidden tokens count:",O)}};Z.useEffect(()=>{k()},[]),Z.useEffect(()=>{if(C){const O=setTimeout(()=>B(!1),2e3);return()=>clearTimeout(O)}},[C]);const S=O=>{t({platforms:{...r.platforms,photon:{...r.platforms.photon,cleanup:{...r.platforms.photon.cleanup,blacklistedSites:O}}}})},F=O=>{M.includes(O)||S([...M,O])},L=O=>{S(M.filter(D=>D!==O))},I=async()=>{if(!d){g(!0),setTimeout(()=>g(!1),3e3);return}l(!0);try{if(typeof chrome<"u"&&chrome.storage?.local)await chrome.storage.local.remove("hiddenTokens"),b(0),g(!1),B(!0);else throw new Error("Chrome storage API not available")}catch(O){console.error("Failed to clear hidden tokens:",O),window.dispatchEvent(new CustomEvent("shitter-toast",{detail:{message:"Failed to clear hidden tokens",isError:!0}}))}finally{l(!1),g(!1)}},U=()=>C?"bg-green-500/10 text-green-500 hover:bg-green-500/20":d?"bg-red-500/10 text-red-500 hover:bg-red-500/20":a?"bg-accent/10 text-accent cursor-not-allowed":"bg-surface hover:bg-surface-dark text-text-secondary hover:text-text-primary hover:shadow-sm hover:shadow-accent/5";return o.jsxs(ht,{title:"Cleanup Options",defaultOpen:!0,icon:fa,children:[o.jsx("div",{className:"space-y-1.5",children:o.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-surface-dark rounded-md border border-white/[0.05]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-md bg-surface flex items-center justify-center",children:o.jsx(Ac,{className:"w-4 h-4 text-accent"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-xs font-medium",children:"Blacklist by Site"}),o.jsxs("div",{className:"text-xs text-text-secondary mt-0.5",children:[M.length," sites blocked"]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>s(!0),className:"p-1.5 hover:bg-surface rounded-md transition-colors",children:o.jsx(ia,{className:"w-4 h-4 text-text-secondary"})}),o.jsx("button",{onClick:()=>n(!0),className:"p-1.5 hover:bg-surface rounded-md transition-colors",children:o.jsx(sa,{className:"w-4 h-4 text-text-secondary"})})]})]})}),o.jsx("div",{className:"mt-3",children:o.jsxs("button",{onClick:I,disabled:a,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-md text-xs font-medium transition-all relative ${U()}`,children:[C?o.jsx(fn,{className:"w-3.5 h-3.5"}):o.jsx(_n,{className:`w-3.5 h-3.5 transition-transform ${a?"animate-pulse":"group-hover:scale-110"}`}),C?"Hidden tokens cleared successfully!":d?"Click again to confirm":a?"Clearing...":`Clear Hidden Tokens (${x})`,o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/[0.03] via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none rounded-md"})]})}),o.jsx(r0,{isOpen:e,onClose:()=>n(!1),title:"Blacklist by Site",description:"Add websites to hide tokens from specific domains. One domain per line.",items:M,onAdd:F,onRemove:L,placeholder:"Enter domain (e.g., domain.com)"}),o.jsx(Mt,{isOpen:i,onClose:()=>s(!1),type:"blacklist"})]})}function i0(){const[r,t]=Z.useState(!1),[e,n]=Z.useState(!1),{settings:i,updateSettings:s}=Z.useContext(_e),a=i.platforms?.photon?.buttons??{expandBuyButton:{enabled:!1},expandSocialIcons:{enabled:!1}},l=(d,g)=>{s({platforms:{...i.platforms,photon:{...i.platforms.photon,buttons:{...i.platforms.photon.buttons,[d]:{...i.platforms.photon.buttons[d],enabled:g}}}}})};return o.jsxs(ht,{title:"Button Options",defaultOpen:!0,icon:br,className:"relative group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/[0.03] via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none rounded-md"}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(le,{icon:o.jsx(br,{className:"w-4 h-4 text-accent"}),title:"Quick Buy Buttons",description:"Set quick buy button size",isEnabled:a.expandBuyButton.enabled,onSettingsClick:()=>n(!0),onToggle:d=>l("expandBuyButton",d)}),o.jsx(le,{icon:o.jsx(an,{className:"w-4 h-4 text-accent"}),title:"Tokens Socials",description:"Set social icons size",isEnabled:a.expandSocialIcons.enabled,onSettingsClick:()=>t(!0),onToggle:d=>l("expandSocialIcons",d)})]}),o.jsx(Mt,{isOpen:e,onClose:()=>n(!1),type:"expandButton"}),o.jsx(Mt,{isOpen:r,onClose:()=>t(!1),type:"socialIconsExpand"})]})}function o0(){const[r,t]=Z.useState(!1),[e,n]=Z.useState(!1),{settings:i,updateSettings:s}=Z.useContext(_e),a=i.platforms.photon,l=a.style,d=a.buttons,g=(b,C)=>{s({platforms:{...i.platforms,photon:{...a,buttons:{...d,[b]:{...d[b],enabled:C}}}}})},x=(b,C)=>{s({platforms:{...i.platforms,photon:{...a,style:{...l,[b]:C}}}})};return o.jsxs(ht,{title:"Style Options",defaultOpen:!0,icon:Tn,children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(le,{icon:o.jsx(Tn,{className:"w-4 h-4 text-accent"}),title:"Style Buy Button",description:"Set quick buy buttons style",isEnabled:d.styleBuyButton.enabled,onSettingsClick:()=>t(!0),onToggle:b=>g("styleBuyButton",b)}),o.jsx(le,{icon:o.jsx(Tn,{className:"w-4 h-4 text-accent"}),title:"Style Social Icons",description:"Set custom social icons style",isEnabled:d.styleSocialIcons.enabled,onSettingsClick:()=>n(!0),onToggle:b=>g("styleSocialIcons",b)}),o.jsx(le,{icon:o.jsx(Ic,{className:"w-4 h-4 text-accent"}),title:"Compact Cards",description:"Compact token cards",isEnabled:l.compactCards,onToggle:b=>x("compactCards",b)}),o.jsx(le,{icon:o.jsx(xn,{className:"w-4 h-4 text-accent"}),title:"Style Token Cards",description:"Set custom card style",isEnabled:l.styleTokenCards,onToggle:b=>x("styleTokenCards",b)})]}),o.jsx(Mt,{isOpen:r,onClose:()=>t(!1),type:"button"}),o.jsx(Mt,{isOpen:e,onClose:()=>n(!1),type:"socialIcons"})]})}function wn({isOpen:r,onClose:t,type:e}){const{settings:n,updateSettings:i}=Z.useContext(_e),{platforms:s}=n,a=s.axiom.features,l=s.axiom.buttons,d=I=>{i({platforms:{...s,axiom:{...s.axiom,features:{...a,...I}}}})},g=I=>{i({platforms:{...s,axiom:{...s.axiom,buttons:{...l,...I}}}})},[x,b]=Z.useState(()=>a.quickBuyPresets.amounts.map(String));Z.useEffect(()=>{b(a.quickBuyPresets.amounts.map(String))},[a.quickBuyPresets.amounts]);const C=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(oa,{className:"w-4 h-4 text-accent"}),title:"Focus New Tab",description:"Focus on new chart tab",isEnabled:a.autoOpenChart.focusTab,onToggle:I=>{d({autoOpenChart:{...a.autoOpenChart,focusTab:I}})}}),o.jsx(le,{icon:o.jsx(aa,{className:"w-4 h-4 text-accent"}),title:"Chart Open Delay",description:"Delay before opening chart",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:5e3,step:100,value:a.autoOpenChart.delay,onChange:I=>{d({autoOpenChart:{...a.autoOpenChart,delay:I}})},className:"w-14",showInput:!0,unit:"ms"})}),showSwitch:!1})]}),B=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(xn,{className:"w-4 h-4 text-accent"}),title:"New Pairs",description:"Apply to new pairs section",isEnabled:a.quickBuyPresets.affectNewPairs,onToggle:I=>{d({quickBuyPresets:{...a.quickBuyPresets,affectNewPairs:I}})}}),o.jsx(le,{icon:o.jsx(xn,{className:"w-4 h-4 text-accent"}),title:"Final Stretch",description:"Apply to final stretch section",isEnabled:a.quickBuyPresets.affectFinalStretch,onToggle:I=>{d({quickBuyPresets:{...a.quickBuyPresets,affectFinalStretch:I}})}}),o.jsx(le,{icon:o.jsx(xn,{className:"w-4 h-4 text-accent"}),title:"Migrated",description:"Apply to migrated section",isEnabled:a.quickBuyPresets.affectMigrated,onToggle:I=>{d({quickBuyPresets:{...a.quickBuyPresets,affectMigrated:I}})}}),[0,1,2,3,4].map(I=>o.jsx(le,{icon:o.jsx(ln,{className:"w-4 h-4 text-accent"}),title:`Preset ${I+1}`,description:(I===0?"First":I===1?"Second":I===2?"Third":I===3?"Fourth":"Fifth")+" quick buy amount",customControl:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:"./assets/media/icons/sol.svg",alt:"SOL",className:"w-3.5 h-3.5 opacity-75 mt-1"}),o.jsx(yt,{type:"number",step:"0.0001",min:"0",allowEmpty:!0,value:x[I],onChange:U=>{const O=U.target.value;b(D=>{const J=[...D];return J[I]=O,J})},onBlur:U=>{const O=U.target.value;let D=O===""?0:parseFloat(O);(isNaN(D)||D<0)&&(D=0);const J=[...a.quickBuyPresets.amounts];J[I]=D,d({quickBuyPresets:{...a.quickBuyPresets,amounts:J}})},customSize:"w-16 h-6 bg-surface rounded-md px-1.5 py-1 text-xs flex items-center",placeholder:"0"})]}),showSwitch:!1},I))]}),M=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(on,{className:"w-4 h-4 text-accent"}),title:"Button Width",description:"Button horizontal size",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:50,max:600,step:5,value:l.expandBuyButton.width,onChange:I=>{g({expandBuyButton:{...l.expandBuyButton,width:I}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(on,{className:"w-4 h-4 text-accent"}),title:"Button Height",description:"Button vertical size",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:24,max:200,step:1,value:l.expandBuyButton.height,onChange:I=>{g({expandBuyButton:{...l.expandBuyButton,height:I}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(_n,{className:"w-4 h-4 text-accent"}),title:"Button Opacity",description:"Button transparency",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:.05,max:1,step:.01,value:l.expandBuyButton.opacity??1,onChange:I=>{g({expandBuyButton:{...l.expandBuyButton,opacity:I}})},className:"w-14",showInput:!0,unit:"%"})}),showSwitch:!1})]}),k=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(on,{className:"w-4 h-4 text-accent"}),title:"Border Radius",description:"Button corner roundness",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:20,value:l.styleBuyButton.borderRadius,onChange:I=>{g({styleBuyButton:{...l.styleBuyButton,borderRadius:I}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(on,{className:"w-4 h-4 text-accent"}),title:"Border Width",description:"Button border thickness",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:3,value:l.styleBuyButton.borderWidth,onChange:I=>{g({styleBuyButton:{...l.styleBuyButton,borderWidth:I}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(hr,{className:"w-4 h-4 text-accent"}),title:"Border Style",description:"Button border style",customControl:o.jsx("div",{className:"flex items-center gap-2",children:["solid","dashed","dotted"].map(I=>o.jsx("button",{onClick:()=>{g({styleBuyButton:{...l.styleBuyButton,borderStyle:I}})},className:`px-1.5 py-0.5 rounded-md text-[10px] font-medium ${l.styleBuyButton.borderStyle===I?"bg-accent text-white":"bg-surface text-text-secondary"}`,children:I.charAt(0).toUpperCase()+I.slice(1)},I))}),showSwitch:!1})]}),S=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(xr,{className:"w-4 h-4 text-accent"}),title:"Shitter Tools",description:"Enable advanced tools",isEnabled:a.quickSwapTools,onToggle:I=>{d({quickSwapTools:I})}}),o.jsx(le,{icon:o.jsx(xr,{className:"w-4 h-4 text-accent"}),title:"Quick Wallet Presets",description:"Enable wallet preset buttons",isEnabled:a.quickWalletPresets.enabled,onToggle:I=>d({quickWalletPresets:{...a.quickWalletPresets,enabled:I}})})]}),F=o.jsx("div",{className:"space-y-2",children:o.jsx(le,{icon:o.jsx(an,{className:"w-4 h-4 text-accent"}),title:"Icon Size",description:"Social icons size",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:16,max:100,step:1,value:l.expandSocialIcons.width,onChange:I=>{g({expandSocialIcons:{...l.expandSocialIcons,width:I,height:I}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1})}),L=o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{icon:o.jsx(an,{className:"w-4 h-4 text-accent"}),title:"Border color",description:"Icons color palette",customControl:o.jsx(di,{value:l.styleSocialIcons.palette,onChange:I=>{g({styleSocialIcons:{...l.styleSocialIcons,palette:I}})},customColors:n.customColors,onCustomColorAdd:I=>{i({customColors:[...n.customColors,I]})},onCustomColorRemove:I=>{i({customColors:n.customColors.filter(U=>U!==I)})}}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(hr,{className:"w-4 h-4 text-accent"}),title:"Border radius",description:"Icon border radius",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:20,step:1,value:l.styleSocialIcons.borderRadius,onChange:I=>{g({styleSocialIcons:{...l.styleSocialIcons,borderRadius:I}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1}),o.jsx(le,{icon:o.jsx(hr,{className:"w-4 h-4 text-accent"}),title:"Border width",description:"Icon border width",customControl:o.jsx("div",{className:"min-w-[100px] justify-end",children:o.jsx(lt,{min:0,max:5,step:1,value:l.styleSocialIcons.borderWidth,onChange:I=>{g({styleSocialIcons:{...l.styleSocialIcons,borderWidth:I}})},className:"w-14",showInput:!0,unit:"px"})}),showSwitch:!1})]});return o.jsx(Tt,{isOpen:r,onClose:t,title:e==="chart"?"Chart Settings":e==="quickBuyPresets"?"Quick Buy Preset Settings":e==="expandButton"?"Buy Button Size":e==="button"?"Button Style Settings":e==="quickSwap"?"Quick-Swap Settings":e==="styleSocialIcons"?"Social Icons Style Settings":"Social Icons Size",children:e==="chart"?C:e==="quickBuyPresets"?B:e==="expandButton"?M:e==="button"?k:e==="quickSwap"?S:e==="styleSocialIcons"?L:F})}function a0(){const{settings:r,updateSettings:t}=Z.useContext(_e),e=r.platforms.axiom.features,[n,i]=Z.useState(!1),[s,a]=Z.useState(!1),[l,d]=Z.useState(!1),g=(x,b)=>{const C={...e};x==="autoOpenChart"?C.autoOpenChart={...e.autoOpenChart,enabled:b}:x==="quickBuyPresets"?C.quickBuyPresets={...e.quickBuyPresets,enabled:b}:x==="quickWalletPresets"?C.quickWalletPresets={...e.quickWalletPresets,enabled:b}:x==="autoBuy"?C.autoBuy={...e.autoBuy,enabled:b}:x==="shitterToggle"?C.shitterToggle={...e.shitterToggle,enabled:b}:C[x]=b,t({platforms:{...r.platforms,axiom:{...r.platforms.axiom,features:C}}})};return o.jsxs(ht,{title:"Features",defaultOpen:!0,icon:Pr,children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(le,{icon:o.jsx(Ft,{className:"w-4 h-4 text-accent"}),title:"Multi-wallet Support",description:"Use Axiom's multi-wallet",isEnabled:e.multiWallet,onToggle:x=>g("multiWallet",x),tooltip:"All selected wallets in Axiom should be added in Wallets menu. When disabled, wallets with 'Active' status are used.",tooltipIcon:Ft}),o.jsx(le,{icon:o.jsx(yr,{className:"w-4 h-4 text-accent"}),title:"Shitter Toggle",description:"Shitter transactions toggle switch",isEnabled:e.shitterToggle.enabled,onToggle:x=>g("shitterToggle",x)}),o.jsx(le,{icon:o.jsx(la,{className:"w-4 h-4 text-accent"}),title:"Auto-open chart",description:"Open chart on quick-buy",isEnabled:e.autoOpenChart.enabled,onSettingsClick:()=>i(!0),onToggle:x=>g("autoOpenChart",x)}),o.jsx(le,{icon:o.jsx(ln,{className:"w-4 h-4 text-accent"}),title:"Shitter Presets",description:"Sync Axiom presets with Shitter",isEnabled:e.presetsSupport,onToggle:x=>g("presetsSupport",x)}),o.jsx(le,{icon:o.jsx(ua,{className:"w-4 h-4 text-accent"}),title:"Quick-Swap Menu",description:"Custom quick swap",isEnabled:e.quickSwap,onSettingsClick:()=>d(!0),onToggle:x=>g("quickSwap",x)}),o.jsx(le,{icon:o.jsx(ln,{className:"w-4 h-4 text-accent"}),title:"Quick Buy Presets",description:"Enable quick buy presets",isEnabled:e.quickBuyPresets.enabled,onSettingsClick:()=>a(!0),onToggle:x=>g("quickBuyPresets",x)}),o.jsx(le,{icon:o.jsx(kn,{className:"w-4 h-4 text-accent"}),title:"Auto Buy",description:"Snipe tokens by Ticker / Name / CA",isEnabled:e.autoBuy.enabled,onToggle:x=>g("autoBuy",x)})]}),o.jsx(wn,{isOpen:n,onClose:()=>i(!1),type:"chart"}),o.jsx(wn,{isOpen:s,onClose:()=>a(!1),type:"quickBuyPresets"}),o.jsx(wn,{isOpen:l,onClose:()=>d(!1),type:"quickSwap"})]})}function c0(){const{settings:r,updateSettings:t}=Z.useContext(_e),[e,n]=Z.useState(!1),[i,s]=Z.useState(!1),a=r.platforms?.axiom?.buttons??{expandBuyButton:{enabled:!1},expandSocialIcons:{enabled:!1}},l=(d,g)=>{const x=d==="expandBuyButton"?{width:220,height:45}:{width:24,height:24};t({platforms:{...r.platforms,axiom:{...r.platforms.axiom,buttons:{...r.platforms.axiom.buttons,[d]:{...r.platforms.axiom.buttons[d],enabled:g,...g?{width:r.platforms.axiom.buttons[d]?.width||x.width,height:r.platforms.axiom.buttons[d]?.height||x.height}:{}}}}}})};return o.jsxs(ht,{title:"Expand Options",defaultOpen:!0,icon:br,className:"relative group",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(le,{icon:o.jsx(br,{className:"w-4 h-4 text-accent"}),title:"Quick Buy Buttons",description:"Set quick buy button size",isEnabled:a.expandBuyButton.enabled,onSettingsClick:()=>n(!0),onToggle:d=>l("expandBuyButton",d)}),o.jsx(le,{icon:o.jsx(an,{className:"w-4 h-4 text-accent"}),title:"Social Icons",description:"Set social icons size",isEnabled:a.expandSocialIcons.enabled,onSettingsClick:()=>s(!0),onToggle:d=>l("expandSocialIcons",d)})]}),o.jsx(wn,{isOpen:e,onClose:()=>n(!1),type:"expandButton"}),o.jsx(wn,{isOpen:i,onClose:()=>s(!1),type:"socialIconsExpand"})]})}function l0(){const[r,t]=Z.useState(!1),[e,n]=Z.useState(!1),{settings:i,updatePlatformSettings:s}=Z.useContext(_e),l=i.platforms.axiom.buttons,d=(g,x)=>{s("axiom","buttons",g,{...l[g],enabled:x})};return o.jsxs(ht,{title:"Style Options",defaultOpen:!0,icon:Tn,children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(le,{icon:o.jsx(Tn,{className:"w-4 h-4 text-accent"}),title:"Style Buy Button",description:"Set quick buy buttons style",isEnabled:l.styleBuyButton.enabled,onSettingsClick:()=>t(!0),onToggle:g=>d("styleBuyButton",g)}),o.jsx(le,{icon:o.jsx(Tn,{className:"w-4 h-4 text-accent"}),title:"Style Social Icons",description:"Set custom social icons style",isEnabled:l.styleSocialIcons.enabled,onSettingsClick:()=>n(!0),onToggle:g=>d("styleSocialIcons",g)})]}),o.jsx(wn,{isOpen:r,onClose:()=>t(!1),type:"button"}),o.jsx(wn,{isOpen:e,onClose:()=>n(!1),type:"styleSocialIcons"})]})}const fc=r=>({photon:"/assets/media/icons/photon.svg",axiom:"/assets/media/icons/axiom.svg","???":"/assets/media/icons/mystery.svg"})[r];function u0({id:r,isActive:t,onClick:e}){const n=r.charAt(0).toUpperCase()+r.slice(1);return o.jsx("button",{onClick:e,className:`group relative flex-1 px-2 py-1 rounded-md transition-all duration-200 border ${t?"bg-[#0066FF] text-white shadow-lg shadow-accent/25 border-[#0066FF]":"bg-transparent text-text-secondary hover:text-text-primary border-transparent hover:border-white/[0.1]"}`,children:o.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[o.jsx("img",{src:fc(r),alt:`${r} logo`,className:`w-3.5 h-3.5 object-contain transition-opacity ${t?"opacity-100":"opacity-75 group-hover:opacity-100"} ${r==="axiom"?"axiom-logo":""}`}),o.jsx("span",{className:"font-medium text-xs transition-all duration-200",children:n})]})})}function d0(){const[r,t]=Z.useState(()=>localStorage.getItem("lastActivePlatform")||"photon");Z.useEffect(()=>{localStorage.setItem("lastActivePlatform",r)},[r]);const e=()=>{switch(r){case"photon":return o.jsxs("div",{className:"space-y-4",children:[o.jsx(n0,{}),o.jsx(i0,{}),o.jsx(s0,{}),o.jsx(o0,{})]},"photon");case"axiom":return o.jsxs("div",{className:"space-y-4",children:[o.jsx(a0,{}),o.jsx(c0,{}),o.jsx(l0,{})]},"axiom");default:return o.jsx("div",{className:"flex items-center justify-center h-48 text-[var(--text-secondary)] text-sm",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mb-2",children:o.jsx("img",{src:fc(r),alt:r,className:`w-20 h-20 mx-auto opacity-50 ${r==="???"?"bouncy-float":""}`})}),r.charAt(0).toUpperCase()+r.slice(1)," platform's settings"]})},"coming-soon")}},n=["photon","axiom","???"];return o.jsxs("div",{children:[o.jsx("div",{className:"flex gap-1 bg-[var(--surface-dark)] p-1 rounded-md border border-white/[0.1] mb-4 shadow-sm",children:n.map(i=>o.jsx(u0,{id:i,isActive:r===i,onClick:()=>t(i)},i))}),o.jsx("div",{className:"transition-all duration-200",children:e()},r)]})}function Rr(){return Rr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Rr.apply(this,arguments)}function h0(r,t){if(r==null)return{};var e={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}var f0=["cdnSuffix","cdnUrl","countryCode","style","svg"],p0="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",m0="svg",g0=127397,Ho=function(t){var e=t.cdnSuffix,n=e===void 0?m0:e,i=t.cdnUrl,s=i===void 0?p0:i,a=t.countryCode,l=t.style,d=t.svg,g=d===void 0?!1:d,x=h0(t,f0);if(typeof a!="string")return null;if(g){var b=""+s+a.toLowerCase()+"."+n;return Z.createElement("img",Object.assign({},x,{src:b,style:Rr({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},l)}))}var C=a.toUpperCase().replace(/./g,function(B){return String.fromCodePoint(B.charCodeAt(0)+g0)});return Z.createElement("span",Object.assign({role:"img"},x,{style:Rr({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},l)}),C)};function Vo({status:r}){const t={good:"bg-green-500",medium:"bg-yellow-500",bad:"bg-red-500",unknown:"bg-gray-500"};return o.jsx("div",{className:`w-2 h-2 rounded-full ${t[r]} shadow-sm`,title:`Server Status: ${r.charAt(0).toUpperCase()+r.slice(1)}`})}function x0({value:r,onChange:t}){const[e,n]=Z.useState(!1),[i,s]=Z.useState(0),a=Z.useRef(null),l=Z.useRef(null),{settings:d,updateSettings:g}=Z.useContext(_e),x=d.autoSelectServer??!0,b=qc(),C=Z.useMemo(()=>Dc.map(L=>({...L,latency:b[L.id]?.value??null,hasError:b[L.id]?.error??!1})),[b]),B=({latency:L,hasError:I})=>I||L==null?"unknown":L<100?"good":"medium",M=L=>C.find(I=>I.id===L);Z.useEffect(()=>{if(r||Object.keys(b).length===0)return;let L="",I=1/0;for(const U of C)!U.hasError&&U.latency!=null&&U.latency<I&&(I=U.latency,L=U.id);L&&t(L)},[r,b,C,t]),Z.useEffect(()=>{if(!x||Date.now()-i<5e4)return;const L=zc(b);L&&L.id!==r&&(t(L.id),s(Date.now()))},[x,r,b,i,t]),Z.useEffect(()=>{const L=I=>{e&&!a.current?.contains(I.target)&&!l.current?.contains(I.target)&&n(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[e]);const k=M(r),S=k?.countryCode??"",F=k?.hasError?"Offline":k?.latency!=null?`${k.latency}ms latency`:"Measuring latency...";return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary",children:[o.jsx(hi,{className:"w-3.5 h-3.5 text-accent"}),"Server Location"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-text-secondary",children:"Auto-select"}),o.jsx(Gr,{checked:x,onChange:L=>{g({...d,autoSelectServer:L})}})]})]}),o.jsxs("div",{className:"relative",ref:a,children:[o.jsx("button",{onClick:()=>n(L=>!L),disabled:x,className:`w-full text-left appearance-none bg-surface-dark rounded-md px-3.5 py-2.5 text-text-primary text-xs font-medium border ${x?"opacity-50 cursor-not-allowed border-white/[0.05]":e?"border-accent":"border-white/[0.05] hover:border-white/[0.08]"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative w-7 h-7 rounded-md bg-surface flex items-center justify-center",children:[o.jsx(Fi,{className:"w-3.5 h-3.5 text-accent"}),S&&o.jsx("div",{className:"absolute -right-1 -bottom-1 w-[18px] h-[18px] rounded-full bg-surface-dark border border-black/50 shadow-lg flex items-center justify-center overflow-hidden",children:o.jsx(Ho,{countryCode:S,svg:!0,style:{width:"23px",height:"23px",transform:S==="US"?"scale(1.6, 1.5)":"scale(1.5)",transformOrigin:"center",margin:"-2px"}})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium flex items-center gap-2",children:o.jsx("span",{children:k?.name||"Select a server"})}),o.jsx("div",{className:"text-xs text-text-secondary mt-0.5",children:F})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[r&&o.jsx(Vo,{status:B({latency:k?.latency??null,hasError:k?.hasError??!1})}),x&&o.jsx(kn,{className:"w-3.5 h-3.5 text-accent"}),o.jsx(Sn,{className:`w-3.5 h-3.5 text-text-secondary transition-all duration-200 ${e?"rotate-180":""}`})]})]})}),!x&&o.jsx("div",{ref:l,className:`absolute w-full mt-1 bg-surface-dark rounded-md overflow-hidden shadow-lg shadow-black/50 z-10 border border-white/[0.05] transition-all duration-300 transform origin-top ${e?"opacity-100 scale-100 translate-y-0 visible":"opacity-0 scale-95 -translate-y-2 invisible"}`,children:C.map(L=>o.jsxs("button",{className:`w-full h-[52px] px-3.5 py-2 text-xs flex items-center justify-between text-left transition-all duration-200 ${L.id===r?"bg-surface":"hover:bg-surface"}`,onClick:I=>{I.stopPropagation(),t(L.id),n(!1)},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative w-7 h-7 rounded-md bg-surface flex items-center justify-center",children:[o.jsx(Fi,{className:"w-3.5 h-3.5 text-accent"}),L.countryCode&&o.jsx("div",{className:"absolute -right-1 -bottom-1 w-[18px] h-[18px] rounded-full bg-surface-dark border border-black/50 shadow-lg flex items-center justify-center overflow-hidden",children:o.jsx(Ho,{countryCode:L.countryCode,svg:!0,style:{width:"23px",height:"23px",transform:L.countryCode==="US"?"scale(1.6, 1.5)":"scale(1.5)",transformOrigin:"center",margin:"-2px"}})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:L.name}),o.jsx("div",{className:"text-xs text-text-secondary mt-0.5",children:L.hasError?"Offline":L.latency!=null?`${L.latency}ms latency`:"Measuring latency..."})]})]}),o.jsx(Vo,{status:B(L)})]},L.id))})]})]})}const Vs=[{value:"light",label:"Light",icon:Cc},{value:"dark",label:"Dark",icon:_c}];function y0(){const[r,t]=Z.useState(!1),{settings:e,updateSettings:n}=Z.useContext(_e),i=Vs.find(a=>a.value===e.theme)||Vs[1];Z.useEffect(()=>{if(!r)return;const a=l=>{l.target.closest(".theme-selector")||t(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[r]);const s=a=>{n({theme:a}),un(a),t(!1)};return o.jsxs("div",{className:"relative theme-selector",children:[o.jsxs("button",{onClick:()=>t(!r),className:"w-full justify-between border border-white/[0.05] hover:border-white/[0.08] bg-surface rounded-md transition-all flex items-center gap-2 px-2.5 py-1.5 text-xs font-medium",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(i.icon,{className:"w-3.5 h-3.5 text-accent"}),o.jsx("span",{children:i.label})]}),o.jsx(Sn,{className:`w-3.5 h-3.5 text-text-secondary transition-transform duration-200 ${r?"rotate-180":""}`})]}),o.jsx("div",{className:`absolute w-full mt-1 bg-surface rounded-md overflow-hidden border border-white/[0.05] shadow-lg shadow-black/50 z-10 transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)] transform origin-top ${r?"opacity-100 scale-100 translate-y-0 visible":"opacity-0 scale-95 -translate-y-2 invisible"}`,children:Vs.map(({value:a,label:l,icon:d})=>o.jsxs("button",{onClick:()=>s(a),className:`w-full flex items-center gap-2 px-2.5 py-1.5 text-xs font-medium ${e.theme===a?"bg-accent/10 text-accent":"hover:bg-surface-dark"}`,children:[o.jsx(d,{className:"w-3.5 h-3.5"}),l]},a))})]})}function pc({isOpen:r,onOpen:t,onClose:e,trigger:n,children:i,className:s="",menuClassName:a="",openUpward:l=!1}){const d=Z.useRef(null);return Z.useEffect(()=>{if(!r)return;const g=x=>{d.current?.contains(x.target)||e()};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[r,e]),o.jsxs("div",{ref:d,className:`relative dropdown-container ${s}`,children:[o.jsx("div",{onClick:r?e:t,children:n}),r&&o.jsx("div",{className:`absolute w-full bg-surface-dark rounded-md shadow-lg shadow-black/50 z-20 border border-white/[0.05] transition-all duration-300 transform origin-top scrollbar-thin ${l?"bottom-full mb-1":"top-full mt-1"} ${a}`,style:{maxHeight:"128px",overflowY:"auto"},children:i})]})}const Go=[{value:"Control",label:"Ctrl"},{value:"Shift",label:"Shift"},{value:"Alt",label:"Alt"},{value:"Meta",label:"Cmd"}],b0={Control:"Ctrl",Meta:"Cmd",Alt:"Alt",Shift:"Shift",Enter:"Enter",Escape:"Esc",Backspace:"Back",Delete:"Del",Tab:"Tab",CapsLock:"Caps",ArrowUp:"â†‘",ArrowDown:"â†“",ArrowLeft:"â†",ArrowRight:"â†’"," ":"Space"};function w0({isOpen:r,onClose:t}){const{settings:e,updateSettings:n}=Z.useContext(_e),[i,s]=Z.useState(null),[a,l]=Z.useState(null),d=O=>O?b0[O]||O.toUpperCase():"",g=(O,D)=>{D!==0&&s({presetIndex:O,keyIndex:D})},x=ye.useCallback((O,D,J)=>{const K=[...e.keybinds],$=D===0?"primary":"secondary";K[O]={...K[O],[$]:J},n({keybinds:K}),i&&s(null)},[e.keybinds,n,i]),b=(O,D,J)=>{J.stopPropagation();const K=[...e.keybinds],$=D===0?"primary":"secondary";K[O]={...K[O],[$]:""},n({keybinds:K})},C=ye.useCallback(O=>{if(!i)return;O.preventDefault(),O.stopPropagation();let D=O.key;D.length===1&&(D=D.toLowerCase()),x(i.presetIndex,i.keyIndex,D)},[i,x]),B=ye.useCallback(O=>{if(!i)return;O.preventDefault(),O.stopPropagation();const D=`M${O.button}`;x(i.presetIndex,i.keyIndex,D)},[i,x]),M=ye.useCallback(()=>{s(null)},[]);ye.useEffect(()=>{if(i)return document.addEventListener("keydown",C,!0),document.addEventListener("mousedown",B,!0),document.addEventListener("click",M,!0),()=>{document.removeEventListener("keydown",C,!0),document.removeEventListener("mousedown",B,!0),document.removeEventListener("click",M,!0)}},[i,C,B,M]);const k=(O,D)=>{const J=e.keybinds[O]||{primary:"",secondary:""},K=D===0?J.primary:J.secondary;return i?.presetIndex===O&&i?.keyIndex===D?"Press...":K?d(K):D===0?"Modifier":"Key"},S=(O,D)=>{const J=i?.presetIndex===O&&i?.keyIndex===D,K=e.keybinds[O]||{primary:"",secondary:""},$=D===0?K.primary:K.secondary;let _="w-[48px] h-[22px] text-[10px] font-medium rounded transition-colors flex items-center justify-center relative truncate group ";return J?_+="bg-orange-500 text-white animate-pulse":$?_+="bg-accent text-white":_+="bg-surface text-text-secondary hover:text-text-primary",_},F=(O,D,J)=>{J.preventDefault(),J.stopPropagation(),x(O,0,D),l(null)},L=(O,D)=>{D.preventDefault(),D.stopPropagation(),x(O,0,""),l(null)},I=O=>{const J=(e.keybinds[O]||{primary:""}).primary,K=a===O,$=O>=3,_=Go.find(W=>W.value===J);return o.jsxs(pc,{isOpen:K,onOpen:()=>l(O),onClose:()=>l(null),trigger:o.jsxs("button",{className:`w-full h-[22px] text-[10px] font-medium rounded transition-colors flex items-center justify-center justify-between px-2 border border-white/[0.05] hover:border-white/[0.08] ${J?'bg-accent text-white [&[data-theme="light"]]:text-white':"bg-surface text-text-secondary hover:text-text-primary"}`,type:"button",children:[o.jsx("span",{className:J?"":"text-red-400",children:_?.label||"None"}),o.jsx(Sn,{className:`w-2.5 h-2.5 transition-transform ${K?"rotate-180":""}`})]}),openUpward:$,className:"w-[60px]",children:[Go.map(W=>o.jsx("div",{className:"w-full px-2 py-1 text-[10px] font-medium text-text-secondary hover:text-text-primary hover:bg-surface transition-colors cursor-pointer",onClick:G=>F(O,W.value,G),children:W.label},W.value)),J&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-t border-white/[0.05] my-1"}),o.jsx("div",{className:"w-full px-2 py-1 text-[10px] font-medium text-red-400 hover:text-red-300 hover:bg-surface transition-colors cursor-pointer",onClick:W=>L(O,W),children:"None"})]})]})},U=(O,D)=>{if(D===0)return I(O);const K=(e.keybinds[O]||{secondary:""}).secondary;return o.jsxs("button",{className:S(O,D),onClick:()=>g(O,D),children:[k(O,D),K&&o.jsx("button",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 bg-red-500 text-white rounded-md flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:$=>b(O,D,$),children:o.jsx(Lr,{className:"w-2 h-2"})})]})};return ye.useEffect(()=>{const O=D=>{const J=D.target;a!==null&&!J.closest(".relative")&&l(null)};if(a!==null)return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[a]),o.jsx(Tt,{isOpen:r,onClose:t,title:"Keybind Settings",children:o.jsxs("div",{style:{minHeight:"fit-content",transform:"translateZ(0)"},children:[o.jsx(ht,{title:"Quick Buy Presets",defaultOpen:!0,icon:Pn,children:o.jsx("div",{className:"space-y-1.5",children:e.keybinds.map((O,D)=>D<5?o.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2.5 bg-surface-dark rounded-md border border-white/[0.05]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-5 h-5 rounded-md bg-surface flex items-center justify-center",children:o.jsx(Pn,{className:"w-3.5 h-3.5 text-accent"})}),o.jsxs("div",{className:"text-[11px] font-medium text-text-primary",children:["Quick Buy Preset ",D+1]})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[U(D,0),o.jsx("div",{className:"text-[10px] text-text-secondary font-medium",children:"+"}),U(D,1)]})]},D):null)})}),o.jsx(ht,{title:"Other Keybinds",defaultOpen:!0,icon:yr,children:o.jsx("div",{className:"space-y-1.5",children:o.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2.5 bg-surface-dark rounded-md border border-white/[0.05]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-5 h-5 rounded-md bg-surface flex items-center justify-center",children:o.jsx(yr,{className:"w-3.5 h-3.5 text-accent"})}),o.jsx("div",{className:"text-[11px] font-medium text-text-primary",children:"Shitter Toggle"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[U(5,0),o.jsx("div",{className:"text-[10px] text-text-secondary font-medium",children:"+"}),U(5,1)]})]})})})]})})}const Zo=[{value:"none",label:"None",icon:""},{value:"Kaching",label:"Ka-ching",icon:"ðŸ’°"},{value:"Apple-pay",label:"Apple Pay",icon:"ðŸ"},{value:"Shotgun",label:"Shotgun",icon:"ðŸ”«"},{value:"Minecraft_experience",label:"Minecraft XP",icon:"ðŸŸ¢"},{value:"Roblox-oof",label:"Roblox Oof",icon:"ðŸŽ®"},{value:"Minecraft-oof",label:"Minecraft Oof",icon:"â›ï¸"},{value:"Sparkle",label:"Sparkle",icon:"âœ¨"},{value:"Fart",label:"Fart",icon:"ðŸ’¨"},{value:"Bubble-pop",label:"Pop",icon:"ðŸ’«"},{value:"Bell-ding",label:"Bell Ding",icon:"ðŸ””"},{value:"Announcement",label:"Alert",icon:"ðŸ“¢"},{value:"Ding",label:"Ding",icon:"ðŸ””"},{value:"Select",label:"Select",icon:"âœ…"},{value:"Digital-beep",label:"Beep 1",icon:"ðŸ“Ÿ"},{value:"Smooth-beep",label:"Beep 2",icon:"ðŸŽµ"},{value:"Explosion",label:"Explosion",icon:"ðŸ’¥"}],Yo=[{type:"buy",icon:Mn,title:"Buy Transaction"},{type:"sell",icon:Mn,title:"Sell Transaction"},{type:"consolidate",icon:Mc,title:"Consolidate"},{type:"split",icon:Tc,title:"Split Supply"}];function v0({isOpen:r,onClose:t}){const{settings:e,updateSettings:n}=Z.useContext(_e),i=Z.useRef(null),[s,a]=Z.useState(null),[l,d]=Z.useState(null),[g,x]=Z.useState("");Z.useEffect(()=>{const U=O=>{s&&!O.target.closest(".dropdown-container")&&a(null)};return r&&document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[s,r]);const b=Z.useCallback((U,O=.5)=>{if(i.current&&U!=="none"&&U!=="off"){const D=`/assets/media/sound_effects/${U}.mp3`;i.current.src=D,i.current.volume=O,i.current.play()}},[]),C=Z.useCallback((U,O)=>{const D=U.replace("Sound","Volume"),J=e.soundEffects[D];b(O,J),n({soundEffects:{...e.soundEffects,[U]:O}}),a(null)},[e.soundEffects,n,b]),B=Z.useCallback((U,O,D=!1)=>{if(n({soundEffects:{...e.soundEffects,[U]:O}}),D){const J=U.replace("Volume","Sound"),K=e.soundEffects[J];b(K,O)}},[e.soundEffects,n,b]),M=Z.useCallback(U=>{const O=`${U}Volume`,D=e.soundEffects[O];x(Math.round(D*100).toString()),d(U)},[e.soundEffects]),k=Z.useCallback(U=>{const O=U.replace(/[^0-9.]/g,""),D=O.split(".");D.length>2||D[1]&&D[1].length>2||x(O)},[]),S=Z.useCallback(U=>{const O=`${U}Volume`;let D=parseFloat(g);isNaN(D)||D<0?D=0:D>100&&(D=100);const K=Math.round(D*100)/100/100;B(O,K,!0),d(null),x("")},[g,B]),F=Z.useCallback((U,O)=>{if(U.key==="Enter")U.preventDefault(),S(O);else if(U.key==="Escape")U.preventDefault(),d(null),x("");else if(U.key==="ArrowUp"||U.key==="ArrowDown"){U.preventDefault();const D=parseFloat(g)||0,J=U.shiftKey?10:1,K=U.key==="ArrowUp"?Math.min(100,D+J):Math.max(0,D-J);x(K.toString())}},[S,g]),L=U=>{const O=Zo.find(D=>D.value===U);return O?o.jsxs("div",{className:"flex items-center gap-2",children:[O.icon&&o.jsx("span",{children:O.icon}),o.jsx("span",{children:O.label})]}):"Select sound"},I=({type:U,icon:O,title:D},J)=>{const K=s===U,$=e.soundEffects[`${U}Sound`],_=e.soundEffects[`${U}Volume`],W=J>=Yo.length-2;return o.jsxs("div",{className:"py-1.5 px-2.5 bg-surface-dark rounded-md border border-white/[0.05]",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("div",{className:"w-5 h-5 rounded-md bg-surface flex items-center justify-center",children:o.jsx(O,{className:"w-4 h-4 text-accent"})}),o.jsx("div",{className:"text-[11px] font-medium text-text-primary whitespace-nowrap",children:D})]}),o.jsx(pc,{isOpen:K,onOpen:()=>a(U),onClose:()=>a(null),trigger:o.jsxs("button",{className:"w-[160px] bg-surface rounded-md px-2.5 py-1 text-xs font-medium border border-white/[0.05] hover:border-white/[0.08] focus:border-accent transition-colors flex items-center justify-between whitespace-nowrap",children:[o.jsx("span",{children:L($)}),o.jsx(Sn,{className:`w-3.5 h-3.5 text-text-secondary transition-transform duration-200 ${K?"rotate-180":""}`})]}),openUpward:W,children:Zo.map(G=>o.jsxs("button",{className:`w-full px-2.5 py-1.5 text-xs flex items-center gap-2 text-left transition-all duration-200 hover:bg-surface relative ${$===G.value?"bg-surface":""}`,onClick:()=>C(`${U}Sound`,G.value),children:[G.icon&&o.jsx("span",{className:"w-4 text-center",children:G.icon}),o.jsx("span",{children:G.label})]},G.value))})]}),$&&$!=="none"&&$!=="off"&&o.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-white/[0.05]",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wr,{className:"w-3.5 h-3.5 text-accent"}),o.jsx("span",{className:"text-[10px] font-medium text-text-secondary",children:"Volume"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lt,{value:_,onChange:G=>B(`${U}Volume`,G,!1),onMouseUp:G=>B(`${U}Volume`,G,!0),onKeyUp:G=>B(`${U}Volume`,G,!0),className:"w-20"}),l===U?o.jsx("input",{type:"number",value:g,onChange:G=>k(G.target.value),onBlur:()=>S(U),onKeyDown:G=>F(G,U),className:"w-8 h-5 bg-surface rounded px-1 text-[10px] font-medium text-text-secondary text-center border border-white/[0.05] focus:border-accent focus:outline-none",autoFocus:!0}):o.jsxs("span",{className:"text-[10px] font-medium text-text-secondary tabular-nums w-8 cursor-pointer hover:text-accent transition-colors",onClick:()=>M(U),children:[Math.round(_*100),"%"]})]})]})]})};return o.jsx(Tt,{isOpen:r,onClose:t,title:"Sound Effects",children:o.jsxs("div",{style:{minHeight:"fit-content",transform:"translateZ(0)"},children:[o.jsx(ht,{title:"Transaction Sounds",defaultOpen:!0,icon:wr,children:o.jsx("div",{className:"space-y-1.5",children:Yo.map((U,O)=>o.jsx("div",{children:I(U,O)},U.type))})}),o.jsx("audio",{ref:i,className:"hidden"})]})})}const S0=[{id:"settings",label:o.jsx(o.Fragment,{children:"Settings Only"}),description:"Export app settings and preferences"},{id:"wallets",label:o.jsx(o.Fragment,{children:"Wallets Only"}),description:"Export wallet configurations"},{id:"everything",label:o.jsx(o.Fragment,{children:"Everything"}),description:"Export all settings and data"}];function k0(){const{settings:r,migrateAndUpdateSettings:t}=Z.useContext(_e),[e,n]=Z.useState("everything"),[i,s]=Z.useState(!1),[a,l]=Z.useState(null),d=Z.useRef(null),g=(M,k)=>{const S=new Blob([JSON.stringify(M,null,2)],{type:"application/json"}),F=URL.createObjectURL(S),L=document.createElement("a");L.href=F,L.download=`shitter-tech-${k}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(F)},x=M=>{switch(M){case"settings":return Object.fromEntries(Object.entries(r).filter(([k])=>k!=="wallets"));case"wallets":return{wallets:r.wallets};default:return r}},b=()=>{e==="settings"?g(x(e),e):s(!0)},C=()=>{s(!1),g(x(e),e)},B=async M=>{l(null);const k=M.target.files?.[0];if(k)try{const S=await k.text(),F=JSON.parse(S);t(F),d.current&&(d.current.value="")}catch(S){console.error("Import error:",S),l("Failed to import settings. Please check the file format and ensure wallet data is valid.")}};return o.jsxs(ht,{title:"Export & Import",defaultOpen:!0,icon:Rc,children:[o.jsx("div",{className:"space-y-2 min-h-[168px]",children:S0.map(({id:M,label:k,description:S})=>o.jsxs("label",{className:`relative flex items-center px-2.5 py-2 bg-surface-dark rounded-md border cursor-pointer transition-colors ${e===M?"border-accent ring-1 ring-accent/20":"border-white/[0.05] hover:border-white/[0.08]"}`,children:[o.jsx("input",{type:"radio",name:"exportOption",value:M,checked:e===M,onChange:()=>n(M),className:"sr-only"}),o.jsxs("div",{className:"flex-1 min-w-0 pr-6",children:[o.jsx("div",{className:"text-xs font-medium",children:k}),o.jsx("div",{className:"text-[11px] text-text-secondary mt-1 mb-0",children:S})]}),o.jsx("div",{className:`w-3.5 h-3.5 rounded-full border-2 transition-colors ${e===M?"border-accent bg-accent/10":"border-white/[0.08] bg-surface"}`,children:o.jsx("div",{className:`w-1.5 h-1.5 rounded-full bg-accent m-0.5 transition-all ${e===M?"opacity-100":"opacity-0"}`})})]},M))}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsxs("button",{onClick:b,className:"flex items-center justify-center gap-1 px-2.5 py-1.5 text-xs font-medium rounded-md transition-all w-[calc(50%-0.25rem)] bg-accent text-white hover:bg-accent-light",children:[o.jsx(ha,{className:"w-3.5 h-3.5"}),"Export"]}),o.jsxs("label",{className:"w-[calc(50%-0.25rem)]",children:[o.jsx("input",{ref:d,type:"file",accept:".json",onChange:B,className:"hidden"}),o.jsxs("div",{className:"flex items-center justify-center gap-1 px-2.5 py-1.5 text-xs font-medium rounded-md transition-all bg-surface text-text-primary hover:bg-surface-dark cursor-pointer",children:[o.jsx(da,{className:"w-3.5 h-3.5"}),"Import"]})]})]}),a&&o.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-md border bg-red-500/10 border-red-500/20",children:[o.jsx(vn,{className:"w-4 h-4 text-red-500 shrink-0"}),o.jsx("p",{className:"text-xs text-red-500",children:a})]}),o.jsx(sr,{isOpen:i,onClose:()=>s(!1),onConfirm:C,title:e==="everything"?"Full Export Warning":"Wallet Export Warning",description:e==="everything"?"This file contains sensitive wallet data and private keys.":"This file contains wallet addresses and balances.",sections:e==="everything"?["Anyone with this file can access your funds","Store securely and never share"]:["Keep private to protect your security","Do not share with untrusted parties"],confirmText:"I Understand the Risks, Export",isDangerous:e==="everything"})]})}const E0=3e3,Jo="dark";function B0(){const{settings:r,updateSettings:t,resetSettings:e}=Z.useContext(_e),[n,i]=Z.useState(!1),[s,a]=Z.useState(!1),[l,d]=Z.useState(!1),[g,x]=Z.useState(!1),[b,C]=Z.useState(!1),B=Z.useCallback(()=>{if(!n){i(!0);return}x(!0),e(),chrome.storage.sync.get(["lastSeenVersion"]).then(F=>{const L=F.lastSeenVersion;return yn.clear().then(()=>{if(L)return chrome.storage.sync.set({lastSeenVersion:L})})}).then(()=>{t({theme:Jo}),un(Jo),i(!1),x(!1),C(!0),setTimeout(()=>C(!1),2e3)})},[n,e,t]);Z.useEffect(()=>{if(!n)return;const F=setTimeout(()=>i(!1),E0);return()=>clearTimeout(F)},[n]);const M=()=>b?"Settings reset successfully!":n?"Click again to confirm reset":g?"Resetting...":"Reset all settings",k=()=>b?o.jsx(fn,{className:"w-3.5 h-3.5"}):o.jsx(Lc,{className:`w-3.5 h-3.5 ${g?"animate-spin":""}`}),S=()=>b?"bg-green-500/10 text-green-500 hover:bg-green-500/20":n?"bg-red-500/10 text-red-500 hover:bg-red-500/20":"bg-surface hover:bg-surface-dark text-text-secondary hover:text-text-primary";return o.jsxs("div",{className:"space-y-3",children:[o.jsx(ht,{title:"Server Configuration",defaultOpen:!0,icon:hi,children:o.jsx(x0,{value:r.server,onChange:F=>t({server:F})})}),o.jsx(ht,{title:"Theme",defaultOpen:!0,icon:ca,children:o.jsx(y0,{})}),o.jsx(ht,{title:"Sound Effects",defaultOpen:!0,icon:wr,children:o.jsx(le,{icon:o.jsx(wr,{className:"w-4 h-4 text-accent"}),title:"Sound Effects",description:"Transaction sounds",isEnabled:r.soundEffects.enabled,onToggle:F=>t({soundEffects:{...r.soundEffects,enabled:F}}),onSettingsClick:()=>d(!0)})}),o.jsx(ht,{title:"Keybinds",defaultOpen:!0,icon:Ui,children:o.jsxs("button",{onClick:()=>a(!0),className:"w-full px-3 py-2 text-xs font-medium bg-surface hover:bg-surface-dark text-text-secondary hover:text-text-primary rounded-md transition-all flex items-center justify-center gap-2",children:[o.jsx(Ui,{className:"w-3.5 h-3.5"}),"Open Keybind Settings"]})}),o.jsx(k0,{}),o.jsx("div",{className:"pt-2",children:o.jsxs("button",{onClick:B,disabled:g||b,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-md text-xs font-medium transition-all relative ${S()} ${g||b?"opacity-50 cursor-not-allowed":""}`,children:[k(),M()]})}),o.jsx(w0,{isOpen:s,onClose:()=>a(!1)}),o.jsx(v0,{isOpen:l,onClose:()=>d(!1)})]})}const dr={width:460,height:483},Xo={width:800,height:600},N0=[{id:"main",label:"Main",icon:Pc},{id:"wallets",label:"Wallets",icon:Ft},{id:"transactions",label:"Transactions",icon:Oc},{id:"platforms",label:"Platforms",icon:hi},{id:"settings",label:"Settings",icon:Fc}];function j0(){const[r,t]=Z.useState(!1),[e,n]=Z.useState(0),[i,s]=Z.useState(!1),{theme:a}=Kc(),[l,d]=Z.useState(dr),[g,x]=Z.useState(()=>localStorage.getItem("lastActiveTab")||"main"),b=Z.useRef(null),C=Z.useRef(!1),B=Z.useRef({x:0,y:0}),M=Z.useRef(dr),k=Z.useRef(l);Z.useEffect(()=>{k.current=l},[l]),Z.useEffect(()=>{const U=$=>{$.target===b.current&&(C.current=!0,B.current={x:$.clientX,y:$.clientY},M.current={...k.current},document.body.style.userSelect="none")},O=$=>{if(!C.current)return;const _=$.clientX-B.current.x,W=$.clientY-B.current.y,G=Math.max(dr.width,Math.min(Xo.width,M.current.width-_)),E=Math.max(dr.height,Math.min(Xo.height,M.current.height+W));d({width:G,height:E}),chrome?.storage?.local?.set({windowSize:{width:G,height:E}})},D=()=>{C.current&&(C.current=!1,document.body.style.userSelect="")},J=["mousedown","mousemove","mouseup"],K=[U,O,D];return J.forEach(($,_)=>document.addEventListener($,K[_])),chrome?.storage?.local?.get(["windowSize"],$=>{$.windowSize&&d($.windowSize)}),t(!0),requestAnimationFrame(()=>s(!0)),()=>J.forEach(($,_)=>document.removeEventListener($,K[_]))},[]);const S=U=>{x(U),localStorage.setItem("lastActiveTab",U)},F=()=>n(U=>U+1),I=Z.useMemo(()=>({main:Ki,wallets:Wf,transactions:e0,platforms:d0,settings:B0}),[])[g]||Ki;return o.jsxs("div",{className:`flex overflow-hidden transition-opacity duration-200 ${r?"opacity-100":"opacity-0"}`,"data-theme":a,style:{width:l.width,height:l.height},children:[o.jsxs("div",{className:"w-[72px] h-full bg-deep-dark p-2 flex flex-col relative after:absolute after:right-0 after:top-0 after:w-[1px] after:h-full after:bg-gradient-to-b after:from-white/[0.03] via-white/[0.08] to-white/[0.03]",children:[o.jsx("div",{className:"flex-1 flex flex-col items-center gap-2",children:N0.map(({id:U,label:O,icon:D})=>{const J=g===U;return o.jsxs("button",{onClick:()=>S(U),title:O,className:`w-full h-[64px] rounded-xl flex flex-col items-center justify-center gap-1.5 transition-all duration-200 group relative ${J?"bg-accent/10":"text-text-secondary hover:text-accent"}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center transition-all ${J?"bg-accent text-white shadow-lg shadow-accent/25":"bg-surface-dark hover:bg-accent/5"}`,children:o.jsx(D,{className:"w-5 h-5"})}),o.jsx("span",{className:"text-[10px] font-medium text-text-secondary",children:O}),J&&o.jsx("div",{className:"absolute left-0 top-[35%] -translate-y-1/2 h-6 w-0.5 bg-accent rounded-md shadow-[0_0_8px_rgba(0,102,255,0.35)]"})]},U)})}),o.jsx("div",{className:"mt-auto mb-2 flex flex-col items-center gap-2",children:o.jsxs("a",{href:"https://discord.gg/shittertech",target:"_blank",rel:"noopener noreferrer",title:"Join our Discord",className:"w-8 h-8 rounded-md flex items-center justify-center bg-surface-dark relative overflow-hidden transition-all group hover:scale-105",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#5865F2] to-[#7289DA] opacity-10 group-hover:opacity-25 transition-all duration-300"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent transform -translate-x-full opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:translate-x-full"}),o.jsx("img",{src:"./assets/media/icons/discord.svg",alt:"Discord",className:"w-4 h-4 object-contain relative z-10 transition-transform group-hover:scale-110",loading:"lazy"}),o.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-surface-dark rounded text-xs font-medium opacity-0 invisible whitespace-nowrap group-hover:opacity-100 group-hover:visible group-hover:translate-x-0 -translate-x-2 transition-all duration-200",children:"Join Discord"})]})})]}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsxs("div",{className:"p-4 h-full",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("h1",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[o.jsx("img",{src:"./assets/media/logos/logo.webp",alt:"Logo",className:"w-6 h-6 object-contain",loading:"lazy"}),o.jsxs("span",{className:i?"header-fade-in":"opacity-0",children:["shitter.",o.jsx("span",{className:"bg-gradient-to-r from-accent to-accent-light bg-clip-text text-transparent",children:"tech"})]})]}),o.jsx("span",{className:`text-sm px-3 py-1.5 bg-surface-dark/50 rounded-md border border-white/[0.02] font-medium ${i?"header-fade-in":"opacity-0"}`,children:o.jsxs("span",{className:"bg-gradient-to-r from-accent to-accent-light bg-clip-text text-transparent",children:["v",chrome?.runtime?.getManifest?.()?.version||"1.0.0"]})})]}),o.jsx("div",{className:"h-[calc(100%-4rem)] overflow-y-auto overflow-x-hidden pr-2 scrollbar-thin scrollbar-thumb-accent/10 scrollbar-track-transparent hover:scrollbar-thumb-accent/20",children:o.jsx(Wc,{onRetry:F,children:o.jsx("div",{className:"h-full",style:{animation:"contentEnter 0.25s cubic-bezier(0.4, 0, 0.2, 1)",opacity:0,transform:"scale(0.98)",animationFillMode:"forwards"},children:o.jsx(I,{})},g)},e)})]})}),o.jsx("div",{ref:b,className:"resize-handle"})]})}mc.createRoot(document.getElementById("root")).render(o.jsx(Z.StrictMode,{children:o.jsx(Tf,{children:o.jsx(j0,{})})}));
